%% Generated by Sphinx.
\def\sphinxdocclass{report}
\documentclass[letterpaper,10pt,english]{sphinxmanual}
\ifdefined\pdfpxdimen
   \let\sphinxpxdimen\pdfpxdimen\else\newdimen\sphinxpxdimen
\fi \sphinxpxdimen=.75bp\relax

\PassOptionsToPackage{warn}{textcomp}
\usepackage[utf8]{inputenc}
\ifdefined\DeclareUnicodeCharacter
% support both utf8 and utf8x syntaxes
  \ifdefined\DeclareUnicodeCharacterAsOptional
    \def\sphinxDUC#1{\DeclareUnicodeCharacter{"#1}}
  \else
    \let\sphinxDUC\DeclareUnicodeCharacter
  \fi
  \sphinxDUC{00A0}{\nobreakspace}
  \sphinxDUC{2500}{\sphinxunichar{2500}}
  \sphinxDUC{2502}{\sphinxunichar{2502}}
  \sphinxDUC{2514}{\sphinxunichar{2514}}
  \sphinxDUC{251C}{\sphinxunichar{251C}}
  \sphinxDUC{2572}{\textbackslash}
\fi
\usepackage{cmap}
\usepackage[T1]{fontenc}
\usepackage{amsmath,amssymb,amstext}
\usepackage{babel}



\usepackage{times}
\expandafter\ifx\csname T@LGR\endcsname\relax
\else
% LGR was declared as font encoding
  \substitutefont{LGR}{\rmdefault}{cmr}
  \substitutefont{LGR}{\sfdefault}{cmss}
  \substitutefont{LGR}{\ttdefault}{cmtt}
\fi
\expandafter\ifx\csname T@X2\endcsname\relax
  \expandafter\ifx\csname T@T2A\endcsname\relax
  \else
  % T2A was declared as font encoding
    \substitutefont{T2A}{\rmdefault}{cmr}
    \substitutefont{T2A}{\sfdefault}{cmss}
    \substitutefont{T2A}{\ttdefault}{cmtt}
  \fi
\else
% X2 was declared as font encoding
  \substitutefont{X2}{\rmdefault}{cmr}
  \substitutefont{X2}{\sfdefault}{cmss}
  \substitutefont{X2}{\ttdefault}{cmtt}
\fi


\usepackage[Bjarne]{fncychap}
\usepackage{sphinx}

\fvset{fontsize=\small}
\usepackage{geometry}


% Include hyperref last.
\usepackage{hyperref}
% Fix anchor placement for figures with captions.
\usepackage{hypcap}% it must be loaded after hyperref.
% Set up styles of URL: it should be placed after hyperref.
\urlstyle{same}


\usepackage{sphinxmessages}
\setcounter{tocdepth}{-1}



\title{MariaDB Tools Documentation}
\date{Nov 04, 2021}
\release{6.0.0rc}
\author{2021, MariaDB Corporation and/or its affiliates}
\newcommand{\sphinxlogo}{\sphinxincludegraphics{mariadb-logo.jpg}\par}
\renewcommand{\releasename}{Release}
\makeindex
\begin{document}

\pagestyle{empty}
\sphinxmaketitle
\pagestyle{plain}
\sphinxtableofcontents
\pagestyle{normal}
\phantomsection\label{\detokenize{index::doc}}


MariaDB Tools are a collection of advanced command\sphinxhyphen{}line tools
used by \sphinxhref{http://www.mariadb.com/}{MariaDB}) support staff
to perform a variety of MariaDB database and system tasks
that are too difficult or complex to perform manually.

These tools are ideal alternatives to private or “one\sphinxhyphen{}off” scripts,
because they are professionally developed, formally tested,
and fully documented.
They are also fully self\sphinxhyphen{}contained,
so installation is quick and easy,
and no libraries are installed.

MariaDB Tools were derived from MariaDB scripts, Percona Toolkit,
Maatkit, PalaminoDB Tools and Aspersa,
some of the best\sphinxhyphen{}known toolkits for MariaDB server administration.
It is developed and supported by MariaDB.


\part{Getting MariaDB Tools}
\label{\detokenize{index:getting-mariadb-tools}}

\chapter{Installing MariaDB Tools}
\label{\detokenize{installation:installing-mariadb-tools}}\label{\detokenize{installation:install}}\label{\detokenize{installation::doc}}
MariaDB provides packages for most popular 64\sphinxhyphen{}bit Linux distributions:
\begin{itemize}
\item {} 
Debian 7 (“wheezy”)

\item {} 
Debian 8 (“jessie”)

\item {} 
Ubuntu 14.04 LTS (Trusty Tahr)

\item {} 
Ubuntu 16.04 LTS (Xenial Xerus)

\item {} 
Ubuntu 16.10 (Yakkety Yak)

\item {} 
Ubuntu 17.04 (Zesty Zapus)

\item {} 
Red Hat Enterprise Linux or CentOS 6 (Santiago)

\item {} 
Red Hat Enterprise Linux or CentOS 7 (Maipo)

\end{itemize}

\begin{sphinxadmonition}{note}{Note:}
MariaDB Tools should work on other DEB\sphinxhyphen{}based and RPM\sphinxhyphen{}based systems
(for example, Oracle Linux and Amazon Linux AMI),
but it is tested only on those listed above.
\end{sphinxadmonition}

It is recommended to install MariaDB software from official repositories:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
Configure repositories as described in
\sphinxhref{https://mariadb.com/docs/deploy/installation/\#install-repository}{MariaDB Enterprise Documentation}.

\item {} 
Install MariaDB Tools using the corresponding package manager:
\begin{itemize}
\item {} 
For Debian or Ubuntu:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{sudo} \PYG{n}{apt}\PYG{o}{\PYGZhy{}}\PYG{n}{get} \PYG{n}{install} \PYG{n}{MariaDB}\PYG{o}{\PYGZhy{}}\PYG{n}{Tools}
\end{sphinxVerbatim}

\item {} 
For RHEL or CentOS:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{sudo} \PYG{n}{yum} \PYG{n}{install} \PYG{n}{MariaDB}\PYG{o}{\PYGZhy{}}\PYG{n}{Tools}
\end{sphinxVerbatim}

\end{itemize}

\end{enumerate}


\section{Alternative Install Methods}
\label{\detokenize{installation:alternative-install-methods}}
You can also download the packages from the
\sphinxhref{https://customers.mariadb.com}{MariaDB Customer Portal}
and install it using tools like \sphinxcode{\sphinxupquote{dpkg}} and \sphinxcode{\sphinxupquote{rpm}},
depending on your system.

If you want to download a specific tool, use the following address:
\sphinxurl{http://tools.mariadb.com/get}

For example, to download the \sphinxcode{\sphinxupquote{mariadb\sphinxhyphen{}summary}} tool, run:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{wget} \PYG{n}{tools}\PYG{o}{.}\PYG{n}{mariadb}\PYG{o}{.}\PYG{n}{com}\PYG{o}{/}\PYG{n}{get}\PYG{o}{/}\PYG{n}{mariadb}\PYG{o}{\PYGZhy{}}\PYG{n}{summary}
\end{sphinxVerbatim}


\part{Tools}
\label{\detokenize{index:tools}}

\chapter{\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}align\sphinxhyphen{}output}}}
\label{\detokenize{mariadb-align-output:mariadb-align-output}}\label{\detokenize{mariadb-align-output::doc}}

\section{NAME}
\label{\detokenize{mariadb-align-output:name}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}align\sphinxhyphen{}output}} \sphinxhyphen{} Align output from other tools to columns.


\section{SYNOPSIS}
\label{\detokenize{mariadb-align-output:synopsis}}

\subsection{Usage}
\label{\detokenize{mariadb-align-output:usage}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{mariadb}\PYG{o}{\PYGZhy{}}\PYG{n}{align}\PYG{o}{\PYGZhy{}}\PYG{n}{output} \PYG{p}{[}\PYG{n}{FILES}\PYG{p}{]}
\end{sphinxVerbatim}

\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}align\sphinxhyphen{}output}} aligns output from other tools to columns.  If no FILES are specified,
STDIN is read.

If a tool prints the following output,

\begin{sphinxVerbatim}[commandchars=\\\{\}]
DATABASE TABLE   ROWS
foo      bar      \PYG{l+m}{100}
long\PYGZus{}db\PYGZus{}name table  \PYG{l+m}{1}
another  long\PYGZus{}name \PYG{l+m}{500}
\end{sphinxVerbatim}

then \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}align\sphinxhyphen{}output}} reprints the output as,

\begin{sphinxVerbatim}[commandchars=\\\{\}]
DATABASE     TABLE     ROWS
foo          bar        \PYG{l+m}{100}
long\PYGZus{}db\PYGZus{}name table        \PYG{l+m}{1}
another      long\PYGZus{}name  \PYG{l+m}{500}
\end{sphinxVerbatim}


\section{RISKS}
\label{\detokenize{mariadb-align-output:risks}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}align\sphinxhyphen{}output}} is mature, proven in the real world, and well tested,
but all database tools can pose a risk to the system and the database
server.  Before using this tool, please:
\begin{itemize}
\item {} 
Read the tool’s documentation

\item {} 
Review the tool’s known “BUGS”

\item {} 
Test the tool on a non\sphinxhyphen{}production server

\item {} 
Backup your production server and verify the backups

\end{itemize}


\section{DESCRIPTION}
\label{\detokenize{mariadb-align-output:description}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}align\sphinxhyphen{}output}} reads lines and splits them into words.  It counts how many
words each line has, and if there is one number that predominates, it assumes
this is the number of words in each line.  Then it discards all lines that
don’t have that many words, and looks at the 2nd line that does.  It assumes
this is the first non\sphinxhyphen{}header line.  Based on whether each word looks numeric
or not, it decides on column alignment.  Finally, it goes through and decides
how wide each column should be, and then prints them out.

This is useful for things like aligning the output of vmstat or iostat so it
is easier to read.


\section{OPTIONS}
\label{\detokenize{mariadb-align-output:options}}
This tool accepts additional command\sphinxhyphen{}line arguments.  Refer to the
“SYNOPSIS” and usage information for details.
\index{mariadb\sphinxhyphen{}align\sphinxhyphen{}output command line option@\spxentry{mariadb\sphinxhyphen{}align\sphinxhyphen{}output command line option}!\sphinxhyphen{}\sphinxhyphen{}help@\spxentry{\sphinxhyphen{}\sphinxhyphen{}help}}\index{\sphinxhyphen{}\sphinxhyphen{}help@\spxentry{\sphinxhyphen{}\sphinxhyphen{}help}!mariadb\sphinxhyphen{}align\sphinxhyphen{}output command line option@\spxentry{mariadb\sphinxhyphen{}align\sphinxhyphen{}output command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-align-output:cmdoption-mariadb-align-output-help}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}help}}\sphinxcode{\sphinxupquote{}}}
Show help and exit.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}align\sphinxhyphen{}output command line option@\spxentry{mariadb\sphinxhyphen{}align\sphinxhyphen{}output command line option}!\sphinxhyphen{}\sphinxhyphen{}version@\spxentry{\sphinxhyphen{}\sphinxhyphen{}version}}\index{\sphinxhyphen{}\sphinxhyphen{}version@\spxentry{\sphinxhyphen{}\sphinxhyphen{}version}!mariadb\sphinxhyphen{}align\sphinxhyphen{}output command line option@\spxentry{mariadb\sphinxhyphen{}align\sphinxhyphen{}output command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-align-output:cmdoption-mariadb-align-output-version}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}version}}\sphinxcode{\sphinxupquote{}}}
Show version and exit.

\end{fulllineitems}



\section{ENVIRONMENT}
\label{\detokenize{mariadb-align-output:environment}}
This tool does not use any environment variables.


\section{SYSTEM REQUIREMENTS}
\label{\detokenize{mariadb-align-output:system-requirements}}
You need Perl, and some core packages that ought to be installed in any
reasonably new version of Perl.


\section{AUTHORS}
\label{\detokenize{mariadb-align-output:authors}}
Cole Busby,Baron Schwartz, Brian Fraser, and Daniel Nichter


\section{ABOUT THIS MARIADB TOOL}
\label{\detokenize{mariadb-align-output:about-this-mariadb-tool}}
This tool is part of MariaDB client tools. This MariaDB Tool was forked from
Percona Toolkit’s pt\sphinxhyphen{}align in August, 2019. Percona Toolkit was forked from two
projects in June, 2011: Maatkit and Aspersa.  Those projects were created by
Baron Schwartz and primarily developed by him and Daniel Nichter.


\section{COPYRIGHT, LICENSE, AND WARRANTY}
\label{\detokenize{mariadb-align-output:copyright-license-and-warranty}}
This program is copyright 2019\sphinxhyphen{}2021 MariaDB Corporation and/or its affiliates,
2011\sphinxhyphen{}2018 Percona LLC and/or its affiliates, 2010\sphinxhyphen{}2011 Baron Schwartz.

THIS PROGRAM IS PROVIDED “AS IS” AND WITHOUT ANY EXPRESS OR IMPLIED
WARRANTIES, INCLUDING, WITHOUT LIMITATION, THE IMPLIED WARRANTIES OF
MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.

This program is free software; you can redistribute it and/or modify it under
the terms of the GNU General Public License as published by the Free Software
Foundation, version 2; OR the Perl Artistic License.  On UNIX and similar
systems, you can issue \textasciigrave{}man perlgpl’ or \textasciigrave{}man perlartistic’ to read these
licenses.

You should have received a copy of the GNU General Public License along with
this program; if not, write to the Free Software Foundation, Inc., 59 Temple
Place, Suite 330, Boston, MA  02111\sphinxhyphen{}1307  USA.


\section{VERSION}
\label{\detokenize{mariadb-align-output:version}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}align\sphinxhyphen{}output}} 6.0.0rc


\chapter{\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}}}
\label{\detokenize{mariadb-archiver:mariadb-archiver}}\label{\detokenize{mariadb-archiver::doc}}

\section{NAME}
\label{\detokenize{mariadb-archiver:name}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} \sphinxhyphen{} Archive rows from a MariaDB table into another table or a file.


\section{SYNOPSIS}
\label{\detokenize{mariadb-archiver:synopsis}}

\subsection{Usage}
\label{\detokenize{mariadb-archiver:usage}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{mariadb}\PYG{o}{\PYGZhy{}}\PYG{n}{archiver} \PYG{p}{[}\PYG{n}{OPTIONS}\PYG{p}{]} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{source} \PYG{n}{DSN} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{where} \PYG{n}{WHERE}
\end{sphinxVerbatim}

\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} nibbles records from a MariaDB table.  The \textendash{}source and \textendash{}dest
arguments use DSN syntax; if COPY is yes, \textendash{}dest defaults to the key’s value
from \textendash{}source.


\subsection{Examples}
\label{\detokenize{mariadb-archiver:examples}}
Archive all rows from oltp\_server to olap\_server and to a file:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
mariadb\PYGZhy{}archiver \PYGZhy{}\PYGZhy{}source \PYG{n+nv}{h}\PYG{o}{=}oltp\PYGZus{}server,D\PYG{o}{=}test,t\PYG{o}{=}tbl \PYGZhy{}\PYGZhy{}dest \PYG{n+nv}{h}\PYG{o}{=}olap\PYGZus{}server \PYG{l+s+se}{\PYGZbs{}}
  \PYGZhy{}\PYGZhy{}file \PYG{l+s+s1}{\PYGZsq{}/var/log/archive/\PYGZpc{}Y\PYGZhy{}\PYGZpc{}m\PYGZhy{}\PYGZpc{}d\PYGZhy{}\PYGZpc{}D.\PYGZpc{}t\PYGZsq{}}                           \PYG{l+s+se}{\PYGZbs{}}
  \PYGZhy{}\PYGZhy{}where \PYG{l+s+s2}{\PYGZdq{}1=1\PYGZdq{}} \PYGZhy{}\PYGZhy{}limit \PYG{l+m}{1000} \PYGZhy{}\PYGZhy{}commit\PYGZhy{}each
\end{sphinxVerbatim}

Purge (delete) orphan rows from child table:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
mariadb\PYGZhy{}archiver \PYGZhy{}\PYGZhy{}source \PYG{n+nv}{h}\PYG{o}{=}host,D\PYG{o}{=}db,t\PYG{o}{=}child \PYGZhy{}\PYGZhy{}purge \PYG{l+s+se}{\PYGZbs{}}
  \PYGZhy{}\PYGZhy{}where \PYG{l+s+s1}{\PYGZsq{}NOT EXISTS(SELECT * FROM parent WHERE col=child.col)\PYGZsq{}}
\end{sphinxVerbatim}


\section{RISKS}
\label{\detokenize{mariadb-archiver:risks}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} is mature, proven in the real world, and well tested,
but all database tools can pose a risk to the system and the database
server.  Before using this tool, please:
\begin{itemize}
\item {} 
Read the tool’s documentation

\item {} 
Review the tool’s known “BUGS”

\item {} 
Test the tool on a non\sphinxhyphen{}production server

\item {} 
Backup your production server and verify the backups

\end{itemize}


\section{DESCRIPTION}
\label{\detokenize{mariadb-archiver:description}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} is the tool I use to archive tables as described in
\sphinxurl{http://tinyurl.com/mysql-archiving}.  The goal is a low\sphinxhyphen{}impact, forward\sphinxhyphen{}only
job to nibble old data out of the table without impacting OLTP queries much.
You can insert the data into another table, which need not be on the same
server.  You can also write it to a file in a format suitable for LOAD DATA
INFILE.  Or you can do neither, in which case it’s just an incremental DELETE.

\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} is extensible via a plugin mechanism.  You can inject your own
code to add advanced archiving logic that could be useful for archiving
dependent data, applying complex business rules, or building a data warehouse
during the archiving process.

You need to choose values carefully for some options.  The most important are
{\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-limit}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}limit}}}}}, {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-retries}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}retries}}}}}, and {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-txn-size}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}txn\sphinxhyphen{}size}}}}}.

The strategy is to find the first row(s), then scan some index forward\sphinxhyphen{}only to
find more rows efficiently.  Each subsequent query should not scan the entire
table; it should seek into the index, then scan until it finds more archivable
rows.  Specifying the index with the ‘i’ part of the {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-source}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}source}}}}} argument can
be crucial for this; use {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-dry-run}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dry\sphinxhyphen{}run}}}}} to examine the generated queries and be
sure to EXPLAIN them to see if they are efficient (most of the time you probably
want to scan the PRIMARY key, which is the default).  Even better, examine the
difference in the Handler status counters before and after running the query,
and make sure it is not scanning the whole table every query.

You can disable the seek\sphinxhyphen{}then\sphinxhyphen{}scan optimizations partially or wholly with
{\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-no-ascend}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}ascend}}}}} and {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-ascend-first}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}ascend\sphinxhyphen{}first}}}}}.  Sometimes this may be more efficient
for multi\sphinxhyphen{}column keys.  Be aware that \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} is built to start at the
beginning of the index it chooses and scan it forward\sphinxhyphen{}only.  This might result
in long table scans if you’re trying to nibble from the end of the table by an
index other than the one it prefers.  See {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-source}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}source}}}}} and read the
documentation on the \sphinxcode{\sphinxupquote{i}} part if this applies to you.


\section{MariaDB Galera Cluster}
\label{\detokenize{mariadb-archiver:mariadb-galera-cluster}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} works with MariaDB Galera Cluster 10.1 and newer,
but there are three limitations you should consider before archiving on
a cluster:

Error on commit
\begin{quote}

\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} does not check for error when it commits transactions.
Commits on Galera can fail, but the tool does not yet check for or retry the
transaction when this happens.  If it happens, the tool will die.
\end{quote}

MyISAM tables
\begin{quote}

Archiving MyISAM tables works, but MyISAM support in Galera is still
experimental at the time of this release.  There are several known bugs with
Galera, MyISAM tables, and \sphinxcode{\sphinxupquote{AUTO\_INCREMENT}} columns.  Therefore, you must ensure
that archiving will not directly or indirectly result in the use of default
\sphinxcode{\sphinxupquote{AUTO\_INCREMENT}} values for a MyISAM table.  For example, this happens with
{\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-dest}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dest}}}}} if {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-columns}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}columns}}}}} is used and the \sphinxcode{\sphinxupquote{AUTO\_INCREMENT}} column is not
included.  The tool does not check for this!
\end{quote}

Non\sphinxhyphen{}cluster options
\begin{quote}

Certain options may or may not work.  For example, if a cluster node
is not also a slave, then {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-check-slave-lag}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}check\sphinxhyphen{}slave\sphinxhyphen{}lag}}}}} does not work.  And since Galera
tables are usually InnoDB, but InnoDB doesn’t support \sphinxcode{\sphinxupquote{INSERT DELAYED}}, then
{\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-delayed-insert}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}delayed\sphinxhyphen{}insert}}}}} does not work.  Other options may also not work, but
the tool does not check them, therefore you should test archiving on a test
cluster before archiving on your real cluster.
\end{quote}


\section{OUTPUT}
\label{\detokenize{mariadb-archiver:output}}
If you specify {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-progress}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}progress}}}}}, the output is a header row, plus status output
at intervals.  Each row in the status output lists the current date and time,
how many seconds \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} has been running, and how many rows it has
archived.

If you specify {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-statistics}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}statistics}}}}}, \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} outputs timing and other
information to help you identify which part of your archiving process takes the
most time.


\section{ERROR\sphinxhyphen{}HANDLING}
\label{\detokenize{mariadb-archiver:error-handling}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} tries to catch signals and exit gracefully; for example, if you
send it SIGTERM (Ctrl\sphinxhyphen{}C on UNIX\sphinxhyphen{}ish systems), it will catch the signal, print a
message about the signal, and exit fairly normally.  It will not execute
{\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-analyze}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}analyze}}}}} or {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-optimize}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}optimize}}}}}, because these may take a long time to finish.
It will run all other code normally, including calling after\_finish() on any
plugins (see “EXTENDING”).

In other words, a signal, if caught, will break out of the main archiving
loop and skip optimize/analyze.


\section{OPTIONS}
\label{\detokenize{mariadb-archiver:options}}
Specify at least one of {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-dest}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dest}}}}}, {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-file}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}file}}}}}, or {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-purge}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}purge}}}}}.

{\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-ignore}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}ignore}}}}} and {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-replace}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}replace}}}}} are mutually exclusive.

{\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-txn-size}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}txn\sphinxhyphen{}size}}}}} and {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-commit-each}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}commit\sphinxhyphen{}each}}}}} are mutually exclusive.

{\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-low-priority-insert}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}low\sphinxhyphen{}priority\sphinxhyphen{}insert}}}}} and {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-delayed-insert}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}delayed\sphinxhyphen{}insert}}}}} are mutually exclusive.

{\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-share-lock}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}share\sphinxhyphen{}lock}}}}} and {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-for-update}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}for\sphinxhyphen{}update}}}}} are mutually exclusive.

{\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-analyze}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}analyze}}}}} and {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-optimize}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}optimize}}}}} are mutually exclusive.

{\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-no-ascend}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}ascend}}}}} and {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-no-delete}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}delete}}}}} are mutually exclusive.

DSN values in {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-dest}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dest}}}}} default to values from {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-source}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}source}}}}} if COPY is yes.
\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}analyze@\spxentry{\sphinxhyphen{}\sphinxhyphen{}analyze}}\index{\sphinxhyphen{}\sphinxhyphen{}analyze@\spxentry{\sphinxhyphen{}\sphinxhyphen{}analyze}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-analyze}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}analyze}}\sphinxcode{\sphinxupquote{}}}
type: string

Run ANALYZE TABLE afterwards on {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-source}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}source}}}}} and/or {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-dest}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dest}}}}}.

Runs ANALYZE TABLE after finishing.  The argument is an arbitrary string.  If it
contains the letter ‘s’, the source will be analyzed.  If it contains ‘d’, the
destination will be analyzed.  You can specify either or both.  For example, the
following will analyze both:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZhy{}\PYGZhy{}analyze\PYG{o}{=}ds
\end{sphinxVerbatim}

See \sphinxurl{https://mariadb.com/kb/en/library/analyze-table/} for details on ANALYZE
TABLE.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}ascend\sphinxhyphen{}first@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ascend\sphinxhyphen{}first}}\index{\sphinxhyphen{}\sphinxhyphen{}ascend\sphinxhyphen{}first@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ascend\sphinxhyphen{}first}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-ascend-first}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}ascend\sphinxhyphen{}first}}\sphinxcode{\sphinxupquote{}}}
Ascend only first column of index.

If you do want to use the ascending index optimization (see {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-no-ascend}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}ascend}}}}}),
but do not want to incur the overhead of ascending a large multi\sphinxhyphen{}column index,
you can use this option to tell \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} to ascend only the leftmost column
of the index.  This can provide a significant performance boost over not
ascending the index at all, while avoiding the cost of ascending the whole
index.

See “EXTENDING” for a discussion of how this interacts with plugins.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass}}\index{\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-ask-pass}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass}}\sphinxcode{\sphinxupquote{}}}
Prompt for a password when connecting to MariaDB.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}buffer@\spxentry{\sphinxhyphen{}\sphinxhyphen{}buffer}}\index{\sphinxhyphen{}\sphinxhyphen{}buffer@\spxentry{\sphinxhyphen{}\sphinxhyphen{}buffer}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-buffer}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}buffer}}\sphinxcode{\sphinxupquote{}}}
Buffer output to {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-file}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}file}}}}} and flush at commit.

Disables autoflushing to {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-file}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}file}}}}} and flushes {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-file}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}file}}}}} to disk only when a
transaction commits.  This typically means the file is block\sphinxhyphen{}flushed by the
operating system, so there may be some implicit flushes to disk between
commits as well.  The default is to flush {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-file}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}file}}}}} to disk after every row.

The danger is that a crash might cause lost data.

The performance increase I have seen from using {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-buffer}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}buffer}}}}} is around 5 to 15
percent.  Your mileage may vary.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}bulk\sphinxhyphen{}delete@\spxentry{\sphinxhyphen{}\sphinxhyphen{}bulk\sphinxhyphen{}delete}}\index{\sphinxhyphen{}\sphinxhyphen{}bulk\sphinxhyphen{}delete@\spxentry{\sphinxhyphen{}\sphinxhyphen{}bulk\sphinxhyphen{}delete}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-bulk-delete}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}bulk\sphinxhyphen{}delete}}\sphinxcode{\sphinxupquote{}}}
Delete each chunk with a single statement (implies {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-commit-each}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}commit\sphinxhyphen{}each}}}}}).

Delete each chunk of rows in bulk with a single \sphinxcode{\sphinxupquote{DELETE}} statement.  The
statement deletes every row between the first and last row of the chunk,
inclusive.  It implies {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-commit-each}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}commit\sphinxhyphen{}each}}}}}, since it would be a bad idea to
\sphinxcode{\sphinxupquote{INSERT}} rows one at a time and commit them before the bulk \sphinxcode{\sphinxupquote{DELETE}}.

The normal method is to delete every row by its primary key.  Bulk deletes might
be a lot faster.  \sphinxstylestrong{They also might not be faster} if you have a complex
\sphinxcode{\sphinxupquote{WHERE}} clause.

This option completely defers all \sphinxcode{\sphinxupquote{DELETE}} processing until the chunk of rows
is finished.  If you have a plugin on the source, its \sphinxcode{\sphinxupquote{before\_delete}} method
will not be called.  Instead, its \sphinxcode{\sphinxupquote{before\_bulk\_delete}} method is called later.

\sphinxstylestrong{WARNING}: if you have a plugin on the source that sometimes doesn’t return
true from \sphinxcode{\sphinxupquote{is\_archivable()}}, you should use this option only if you understand
what it does.  If the plugin instructs \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} not to archive a row,
it will still be deleted by the bulk delete!

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}{[}no{]}bulk\sphinxhyphen{}delete\sphinxhyphen{}limit@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}bulk\sphinxhyphen{}delete\sphinxhyphen{}limit}}\index{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}bulk\sphinxhyphen{}delete\sphinxhyphen{}limit@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}bulk\sphinxhyphen{}delete\sphinxhyphen{}limit}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-0}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}}}\sphinxcode{\sphinxupquote{{[}no{]}bulk\sphinxhyphen{}delete\sphinxhyphen{}limit}}}
default: yes

Add {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-limit}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}limit}}}}} to {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-bulk-delete}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}bulk\sphinxhyphen{}delete}}}}} statement.

This is an advanced option and you should not disable it unless you know what
you are doing and why!  By default, {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-bulk-delete}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}bulk\sphinxhyphen{}delete}}}}} appends a {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-limit}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}limit}}}}}
clause to the bulk delete SQL statement.  In certain cases, this clause can be
omitted by specifying \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}bulk\sphinxhyphen{}delete\sphinxhyphen{}limit}}.  {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-limit}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}limit}}}}} must still be
specified.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}bulk\sphinxhyphen{}insert@\spxentry{\sphinxhyphen{}\sphinxhyphen{}bulk\sphinxhyphen{}insert}}\index{\sphinxhyphen{}\sphinxhyphen{}bulk\sphinxhyphen{}insert@\spxentry{\sphinxhyphen{}\sphinxhyphen{}bulk\sphinxhyphen{}insert}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-bulk-insert}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}bulk\sphinxhyphen{}insert}}\sphinxcode{\sphinxupquote{}}}
Insert each chunk with LOAD DATA INFILE (implies {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-bulk-delete}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}bulk\sphinxhyphen{}delete}}}}} {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-commit-each}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}commit\sphinxhyphen{}each}}}}}).

Insert each chunk of rows with \sphinxcode{\sphinxupquote{LOAD DATA LOCAL INFILE}}.  This may be much
faster than inserting a row at a time with \sphinxcode{\sphinxupquote{INSERT}} statements.  It is
implemented by creating a temporary file for each chunk of rows, and writing the
rows to this file instead of inserting them.  When the chunk is finished, it
uploads the rows.

To protect the safety of your data, this option forces bulk deletes to be used.
It would be unsafe to delete each row as it is found, before inserting the rows
into the destination first.  Forcing bulk deletes guarantees that the deletion
waits until the insertion is successful.

The {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-low-priority-insert}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}low\sphinxhyphen{}priority\sphinxhyphen{}insert}}}}}, {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-replace}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}replace}}}}}, and {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-ignore}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}ignore}}}}} options work
with this option, but {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-delayed-insert}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}delayed\sphinxhyphen{}insert}}}}} does not.

If \sphinxcode{\sphinxupquote{LOAD DATA LOCAL INFILE}} throws an error in the lines of \sphinxcode{\sphinxupquote{The used
command is not allowed with this MariaDB version}}, refer to the documentation
for the \sphinxcode{\sphinxupquote{L}} DSN option.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}channel@\spxentry{\sphinxhyphen{}\sphinxhyphen{}channel}}\index{\sphinxhyphen{}\sphinxhyphen{}channel@\spxentry{\sphinxhyphen{}\sphinxhyphen{}channel}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-channel}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}channel}}\sphinxcode{\sphinxupquote{}}}
type: string

Channel name used when connected to a server using replication channels.
Suppose you have two masters, master\_a at port 12345, master\_b at port 1236 and
a slave connected to both masters using channels chan\_master\_a and chan\_master\_b.
If you want to run \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} to syncronize the slave against master\_a, \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}}
won’t be able to determine what’s the correct master since SHOW SLAVE STATUS
will return 2 rows. In this case, you can use \textendash{}channel=chan\_master\_a to specify
the channel name to use in the SHOW SLAVE STATUS command.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}charset@\spxentry{\sphinxhyphen{}\sphinxhyphen{}charset}}\index{\sphinxhyphen{}\sphinxhyphen{}charset@\spxentry{\sphinxhyphen{}\sphinxhyphen{}charset}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-charset}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}charset}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}A; type: string

Default character set.  If the value is utf8, sets Perl’s binmode on
STDOUT to utf8, passes the mysql\_enable\_utf8 option to DBD::mysql, and runs SET
NAMES UTF8 after connecting to MariaDB.  Any other value sets binmode on STDOUT
without the utf8 layer, and runs SET NAMES after connecting to MariaDB.

Note that only charsets as known by MariaDB are recognized; So for example,
“UTF8” will work, but “UTF\sphinxhyphen{}8” will not.

See also \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}check\sphinxhyphen{}charset}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}{[}no{]}check\sphinxhyphen{}charset@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}check\sphinxhyphen{}charset}}\index{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}check\sphinxhyphen{}charset@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}check\sphinxhyphen{}charset}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-1}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}}}\sphinxcode{\sphinxupquote{{[}no{]}check\sphinxhyphen{}charset}}}
default: yes

Ensure connection and table character sets are the same.  Disabling this check
may cause text to be erroneously converted from one character set to another
(usually from utf8 to latin1) which may cause data loss or mojibake.  Disabling
this check may be useful or necessary when character set conversions are
intended.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}{[}no{]}check\sphinxhyphen{}columns@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}check\sphinxhyphen{}columns}}\index{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}check\sphinxhyphen{}columns@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}check\sphinxhyphen{}columns}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-2}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}}}\sphinxcode{\sphinxupquote{{[}no{]}check\sphinxhyphen{}columns}}}
default: yes

Ensure {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-source}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}source}}}}} and {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-dest}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dest}}}}} have same columns.

Enabled by default; causes \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} to check that the source and destination
tables have the same columns.  It does not check column order, data type, etc.
It just checks that all columns in the source exist in the destination and
vice versa.  If there are any differences, \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} will exit with an
error.

To disable this check, specify \textendash{}no\sphinxhyphen{}check\sphinxhyphen{}columns.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}check\sphinxhyphen{}interval@\spxentry{\sphinxhyphen{}\sphinxhyphen{}check\sphinxhyphen{}interval}}\index{\sphinxhyphen{}\sphinxhyphen{}check\sphinxhyphen{}interval@\spxentry{\sphinxhyphen{}\sphinxhyphen{}check\sphinxhyphen{}interval}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-check-interval}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}check\sphinxhyphen{}interval}}\sphinxcode{\sphinxupquote{}}}
type: time; default: 1s
\begin{description}
\item[{If {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-check-slave-lag}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}check\sphinxhyphen{}slave\sphinxhyphen{}lag}}}}} is given, this defines how long the tool pauses each}] \leavevmode
time it discovers that a slave is lagging.
This check is performed every 100 rows.

\end{description}

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}check\sphinxhyphen{}slave\sphinxhyphen{}lag@\spxentry{\sphinxhyphen{}\sphinxhyphen{}check\sphinxhyphen{}slave\sphinxhyphen{}lag}}\index{\sphinxhyphen{}\sphinxhyphen{}check\sphinxhyphen{}slave\sphinxhyphen{}lag@\spxentry{\sphinxhyphen{}\sphinxhyphen{}check\sphinxhyphen{}slave\sphinxhyphen{}lag}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-check-slave-lag}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}check\sphinxhyphen{}slave\sphinxhyphen{}lag}}\sphinxcode{\sphinxupquote{}}}
type: string; repeatable: yes

Pause archiving until the specified DSN’s slave lag is less than {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-max-lag}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}lag}}}}}.
This option can be specified multiple times for checking more than one slave.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}columns@\spxentry{\sphinxhyphen{}\sphinxhyphen{}columns}}\index{\sphinxhyphen{}\sphinxhyphen{}columns@\spxentry{\sphinxhyphen{}\sphinxhyphen{}columns}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-columns}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}columns}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}c; type: array

Comma\sphinxhyphen{}separated list of columns to archive.

Specify a comma\sphinxhyphen{}separated list of columns to fetch, write to the file, and
insert into the destination table.  If specified, \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} ignores other
columns unless it needs to add them to the \sphinxcode{\sphinxupquote{SELECT}} statement for ascending an
index or deleting rows.  It fetches and uses these extra columns internally, but
does not write them to the file or to the destination table.  It \sphinxstyleemphasis{does} pass
them to plugins.

See also {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-primary-key-only}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}primary\sphinxhyphen{}key\sphinxhyphen{}only}}}}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}commit\sphinxhyphen{}each@\spxentry{\sphinxhyphen{}\sphinxhyphen{}commit\sphinxhyphen{}each}}\index{\sphinxhyphen{}\sphinxhyphen{}commit\sphinxhyphen{}each@\spxentry{\sphinxhyphen{}\sphinxhyphen{}commit\sphinxhyphen{}each}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-commit-each}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}commit\sphinxhyphen{}each}}\sphinxcode{\sphinxupquote{}}}
Commit each set of fetched and archived rows (disables {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-txn-size}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}txn\sphinxhyphen{}size}}}}}).

Commits transactions and flushes {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-file}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}file}}}}} after each set of rows has been
archived, before fetching the next set of rows, and before sleeping if
{\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-sleep}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}sleep}}}}} is specified.  Disables {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-txn-size}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}txn\sphinxhyphen{}size}}}}}; use {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-limit}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}limit}}}}} to
control the transaction size with {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-commit-each}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}commit\sphinxhyphen{}each}}}}}.

This option is useful as a shortcut to make {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-limit}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}limit}}}}} and {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-txn-size}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}txn\sphinxhyphen{}size}}}}} the
same value, but more importantly it avoids transactions being held open while
searching for more rows.  For example, imagine you are archiving old rows from
the beginning of a very large table, with {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-limit}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}limit}}}}} 1000 and {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-txn-size}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}txn\sphinxhyphen{}size}}}}}
1000.  After some period of finding and archiving 1000 rows at a time,
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} finds the last 999 rows and archives them, then executes the next
SELECT to find more rows.  This scans the rest of the table, but never finds any
more rows.  It has held open a transaction for a very long time, only to
determine it is finished anyway.  You can use {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-commit-each}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}commit\sphinxhyphen{}each}}}}} to avoid this.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}config@\spxentry{\sphinxhyphen{}\sphinxhyphen{}config}}\index{\sphinxhyphen{}\sphinxhyphen{}config@\spxentry{\sphinxhyphen{}\sphinxhyphen{}config}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-config}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}config}}\sphinxcode{\sphinxupquote{}}}
type: Array

Read this comma\sphinxhyphen{}separated list of config files; if specified, this must be the
first option on the command line.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}database@\spxentry{\sphinxhyphen{}\sphinxhyphen{}database}}\index{\sphinxhyphen{}\sphinxhyphen{}database@\spxentry{\sphinxhyphen{}\sphinxhyphen{}database}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-database}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}database}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}D; type: string

Connect to this database.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}delayed\sphinxhyphen{}insert@\spxentry{\sphinxhyphen{}\sphinxhyphen{}delayed\sphinxhyphen{}insert}}\index{\sphinxhyphen{}\sphinxhyphen{}delayed\sphinxhyphen{}insert@\spxentry{\sphinxhyphen{}\sphinxhyphen{}delayed\sphinxhyphen{}insert}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-delayed-insert}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}delayed\sphinxhyphen{}insert}}\sphinxcode{\sphinxupquote{}}}
Add the DELAYED modifier to INSERT statements.

Adds the DELAYED modifier to INSERT or REPLACE statements.  See
\sphinxurl{https://mariadb.com/kb/en/library/insert/} for details.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}dest@\spxentry{\sphinxhyphen{}\sphinxhyphen{}dest}}\index{\sphinxhyphen{}\sphinxhyphen{}dest@\spxentry{\sphinxhyphen{}\sphinxhyphen{}dest}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-dest}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dest}}\sphinxcode{\sphinxupquote{}}}
type: DSN

DSN specifying the table to archive to.

This item specifies a table into which \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} will insert rows
archived from {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-source}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}source}}}}}.  It uses the same key=val argument format as
{\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-source}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}source}}}}}.  Most missing values default to the same values as
{\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-source}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}source}}}}}, so you don’t have to repeat options that are the same in
{\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-source}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}source}}}}} and {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-dest}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dest}}}}}.  Use the {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-help}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}help}}}}} option to see which values
are copied from {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-source}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}source}}}}}.

\sphinxstylestrong{WARNING}: Using a default options file (F) DSN option that defines a
socket for {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-source}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}source}}}}} causes \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} to connect to {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-dest}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dest}}}}} using
that socket unless another socket for {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-dest}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dest}}}}} is specified.  This
means that \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} may incorrectly connect to {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-source}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}source}}}}} when it
connects to {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-dest}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dest}}}}}.  For example:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZhy{}\PYGZhy{}source \PYG{n+nv}{F}\PYG{o}{=}host1.cnf,D\PYG{o}{=}db,t\PYG{o}{=}tbl \PYGZhy{}\PYGZhy{}dest \PYG{n+nv}{h}\PYG{o}{=}host2
\end{sphinxVerbatim}

When \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} connects to {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-dest}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dest}}}}}, host2, it will connect via the
{\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-source}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}source}}}}}, host1, socket defined in host1.cnf.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}dry\sphinxhyphen{}run@\spxentry{\sphinxhyphen{}\sphinxhyphen{}dry\sphinxhyphen{}run}}\index{\sphinxhyphen{}\sphinxhyphen{}dry\sphinxhyphen{}run@\spxentry{\sphinxhyphen{}\sphinxhyphen{}dry\sphinxhyphen{}run}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-dry-run}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dry\sphinxhyphen{}run}}\sphinxcode{\sphinxupquote{}}}
Print queries and exit without doing anything.

Causes \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} to exit after printing the filename and SQL statements
it will use.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}file@\spxentry{\sphinxhyphen{}\sphinxhyphen{}file}}\index{\sphinxhyphen{}\sphinxhyphen{}file@\spxentry{\sphinxhyphen{}\sphinxhyphen{}file}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-file}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}file}}\sphinxcode{\sphinxupquote{}}}
type: string

File to archive to, with DATE\_FORMAT()\sphinxhyphen{}like formatting.

Filename to write archived rows to.  A subset of MariaDB’s DATE\_FORMAT()
formatting codes are allowed in the filename, as follows:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZpc{}d    Day of the month, numeric \PYG{o}{(}\PYG{l+m}{01}..31\PYG{o}{)}
\PYGZpc{}H    Hour \PYG{o}{(}\PYG{l+m}{00}..23\PYG{o}{)}
\PYGZpc{}i    Minutes, numeric \PYG{o}{(}\PYG{l+m}{00}..59\PYG{o}{)}
\PYGZpc{}m    Month, numeric \PYG{o}{(}\PYG{l+m}{01}..12\PYG{o}{)}
\PYGZpc{}s    Seconds \PYG{o}{(}\PYG{l+m}{00}..59\PYG{o}{)}
\PYGZpc{}Y    Year, numeric, four digits
\end{sphinxVerbatim}

You can use the following extra format codes too:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZpc{}D    Database name
\PYGZpc{}t    Table name
\end{sphinxVerbatim}

Example:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZhy{}\PYGZhy{}file \PYG{l+s+s1}{\PYGZsq{}/var/log/archive/\PYGZpc{}Y\PYGZhy{}\PYGZpc{}m\PYGZhy{}\PYGZpc{}d\PYGZhy{}\PYGZpc{}D.\PYGZpc{}t\PYGZsq{}}
\end{sphinxVerbatim}

The file’s contents are in the same format used by SELECT INTO OUTFILE, as
documented in the MariaDB manual: rows terminated by newlines, columns
terminated by tabs, NULL characters are represented by N, and special
characters are escaped by .  This lets you reload a file with LOAD DATA
INFILE’s default settings.

If you want a column header at the top of the file, see {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-header}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}header}}}}}.  The file
is auto\sphinxhyphen{}flushed by default; see {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-buffer}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}buffer}}}}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}for\sphinxhyphen{}update@\spxentry{\sphinxhyphen{}\sphinxhyphen{}for\sphinxhyphen{}update}}\index{\sphinxhyphen{}\sphinxhyphen{}for\sphinxhyphen{}update@\spxentry{\sphinxhyphen{}\sphinxhyphen{}for\sphinxhyphen{}update}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-for-update}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}for\sphinxhyphen{}update}}\sphinxcode{\sphinxupquote{}}}
Adds the FOR UPDATE modifier to SELECT statements.

For details, see \sphinxurl{http://dev.mysql.com/doc/en/innodb-locking-reads.html}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}header@\spxentry{\sphinxhyphen{}\sphinxhyphen{}header}}\index{\sphinxhyphen{}\sphinxhyphen{}header@\spxentry{\sphinxhyphen{}\sphinxhyphen{}header}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-header}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}header}}\sphinxcode{\sphinxupquote{}}}
Print column header at top of {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-file}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}file}}}}}.

Writes column names as the first line in the file given by {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-file}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}file}}}}}.  If the
file exists, does not write headers; this keeps the file loadable with LOAD
DATA INFILE in case you append more output to it.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}help@\spxentry{\sphinxhyphen{}\sphinxhyphen{}help}}\index{\sphinxhyphen{}\sphinxhyphen{}help@\spxentry{\sphinxhyphen{}\sphinxhyphen{}help}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-help}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}help}}\sphinxcode{\sphinxupquote{}}}
Show help and exit.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}high\sphinxhyphen{}priority\sphinxhyphen{}select@\spxentry{\sphinxhyphen{}\sphinxhyphen{}high\sphinxhyphen{}priority\sphinxhyphen{}select}}\index{\sphinxhyphen{}\sphinxhyphen{}high\sphinxhyphen{}priority\sphinxhyphen{}select@\spxentry{\sphinxhyphen{}\sphinxhyphen{}high\sphinxhyphen{}priority\sphinxhyphen{}select}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-high-priority-select}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}high\sphinxhyphen{}priority\sphinxhyphen{}select}}\sphinxcode{\sphinxupquote{}}}
Adds the HIGH\_PRIORITY modifier to SELECT statements.

See \sphinxurl{https://mariadb.com/kb/en/library/select/} for details.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}host@\spxentry{\sphinxhyphen{}\sphinxhyphen{}host}}\index{\sphinxhyphen{}\sphinxhyphen{}host@\spxentry{\sphinxhyphen{}\sphinxhyphen{}host}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-host}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}host}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}h; type: string

Connect to host.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}ignore@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ignore}}\index{\sphinxhyphen{}\sphinxhyphen{}ignore@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ignore}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-ignore}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}ignore}}\sphinxcode{\sphinxupquote{}}}
Use IGNORE for INSERT statements.

Causes INSERTs into {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-dest}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dest}}}}} to be INSERT IGNORE.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}limit@\spxentry{\sphinxhyphen{}\sphinxhyphen{}limit}}\index{\sphinxhyphen{}\sphinxhyphen{}limit@\spxentry{\sphinxhyphen{}\sphinxhyphen{}limit}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-limit}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}limit}}\sphinxcode{\sphinxupquote{}}}
type: int; default: 1

Number of rows to fetch and archive per statement.

Limits the number of rows returned by the SELECT statements that retrieve rows
to archive.  Default is one row.  It may be more efficient to increase the
limit, but be careful if you are archiving sparsely, skipping over many rows;
this can potentially cause more contention with other queries, depending on the
storage engine, transaction isolation level, and options such as
{\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-for-update}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}for\sphinxhyphen{}update}}}}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}local@\spxentry{\sphinxhyphen{}\sphinxhyphen{}local}}\index{\sphinxhyphen{}\sphinxhyphen{}local@\spxentry{\sphinxhyphen{}\sphinxhyphen{}local}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-local}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}local}}\sphinxcode{\sphinxupquote{}}}
Do not write OPTIMIZE or ANALYZE queries to binlog.

Adds the NO\_WRITE\_TO\_BINLOG modifier to ANALYZE and OPTIMIZE queries.  See
{\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-analyze}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}analyze}}}}} for details.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}low\sphinxhyphen{}priority\sphinxhyphen{}delete@\spxentry{\sphinxhyphen{}\sphinxhyphen{}low\sphinxhyphen{}priority\sphinxhyphen{}delete}}\index{\sphinxhyphen{}\sphinxhyphen{}low\sphinxhyphen{}priority\sphinxhyphen{}delete@\spxentry{\sphinxhyphen{}\sphinxhyphen{}low\sphinxhyphen{}priority\sphinxhyphen{}delete}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-low-priority-delete}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}low\sphinxhyphen{}priority\sphinxhyphen{}delete}}\sphinxcode{\sphinxupquote{}}}
Adds the LOW\_PRIORITY modifier to DELETE statements.

See \sphinxurl{https://mariadb.com/kb/en/library/delete/} for details.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}low\sphinxhyphen{}priority\sphinxhyphen{}insert@\spxentry{\sphinxhyphen{}\sphinxhyphen{}low\sphinxhyphen{}priority\sphinxhyphen{}insert}}\index{\sphinxhyphen{}\sphinxhyphen{}low\sphinxhyphen{}priority\sphinxhyphen{}insert@\spxentry{\sphinxhyphen{}\sphinxhyphen{}low\sphinxhyphen{}priority\sphinxhyphen{}insert}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-low-priority-insert}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}low\sphinxhyphen{}priority\sphinxhyphen{}insert}}\sphinxcode{\sphinxupquote{}}}
Adds the LOW\_PRIORITY modifier to INSERT or REPLACE statements.

See \sphinxurl{https://mariadb.com/kb/en/library/insert/} for details.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}flow\sphinxhyphen{}ctl@\spxentry{\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}flow\sphinxhyphen{}ctl}}\index{\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}flow\sphinxhyphen{}ctl@\spxentry{\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}flow\sphinxhyphen{}ctl}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-max-flow-ctl}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}flow\sphinxhyphen{}ctl}}\sphinxcode{\sphinxupquote{}}}
type: float

Somewhat similar to \textendash{}max\sphinxhyphen{}lag but for Galera clusters.
Check average time cluster spent pausing for Flow Control and make tool pause if
it goes over the percentage indicated in the option.
Default is no Flow Control checking.
This option is available for Galera versions 5.6 or higher.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}lag@\spxentry{\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}lag}}\index{\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}lag@\spxentry{\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}lag}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-max-lag}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}lag}}\sphinxcode{\sphinxupquote{}}}
type: time; default: 1s

Pause archiving if the slave given by {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-check-slave-lag}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}check\sphinxhyphen{}slave\sphinxhyphen{}lag}}}}} lags.

This option causes \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} to look at the slave every time it’s about
to fetch another row.  If the slave’s lag is greater than the option’s value,
or if the slave isn’t running (so its lag is NULL), pt\sphinxhyphen{}table\sphinxhyphen{}checksum sleeps
for {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-check-interval}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}check\sphinxhyphen{}interval}}}}} seconds and then looks at the lag again.  It repeats
until the slave is caught up, then proceeds to fetch and archive the row.

This option may eliminate the need for {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-sleep}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}sleep}}}}} or {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-sleep-coef}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}sleep\sphinxhyphen{}coef}}}}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}ascend@\spxentry{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}ascend}}\index{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}ascend@\spxentry{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}ascend}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-no-ascend}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}ascend}}\sphinxcode{\sphinxupquote{}}}
Do not use ascending index optimization.

The default ascending\sphinxhyphen{}index optimization causes \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} to optimize
repeated \sphinxcode{\sphinxupquote{SELECT}} queries so they seek into the index where the previous query
ended, then scan along it, rather than scanning from the beginning of the table
every time.  This is enabled by default because it is generally a good strategy
for repeated accesses.

Large, multiple\sphinxhyphen{}column indexes may cause the WHERE clause to be complex enough
that this could actually be less efficient.  Consider for example a four\sphinxhyphen{}column
PRIMARY KEY on (a, b, c, d).  The WHERE clause to start where the last query
ended is as follows:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
WHERE \PYG{o}{(}a \PYGZgt{} ?\PYG{o}{)}
   OR \PYG{o}{(}\PYG{n+nv}{a} \PYG{o}{=} ? AND b \PYGZgt{} ?\PYG{o}{)}
   OR \PYG{o}{(}\PYG{n+nv}{a} \PYG{o}{=} ? AND \PYG{n+nv}{b} \PYG{o}{=} ? AND c \PYGZgt{} ?\PYG{o}{)}
   OR \PYG{o}{(}\PYG{n+nv}{a} \PYG{o}{=} ? AND \PYG{n+nv}{b} \PYG{o}{=} ? AND \PYG{n+nv}{c} \PYG{o}{=} ? AND d \PYGZgt{}\PYG{o}{=} ?\PYG{o}{)}
\end{sphinxVerbatim}

Populating the placeholders with values uses memory and CPU, adds network
traffic and parsing overhead, and may make the query harder for MariaDB to
optimize.  A four\sphinxhyphen{}column key isn’t a big deal, but a ten\sphinxhyphen{}column key in which
every column allows \sphinxcode{\sphinxupquote{NULL}} might be.

Ascending the index might not be necessary if you know you are simply removing
rows from the beginning of the table in chunks, but not leaving any holes, so
starting at the beginning of the table is actually the most efficient thing to
do.

See also {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-ascend-first}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}ascend\sphinxhyphen{}first}}}}}.  See “EXTENDING” for a discussion of how this
interacts with plugins.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}delete@\spxentry{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}delete}}\index{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}delete@\spxentry{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}delete}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-no-delete}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}delete}}\sphinxcode{\sphinxupquote{}}}
Do not delete archived rows.

Causes \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} not to delete rows after processing them.  This disallows
{\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-no-ascend}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}ascend}}}}}, because enabling them both would cause an infinite loop.

If there is a plugin on the source DSN, its \sphinxcode{\sphinxupquote{before\_delete}} method is called
anyway, even though \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} will not execute the delete.  See
“EXTENDING” for more on plugins.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}optimize@\spxentry{\sphinxhyphen{}\sphinxhyphen{}optimize}}\index{\sphinxhyphen{}\sphinxhyphen{}optimize@\spxentry{\sphinxhyphen{}\sphinxhyphen{}optimize}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-optimize}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}optimize}}\sphinxcode{\sphinxupquote{}}}
type: string

Run OPTIMIZE TABLE afterwards on {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-source}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}source}}}}} and/or {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-dest}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dest}}}}}.

Runs OPTIMIZE TABLE after finishing.  See {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-analyze}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}analyze}}}}} for the option syntax
and \sphinxurl{https://mariadb.com/kb/en/library/optimize-table/} for details on OPTIMIZE
TABLE.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}output\sphinxhyphen{}format@\spxentry{\sphinxhyphen{}\sphinxhyphen{}output\sphinxhyphen{}format}}\index{\sphinxhyphen{}\sphinxhyphen{}output\sphinxhyphen{}format@\spxentry{\sphinxhyphen{}\sphinxhyphen{}output\sphinxhyphen{}format}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-output-format}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}output\sphinxhyphen{}format}}\sphinxcode{\sphinxupquote{}}}
type: string

Used with {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-file}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}file}}}}} to specify the output format.
\begin{description}
\item[{Valid formats are:}] \leavevmode
dump: MariaDB dump format using tabs as field separator (default)
csv : Dump rows using ‘,’ as separator and optionally enclosing fields by ‘”’.
\begin{quote}

This format is equivalent to FIELDS TERMINATED BY ‘,’ OPTIONALLY ENCLOSED BY ‘”’.
\end{quote}

\end{description}

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}password@\spxentry{\sphinxhyphen{}\sphinxhyphen{}password}}\index{\sphinxhyphen{}\sphinxhyphen{}password@\spxentry{\sphinxhyphen{}\sphinxhyphen{}password}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-password}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}password}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}p; type: string

Password to use when connecting.
If password contains commas they must be escaped with a backslash: “exam,ple”

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}pid@\spxentry{\sphinxhyphen{}\sphinxhyphen{}pid}}\index{\sphinxhyphen{}\sphinxhyphen{}pid@\spxentry{\sphinxhyphen{}\sphinxhyphen{}pid}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-pid}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}pid}}\sphinxcode{\sphinxupquote{}}}
type: string

Create the given PID file.  The tool won’t start if the PID file already
exists and the PID it contains is different than the current PID.  However,
if the PID file exists and the PID it contains is no longer running, the
tool will overwrite the PID file with the current PID.  The PID file is
removed automatically when the tool exits.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}plugin@\spxentry{\sphinxhyphen{}\sphinxhyphen{}plugin}}\index{\sphinxhyphen{}\sphinxhyphen{}plugin@\spxentry{\sphinxhyphen{}\sphinxhyphen{}plugin}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-plugin}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}plugin}}\sphinxcode{\sphinxupquote{}}}
type: string

Perl module name to use as a generic plugin.

Specify the Perl module name of a general\sphinxhyphen{}purpose plugin.  It is currently used
only for statistics (see {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-statistics}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}statistics}}}}}) and must have \sphinxcode{\sphinxupquote{new()}} and a
\sphinxcode{\sphinxupquote{statistics()}} method.

The \sphinxcode{\sphinxupquote{new( src =}} \$src, dst =\textgreater{} \$dst, opts =\textgreater{} \$o )\textgreater{} method gets the source
and destination DSNs, and their database connections, just like the
connection\sphinxhyphen{}specific plugins do.  It also gets an OptionParser object (\sphinxcode{\sphinxupquote{\$o}}) for
accessing command\sphinxhyphen{}line options (example: {\color{red}\bfseries{}\textasciigrave{}\textasciigrave{}}\$o\sphinxhyphen{}{\color{red}\bfseries{}\textasciigrave{}\textasciigrave{}}get(‘purge’);\textgreater{}).

The \sphinxcode{\sphinxupquote{statistics(\textbackslash{}\%stats, \$time)}} method gets a hashref of the statistics
collected by the archiving job, and the time the whole job started.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}port@\spxentry{\sphinxhyphen{}\sphinxhyphen{}port}}\index{\sphinxhyphen{}\sphinxhyphen{}port@\spxentry{\sphinxhyphen{}\sphinxhyphen{}port}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-port}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}port}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}P; type: int

Port number to use for connection.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}primary\sphinxhyphen{}key\sphinxhyphen{}only@\spxentry{\sphinxhyphen{}\sphinxhyphen{}primary\sphinxhyphen{}key\sphinxhyphen{}only}}\index{\sphinxhyphen{}\sphinxhyphen{}primary\sphinxhyphen{}key\sphinxhyphen{}only@\spxentry{\sphinxhyphen{}\sphinxhyphen{}primary\sphinxhyphen{}key\sphinxhyphen{}only}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-primary-key-only}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}primary\sphinxhyphen{}key\sphinxhyphen{}only}}\sphinxcode{\sphinxupquote{}}}
Primary key columns only.

A shortcut for specifying {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-columns}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}columns}}}}} with the primary key columns.  This is
an efficiency if you just want to purge rows; it avoids fetching the entire row,
when only the primary key columns are needed for \sphinxcode{\sphinxupquote{DELETE}} statements.  See also
{\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-purge}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}purge}}}}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}progress@\spxentry{\sphinxhyphen{}\sphinxhyphen{}progress}}\index{\sphinxhyphen{}\sphinxhyphen{}progress@\spxentry{\sphinxhyphen{}\sphinxhyphen{}progress}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-progress}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}progress}}\sphinxcode{\sphinxupquote{}}}
type: int

Print progress information every X rows.

Prints current time, elapsed time, and rows archived every X rows.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}purge@\spxentry{\sphinxhyphen{}\sphinxhyphen{}purge}}\index{\sphinxhyphen{}\sphinxhyphen{}purge@\spxentry{\sphinxhyphen{}\sphinxhyphen{}purge}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-purge}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}purge}}\sphinxcode{\sphinxupquote{}}}
Purge instead of archiving; allows omitting {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-file}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}file}}}}} and {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-dest}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dest}}}}}.

Allows archiving without a {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-file}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}file}}}}} or {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-dest}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dest}}}}} argument, which is
effectively a purge since the rows are just deleted.

If you just want to purge rows, consider specifying the table’s primary key
columns with {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-primary-key-only}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}primary\sphinxhyphen{}key\sphinxhyphen{}only}}}}}.  This will prevent fetching all columns
from the server for no reason.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}quick\sphinxhyphen{}delete@\spxentry{\sphinxhyphen{}\sphinxhyphen{}quick\sphinxhyphen{}delete}}\index{\sphinxhyphen{}\sphinxhyphen{}quick\sphinxhyphen{}delete@\spxentry{\sphinxhyphen{}\sphinxhyphen{}quick\sphinxhyphen{}delete}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-quick-delete}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}quick\sphinxhyphen{}delete}}\sphinxcode{\sphinxupquote{}}}
Adds the QUICK modifier to DELETE statements.

See \sphinxurl{https://mariadb.com/kb/en/library/delete/} for details.  As stated in the
documentation, in some cases it may be faster to use DELETE QUICK followed by
OPTIMIZE TABLE.  You can use {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-optimize}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}optimize}}}}} for this.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}quiet@\spxentry{\sphinxhyphen{}\sphinxhyphen{}quiet}}\index{\sphinxhyphen{}\sphinxhyphen{}quiet@\spxentry{\sphinxhyphen{}\sphinxhyphen{}quiet}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-quiet}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}quiet}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}q

Do not print any output, such as for {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-statistics}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}statistics}}}}}.

Suppresses normal output, including the output of {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-statistics}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}statistics}}}}}, but doesn’t
suppress the output from {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-why-quit}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}why\sphinxhyphen{}quit}}}}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}replace@\spxentry{\sphinxhyphen{}\sphinxhyphen{}replace}}\index{\sphinxhyphen{}\sphinxhyphen{}replace@\spxentry{\sphinxhyphen{}\sphinxhyphen{}replace}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-replace}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}replace}}\sphinxcode{\sphinxupquote{}}}
Causes INSERTs into {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-dest}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dest}}}}} to be written as REPLACE.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}retries@\spxentry{\sphinxhyphen{}\sphinxhyphen{}retries}}\index{\sphinxhyphen{}\sphinxhyphen{}retries@\spxentry{\sphinxhyphen{}\sphinxhyphen{}retries}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-retries}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}retries}}\sphinxcode{\sphinxupquote{}}}
type: int; default: 1

Number of retries per timeout or deadlock.

Specifies the number of times \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} should retry when there is an
InnoDB lock wait timeout or deadlock.  When retries are exhausted,
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} will exit with an error.

Consider carefully what you want to happen when you are archiving between a
mixture of transactional and non\sphinxhyphen{}transactional storage engines.  The INSERT to
{\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-dest}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dest}}}}} and DELETE from {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-source}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}source}}}}} are on separate connections, so they
do not actually participate in the same transaction even if they’re on the same
server.  However, \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} implements simple distributed transactions in
code, so commits and rollbacks should happen as desired across the two
connections.

At this time I have not written any code to handle errors with transactional
storage engines other than InnoDB.  Request that feature if you need it.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time@\spxentry{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time}}\index{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time@\spxentry{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-run-time}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time}}\sphinxcode{\sphinxupquote{}}}
type: time

Time to run before exiting.

Optional suffix s=seconds, m=minutes, h=hours, d=days; if no suffix, s is used.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}{[}no{]}safe\sphinxhyphen{}auto\sphinxhyphen{}increment@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}safe\sphinxhyphen{}auto\sphinxhyphen{}increment}}\index{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}safe\sphinxhyphen{}auto\sphinxhyphen{}increment@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}safe\sphinxhyphen{}auto\sphinxhyphen{}increment}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-3}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}}}\sphinxcode{\sphinxupquote{{[}no{]}safe\sphinxhyphen{}auto\sphinxhyphen{}increment}}}
default: yes

Do not archive row with max AUTO\_INCREMENT.

Adds an extra WHERE clause to prevent \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} from removing the newest
row when ascending a single\sphinxhyphen{}column AUTO\_INCREMENT key.  This guards against
re\sphinxhyphen{}using AUTO\_INCREMENT values if the server restarts, and is enabled by
default.

The extra WHERE clause contains the maximum value of the auto\sphinxhyphen{}increment column
as of the beginning of the archive or purge job.  If new rows are inserted while
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} is running, it will not see them.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}sentinel@\spxentry{\sphinxhyphen{}\sphinxhyphen{}sentinel}}\index{\sphinxhyphen{}\sphinxhyphen{}sentinel@\spxentry{\sphinxhyphen{}\sphinxhyphen{}sentinel}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-sentinel}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}sentinel}}\sphinxcode{\sphinxupquote{}}}
type: string; default: /tmp/mariadb\sphinxhyphen{}archiver\sphinxhyphen{}sentinel

Exit if this file exists.

The presence of the file specified by {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-sentinel}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}sentinel}}}}} will cause \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} to
stop archiving and exit.  The default is /tmp/mariadb\sphinxhyphen{}archiver\sphinxhyphen{}sentinel.  You
might find this handy to stop cron jobs gracefully if necessary.  See also
{\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-stop}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}stop}}}}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}user@\spxentry{\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}user}}\index{\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}user@\spxentry{\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}user}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-slave-user}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}user}}\sphinxcode{\sphinxupquote{}}}
type: string

Sets the user to be used to connect to the slaves.
This parameter allows you to have a different user with less privileges on the
slaves but that user must exist on all slaves.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}password@\spxentry{\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}password}}\index{\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}password@\spxentry{\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}password}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-slave-password}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}password}}\sphinxcode{\sphinxupquote{}}}
type: string

Sets the password to be used to connect to the slaves.
It can be used with \textendash{}slave\sphinxhyphen{}user and the password for the user must be the same
on all slaves.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}set\sphinxhyphen{}vars@\spxentry{\sphinxhyphen{}\sphinxhyphen{}set\sphinxhyphen{}vars}}\index{\sphinxhyphen{}\sphinxhyphen{}set\sphinxhyphen{}vars@\spxentry{\sphinxhyphen{}\sphinxhyphen{}set\sphinxhyphen{}vars}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-set-vars}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}set\sphinxhyphen{}vars}}\sphinxcode{\sphinxupquote{}}}
type: Array

Set the MariaDB variables in this comma\sphinxhyphen{}separated list of \sphinxcode{\sphinxupquote{variable=value}} pairs.

By default, the tool sets:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nv}{wait\PYGZus{}timeout}\PYG{o}{=}\PYG{l+m}{10000}
\end{sphinxVerbatim}

Variables specified on the command line override these defaults.  For
example, specifying \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}set\sphinxhyphen{}vars wait\_timeout=500}} overrides the default
value of \sphinxcode{\sphinxupquote{10000}}.

The tool prints a warning and continues if a variable cannot be set.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}share\sphinxhyphen{}lock@\spxentry{\sphinxhyphen{}\sphinxhyphen{}share\sphinxhyphen{}lock}}\index{\sphinxhyphen{}\sphinxhyphen{}share\sphinxhyphen{}lock@\spxentry{\sphinxhyphen{}\sphinxhyphen{}share\sphinxhyphen{}lock}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-share-lock}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}share\sphinxhyphen{}lock}}\sphinxcode{\sphinxupquote{}}}
Adds the LOCK IN SHARE MODE modifier to SELECT statements.

See \sphinxurl{http://dev.mysql.com/doc/en/innodb-locking-reads.html}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}skip\sphinxhyphen{}foreign\sphinxhyphen{}key\sphinxhyphen{}checks@\spxentry{\sphinxhyphen{}\sphinxhyphen{}skip\sphinxhyphen{}foreign\sphinxhyphen{}key\sphinxhyphen{}checks}}\index{\sphinxhyphen{}\sphinxhyphen{}skip\sphinxhyphen{}foreign\sphinxhyphen{}key\sphinxhyphen{}checks@\spxentry{\sphinxhyphen{}\sphinxhyphen{}skip\sphinxhyphen{}foreign\sphinxhyphen{}key\sphinxhyphen{}checks}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-skip-foreign-key-checks}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}skip\sphinxhyphen{}foreign\sphinxhyphen{}key\sphinxhyphen{}checks}}\sphinxcode{\sphinxupquote{}}}
Disables foreign key checks with SET FOREIGN\_KEY\_CHECKS=0.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}sleep@\spxentry{\sphinxhyphen{}\sphinxhyphen{}sleep}}\index{\sphinxhyphen{}\sphinxhyphen{}sleep@\spxentry{\sphinxhyphen{}\sphinxhyphen{}sleep}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-sleep}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}sleep}}\sphinxcode{\sphinxupquote{}}}
type: int

Sleep time between fetches.

Specifies how long to sleep between SELECT statements.  Default is not to
sleep at all.  Transactions are NOT committed, and the {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-file}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}file}}}}} file is NOT
flushed, before sleeping.  See {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-txn-size}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}txn\sphinxhyphen{}size}}}}} to control that.

If {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-commit-each}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}commit\sphinxhyphen{}each}}}}} is specified, committing and flushing happens before
sleeping.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}sleep\sphinxhyphen{}coef@\spxentry{\sphinxhyphen{}\sphinxhyphen{}sleep\sphinxhyphen{}coef}}\index{\sphinxhyphen{}\sphinxhyphen{}sleep\sphinxhyphen{}coef@\spxentry{\sphinxhyphen{}\sphinxhyphen{}sleep\sphinxhyphen{}coef}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-sleep-coef}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}sleep\sphinxhyphen{}coef}}\sphinxcode{\sphinxupquote{}}}
type: float

Calculate {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-sleep}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}sleep}}}}} as a multiple of the last SELECT time.

If this option is specified, \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} will sleep for the query time of the
last SELECT multiplied by the specified coefficient.

This is a slightly more sophisticated way to throttle the SELECTs: sleep a
varying amount of time between each SELECT, depending on how long the SELECTs
are taking.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}socket@\spxentry{\sphinxhyphen{}\sphinxhyphen{}socket}}\index{\sphinxhyphen{}\sphinxhyphen{}socket@\spxentry{\sphinxhyphen{}\sphinxhyphen{}socket}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-socket}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}socket}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}S; type: string

Socket file to use for connection.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}source@\spxentry{\sphinxhyphen{}\sphinxhyphen{}source}}\index{\sphinxhyphen{}\sphinxhyphen{}source@\spxentry{\sphinxhyphen{}\sphinxhyphen{}source}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-source}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}source}}\sphinxcode{\sphinxupquote{}}}
type: DSN

DSN specifying the table to archive from (required).  This argument is a DSN.
See DSN OPTIONS for the syntax.  Most options control how \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}}
connects to MariaDB, but there are some extended DSN options in this tool’s
syntax.  The D, t, and i options select a table to archive:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZhy{}\PYGZhy{}source \PYG{n+nv}{h}\PYG{o}{=}my\PYGZus{}server,D\PYG{o}{=}my\PYGZus{}database,t\PYG{o}{=}my\PYGZus{}tbl
\end{sphinxVerbatim}

The a option specifies the database to set as the connection’s default with USE.
If the b option is true, it disables binary logging with SQL\_LOG\_BIN.  The m
option specifies pluggable actions, which an external Perl module can provide.
The only required part is the table; other parts may be read from various
places in the environment (such as options files).

The ‘i’ part deserves special mention.  This tells \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} which index
it should scan to archive.  This appears in a FORCE INDEX or USE INDEX hint in
the SELECT statements used to fetch archivable rows.  If you don’t specify
anything, \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} will auto\sphinxhyphen{}discover a good index, preferring a \sphinxcode{\sphinxupquote{PRIMARY
KEY}} if one exists.  In my experience this usually works well, so most of the
time you can probably just omit the ‘i’ part.

The index is used to optimize repeated accesses to the table; \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}}
remembers the last row it retrieves from each SELECT statement, and uses it to
construct a WHERE clause, using the columns in the specified index, that should
allow MariaDB to start the next SELECT where the last one ended, rather than
potentially scanning from the beginning of the table with each successive
SELECT.  If you are using external plugins, please see “EXTENDING” for a
discussion of how they interact with ascending indexes.

The ‘a’ and ‘b’ options allow you to control how statements flow through the
binary log.  If you specify the ‘b’ option, binary logging will be disabled on
the specified connection.  If you specify the ‘a’ option, the connection will
\sphinxcode{\sphinxupquote{USE}} the specified database, which you can use to prevent slaves from
executing the binary log events with \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}replicate\sphinxhyphen{}ignore\sphinxhyphen{}db}} options.  These
two options can be used as different methods to achieve the same goal: archive
data off the master, but leave it on the slave.  For example, you can run a
purge job on the master and prevent it from happening on the slave using your
method of choice.

\sphinxstylestrong{WARNING}: Using a default options file (F) DSN option that defines a
socket for {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-source}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}source}}}}} causes \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} to connect to {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-dest}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dest}}}}} using
that socket unless another socket for {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-dest}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dest}}}}} is specified.  This
means that \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} may incorrectly connect to {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-source}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}source}}}}} when it
is meant to connect to {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-dest}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dest}}}}}.  For example:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZhy{}\PYGZhy{}source \PYG{n+nv}{F}\PYG{o}{=}host1.cnf,D\PYG{o}{=}db,t\PYG{o}{=}tbl \PYGZhy{}\PYGZhy{}dest \PYG{n+nv}{h}\PYG{o}{=}host2
\end{sphinxVerbatim}

When \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} connects to {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-dest}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dest}}}}}, host2, it will connect via the
{\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-source}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}source}}}}}, host1, socket defined in host1.cnf.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}statistics@\spxentry{\sphinxhyphen{}\sphinxhyphen{}statistics}}\index{\sphinxhyphen{}\sphinxhyphen{}statistics@\spxentry{\sphinxhyphen{}\sphinxhyphen{}statistics}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-statistics}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}statistics}}\sphinxcode{\sphinxupquote{}}}
Collect and print timing statistics.

Causes \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} to collect timing statistics about what it does.  These
statistics are available to the plugin specified by {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-plugin}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}plugin}}}}}

Unless you specify {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-quiet}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}quiet}}}}}, \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} prints the statistics when it
exits.  The statistics look like this:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
Started at \PYG{l+m}{2008}\PYGZhy{}07\PYGZhy{}18T07:18:53, ended at \PYG{l+m}{2008}\PYGZhy{}07\PYGZhy{}18T07:18:53
Source: \PYG{n+nv}{D}\PYG{o}{=}db,t\PYG{o}{=}table
SELECT \PYG{l+m}{4}
INSERT \PYG{l+m}{4}
DELETE \PYG{l+m}{4}
Action         Count       Time        Pct
commit            \PYG{l+m}{10}     \PYG{l+m}{0}.1079      \PYG{l+m}{88}.27
\PYG{k}{select}             \PYG{l+m}{5}     \PYG{l+m}{0}.0047       \PYG{l+m}{3}.87
deleting           \PYG{l+m}{4}     \PYG{l+m}{0}.0028       \PYG{l+m}{2}.29
inserting          \PYG{l+m}{4}     \PYG{l+m}{0}.0028       \PYG{l+m}{2}.28
other              \PYG{l+m}{0}     \PYG{l+m}{0}.0040       \PYG{l+m}{3}.29
\end{sphinxVerbatim}

The first two (or three) lines show times and the source and destination tables.
The next three lines show how many rows were fetched, inserted, and deleted.

The remaining lines show counts and timing.  The columns are the action, the
total number of times that action was timed, the total time it took, and the
percent of the program’s total runtime.  The rows are sorted in order of
descending total time.  The last row is the rest of the time not explicitly
attributed to anything.  Actions will vary depending on command\sphinxhyphen{}line options.

If {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-why-quit}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}why\sphinxhyphen{}quit}}}}} is given, its behavior is changed slightly.  This option
causes it to print the reason for exiting even when it’s just because there are
no more rows.

This option requires the standard Time::HiRes module, which is part of core Perl
on reasonably new Perl releases.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}stop@\spxentry{\sphinxhyphen{}\sphinxhyphen{}stop}}\index{\sphinxhyphen{}\sphinxhyphen{}stop@\spxentry{\sphinxhyphen{}\sphinxhyphen{}stop}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-stop}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}stop}}\sphinxcode{\sphinxupquote{}}}
Stop running instances by creating the sentinel file.

Causes \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} to create the sentinel file specified by {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-sentinel}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}sentinel}}}}} and
exit.  This should have the effect of stopping all running instances which are
watching the same sentinel file.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}txn\sphinxhyphen{}size@\spxentry{\sphinxhyphen{}\sphinxhyphen{}txn\sphinxhyphen{}size}}\index{\sphinxhyphen{}\sphinxhyphen{}txn\sphinxhyphen{}size@\spxentry{\sphinxhyphen{}\sphinxhyphen{}txn\sphinxhyphen{}size}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-txn-size}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}txn\sphinxhyphen{}size}}\sphinxcode{\sphinxupquote{}}}
type: int; default: 1

Number of rows per transaction.

Specifies the size, in number of rows, of each transaction. Zero disables
transactions altogether.  After \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} processes this many rows, it
commits both the {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-source}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}source}}}}} and the {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-dest}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dest}}}}} if given, and flushes the
file given by {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-file}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}file}}}}}.

This parameter is critical to performance.  If you are archiving from a live
server, which for example is doing heavy OLTP work, you need to choose a good
balance between transaction size and commit overhead.  Larger transactions
create the possibility of more lock contention and deadlocks, but smaller
transactions cause more frequent commit overhead, which can be significant.  To
give an idea, on a small test set I worked with while writing \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}}, a
value of 500 caused archiving to take about 2 seconds per 1000 rows on an
otherwise quiet MariaDB instance on my desktop machine, archiving to disk and to
another table.  Disabling transactions with a value of zero, which turns on
autocommit, dropped performance to 38 seconds per thousand rows.

If you are not archiving from or to a transactional storage engine, you may
want to disable transactions so \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} doesn’t try to commit.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}user@\spxentry{\sphinxhyphen{}\sphinxhyphen{}user}}\index{\sphinxhyphen{}\sphinxhyphen{}user@\spxentry{\sphinxhyphen{}\sphinxhyphen{}user}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-user}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}user}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}u; type: string

User for login if not current user.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}version@\spxentry{\sphinxhyphen{}\sphinxhyphen{}version}}\index{\sphinxhyphen{}\sphinxhyphen{}version@\spxentry{\sphinxhyphen{}\sphinxhyphen{}version}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-version}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}version}}\sphinxcode{\sphinxupquote{}}}
Show version and exit.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}where@\spxentry{\sphinxhyphen{}\sphinxhyphen{}where}}\index{\sphinxhyphen{}\sphinxhyphen{}where@\spxentry{\sphinxhyphen{}\sphinxhyphen{}where}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-where}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}where}}\sphinxcode{\sphinxupquote{}}}
type: string

WHERE clause to limit which rows to archive (required).

Specifies a WHERE clause to limit which rows are archived.  Do not include the
word WHERE.  You may need to quote the argument to prevent your shell from
interpreting it.  For example:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZhy{}\PYGZhy{}where \PYG{l+s+s1}{\PYGZsq{}ts \PYGZlt{} current\PYGZus{}date \PYGZhy{} interval 90 day\PYGZsq{}}
\end{sphinxVerbatim}

For safety, {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-where}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}where}}}}} is required.  If you do not require a WHERE clause, use
{\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-where}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}where}}}}} 1=1.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}!\sphinxhyphen{}\sphinxhyphen{}why\sphinxhyphen{}quit@\spxentry{\sphinxhyphen{}\sphinxhyphen{}why\sphinxhyphen{}quit}}\index{\sphinxhyphen{}\sphinxhyphen{}why\sphinxhyphen{}quit@\spxentry{\sphinxhyphen{}\sphinxhyphen{}why\sphinxhyphen{}quit}!mariadb\sphinxhyphen{}archiver command line option@\spxentry{mariadb\sphinxhyphen{}archiver command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-why-quit}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}why\sphinxhyphen{}quit}}\sphinxcode{\sphinxupquote{}}}
Print reason for exiting unless rows exhausted.

Causes \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} to print a message if it exits for any reason other than
running out of rows to archive.  This can be useful if you have a cron job with
{\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-run-time}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time}}}}} specified, for example, and you want to be sure \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} is
finishing before running out of time.

If {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-statistics}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}statistics}}}}} is given, the behavior is changed slightly.  It will print
the reason for exiting even when it’s just because there are no more rows.

This output prints even if {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-quiet}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}quiet}}}}} is given.  That’s so you can put
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} in a \sphinxcode{\sphinxupquote{cron}} job and get an email if there’s an abnormal exit.

\end{fulllineitems}



\section{DSN OPTIONS}
\label{\detokenize{mariadb-archiver:dsn-options}}
These DSN options are used to create a DSN.  Each option is given like
\sphinxcode{\sphinxupquote{option=value}}.  The options are case\sphinxhyphen{}sensitive, so P and p are not the
same option.  There cannot be whitespace before or after the \sphinxcode{\sphinxupquote{=}} and
if the value contains whitespace it must be quoted.  DSN options are
comma\sphinxhyphen{}separated.  See the mariadb\sphinxhyphen{}tools manpage for full details.
\begin{itemize}
\item {} 
a

\end{itemize}
\begin{quote}

copy: no

Database to USE when executing queries.
\end{quote}
\begin{itemize}
\item {} 
A

\end{itemize}
\begin{quote}

dsn: charset; copy: yes

Default character set.
\end{quote}
\begin{itemize}
\item {} 
b

\end{itemize}
\begin{quote}

copy: no

If true, disable binlog with SQL\_LOG\_BIN.
\end{quote}
\begin{itemize}
\item {} 
D

\end{itemize}
\begin{quote}

dsn: database; copy: yes

Database that contains the table.
\end{quote}
\begin{itemize}
\item {} 
F

\end{itemize}
\begin{quote}

dsn: mysql\_read\_default\_file; copy: yes

Only read default options from the given file
\end{quote}
\begin{itemize}
\item {} 
h

\end{itemize}
\begin{quote}

dsn: host; copy: yes

Connect to host.
\end{quote}
\begin{itemize}
\item {} 
i

\end{itemize}
\begin{quote}

copy: yes

Index to use.
\end{quote}
\begin{itemize}
\item {} 
L

\end{itemize}
\begin{quote}

copy: yes

Explicitly enable LOAD DATA LOCAL INFILE.

For some reason, some vendors compile libmysql without the
\textendash{}enable\sphinxhyphen{}local\sphinxhyphen{}infile option, which disables the statement.  This can
lead to weird situations, like the server allowing LOCAL INFILE, but
the client throwing exceptions if it’s used.

However, as long as the server allows LOAD DATA, clients can easily
re\sphinxhyphen{}enable it; See \sphinxurl{https://mariadb.com/kb/en/library/load-data-infile/}
and \sphinxurl{http://search.cpan.org/~capttofu/DBD-mysql/lib/DBD/mysql.pm}.
This option does exactly that.

Although we’ve not found a case where turning this option leads to errors or
differing behavior, to be on the safe side, this option is not
on by default.
\end{quote}
\begin{itemize}
\item {} 
m

\end{itemize}
\begin{quote}

copy: no

Plugin module name.
\end{quote}
\begin{itemize}
\item {} 
p

\end{itemize}
\begin{quote}

dsn: password; copy: yes

Password to use when connecting.
If password contains commas they must be escaped with a backslash: “exam,ple”
\end{quote}
\begin{itemize}
\item {} 
P

\end{itemize}
\begin{quote}

dsn: port; copy: yes

Port number to use for connection.
\end{quote}
\begin{itemize}
\item {} 
S

\end{itemize}
\begin{quote}

dsn: mysql\_socket; copy: yes

Socket file to use for connection.
\end{quote}
\begin{itemize}
\item {} 
t

\end{itemize}
\begin{quote}

copy: yes

Table to archive from/to.
\end{quote}
\begin{itemize}
\item {} 
u

\end{itemize}
\begin{quote}

dsn: user; copy: yes

User for login if not current user.
\end{quote}


\section{EXTENDING}
\label{\detokenize{mariadb-archiver:extending}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} is extensible by plugging in external Perl modules to handle some
logic and/or actions.  You can specify a module for both the {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-source}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}source}}}}} and
the {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-dest}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dest}}}}}, with the ‘m’ part of the specification.  For example:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZhy{}\PYGZhy{}source \PYG{n+nv}{D}\PYG{o}{=}test,t\PYG{o}{=}test1,m\PYG{o}{=}My::Module1 \PYGZhy{}\PYGZhy{}dest \PYG{n+nv}{m}\PYG{o}{=}My::Module2,t\PYG{o}{=}test2
\end{sphinxVerbatim}

This will cause \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} to load the My::Module1 and My::Module2 packages,
create instances of them, and then make calls to them during the archiving
process.

You can also specify a plugin with {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-plugin}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}plugin}}}}}.

The module must provide this interface:

new(dbh =\textgreater{} \$dbh, db =\textgreater{} \$db\_name, tbl =\textgreater{} \$tbl\_name)
\begin{quote}

The plugin’s constructor is passed a reference to the database handle, the
database name, and table name.  The plugin is created just after \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}}
opens the connection, and before it examines the table given in the arguments.
This gives the plugin a chance to create and populate temporary tables, or do
other setup work.
\end{quote}

before\_begin(cols =\textgreater{} @cols, allcols =\textgreater{} @allcols)
\begin{quote}

This method is called just before \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} begins iterating through rows
and archiving them, but after it does all other setup work (examining table
structures, designing SQL queries, and so on).  This is the only time
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} tells the plugin column names for the rows it will pass the
plugin while archiving.

The \sphinxcode{\sphinxupquote{cols}} argument is the column names the user requested to be archived,
either by default or by the {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-columns}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}columns}}}}} option.  The \sphinxcode{\sphinxupquote{allcols}} argument is
the list of column names for every row \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} will fetch from the source
table.  It may fetch more columns than the user requested, because it needs some
columns for its own use.  When subsequent plugin functions receive a row, it is
the full row containing all the extra columns, if any, added to the end.
\end{quote}

is\_archivable(row =\textgreater{} @row)
\begin{quote}

This method is called for each row to determine whether it is archivable.  This
applies only to {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-source}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}source}}}}}.  The argument is the row itself, as an arrayref.
If the method returns true, the row will be archived; otherwise it will be
skipped.

Skipping a row adds complications for non\sphinxhyphen{}unique indexes.  Normally
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} uses a WHERE clause designed to target the last processed row as
the place to start the scan for the next SELECT statement.  If you have skipped
the row by returning false from is\_archivable(), \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} could get into
an infinite loop because the row still exists.  Therefore, when you specify a
plugin for the {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-source}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}source}}}}} argument, \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} will change its WHERE clause
slightly.  Instead of starting at “greater than or equal to” the last processed
row, it will start “strictly greater than.”  This will work fine on unique
indexes such as primary keys, but it may skip rows (leave holes) on non\sphinxhyphen{}unique
indexes or when ascending only the first column of an index.

\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} will change the clause in the same way if you specify
{\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-no-delete}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}delete}}}}}, because again an infinite loop is possible.

If you specify the {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-bulk-delete}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}bulk\sphinxhyphen{}delete}}}}} option and return false from this method,
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} may not do what you want.  The row won’t be archived, but it will
be deleted, since bulk deletes operate on ranges of rows and don’t know which
rows the plugin selected to keep.

If you specify the {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-bulk-insert}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}bulk\sphinxhyphen{}insert}}}}} option, this method’s return value will
influence whether the row is written to the temporary file for the bulk insert,
so bulk inserts will work as expected.  However, bulk inserts require bulk
deletes.
\end{quote}

before\_delete(row =\textgreater{} @row)
\begin{quote}

This method is called for each row just before it is deleted.  This applies only
to {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-source}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}source}}}}}.  This is a good place for you to handle dependencies, such as
deleting things that are foreign\sphinxhyphen{}keyed to the row you are about to delete.  You
could also use this to recursively archive all dependent tables.

This plugin method is called even if {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-no-delete}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}delete}}}}} is given, but not if
{\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-bulk-delete}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}bulk\sphinxhyphen{}delete}}}}} is given.
\end{quote}

before\_bulk\_delete(first\_row =\textgreater{} @row, last\_row =\textgreater{} @row)
\begin{quote}

This method is called just before a bulk delete is executed.  It is similar to
the \sphinxcode{\sphinxupquote{before\_delete}} method, except its arguments are the first and last row of
the range to be deleted.  It is called even if {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-no-delete}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}delete}}}}} is given.
\end{quote}

before\_insert(row =\textgreater{} @row)
\begin{quote}

This method is called for each row just before it is inserted.  This applies
only to {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-dest}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dest}}}}}.  You could use this to insert the row into multiple tables,
perhaps with an ON DUPLICATE KEY UPDATE clause to build summary tables in a data
warehouse.

This method is not called if {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-bulk-insert}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}bulk\sphinxhyphen{}insert}}}}} is given.
\end{quote}

before\_bulk\_insert(first\_row =\textgreater{} @row, last\_row =\textgreater{} @row, filename =\textgreater{} bulk\_insert\_filename)
\begin{quote}

This method is called just before a bulk insert is executed.  It is similar to
the \sphinxcode{\sphinxupquote{before\_insert}} method, except its arguments are the first and last row of
the range to be deleted.
\end{quote}

custom\_sth(row =\textgreater{} @row, sql =\textgreater{} \$sql)
\begin{quote}

This method is called just before inserting the row, but after
“before\_insert()”.  It allows the plugin to specify different \sphinxcode{\sphinxupquote{INSERT}}
statement if desired.  The return value (if any) should be a DBI statement
handle.  The \sphinxcode{\sphinxupquote{sql}} parameter is the SQL text used to prepare the default
\sphinxcode{\sphinxupquote{INSERT}} statement.  This method is not called if you specify
{\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-bulk-insert}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}bulk\sphinxhyphen{}insert}}}}}.

If no value is returned, the default \sphinxcode{\sphinxupquote{INSERT}} statement handle is used.

This method applies only to the plugin specified for {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-dest}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dest}}}}}, so if your
plugin isn’t doing what you expect, check that you’ve specified it for the
destination and not the source.
\end{quote}

custom\_sth\_bulk(first\_row =\textgreater{} @row, last\_row =\textgreater{} @row, sql =\textgreater{} \$sql, filename =\textgreater{} \$bulk\_insert\_filename)
\begin{quote}

If you’ve specified {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-bulk-insert}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}bulk\sphinxhyphen{}insert}}}}}, this method is called just before the
bulk insert, but after “before\_bulk\_insert()”, and the arguments are
different.

This method’s return value etc is similar to the “custom\_sth()” method.
\end{quote}

after\_finish()
\begin{quote}

This method is called after \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} exits the archiving loop, commits all
database handles, closes {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-file}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}file}}}}}, and prints the final statistics, but
before \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} runs ANALYZE or OPTIMIZE (see {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-analyze}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}analyze}}}}} and
{\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-optimize}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}optimize}}}}}).
\end{quote}

If you specify a plugin for both {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-source}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}source}}}}} and {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-dest}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dest}}}}}, \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}}
constructs, calls before\_begin(), and calls after\_finish() on the two plugins in
the order {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-source}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}source}}}}}, {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-dest}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dest}}}}}.

\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} assumes it controls transactions, and that the plugin will NOT
commit or roll back the database handle.  The database handle passed to the
plugin’s constructor is the same handle \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} uses itself.  Remember
that {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-source}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}source}}}}} and {\hyperref[\detokenize{mariadb-archiver:cmdoption-mariadb-archiver-dest}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dest}}}}} are separate handles.

A sample module might look like this:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
package My::Module\PYG{p}{;}

sub new \PYG{o}{\PYGZob{}}
   my \PYG{o}{(} \PYG{n+nv}{\PYGZdl{}class}, \PYGZpc{}args \PYG{o}{)} \PYG{o}{=} @\PYGZus{}\PYG{p}{;}
   \PYG{k}{return} bless\PYG{o}{(}\PYG{l+s+se}{\PYGZbs{}\PYGZpc{}}args, \PYG{n+nv}{\PYGZdl{}class}\PYG{o}{)}\PYG{p}{;}
\PYG{o}{\PYGZcb{}}

sub before\PYGZus{}begin \PYG{o}{\PYGZob{}}
   my \PYG{o}{(} \PYG{n+nv}{\PYGZdl{}self}, \PYGZpc{}args \PYG{o}{)} \PYG{o}{=} @\PYGZus{}\PYG{p}{;}
   \PYG{c+c1}{\PYGZsh{} Save column names for later}
   \PYG{n+nv}{\PYGZdl{}self}\PYGZhy{}\PYGZgt{}\PYG{o}{\PYGZob{}}cols\PYG{o}{\PYGZcb{}} \PYG{o}{=} \PYG{n+nv}{\PYGZdl{}args}\PYG{o}{\PYGZob{}}cols\PYG{o}{\PYGZcb{}}\PYG{p}{;}
\PYG{o}{\PYGZcb{}}

sub is\PYGZus{}archivable \PYG{o}{\PYGZob{}}
   my \PYG{o}{(} \PYG{n+nv}{\PYGZdl{}self}, \PYGZpc{}args \PYG{o}{)} \PYG{o}{=} @\PYGZus{}\PYG{p}{;}
   \PYG{c+c1}{\PYGZsh{} Do some advanced logic with \PYGZdl{}args\PYGZob{}row\PYGZcb{}}
   \PYG{k}{return} \PYG{l+m}{1}\PYG{p}{;}
\PYG{o}{\PYGZcb{}}

sub before\PYGZus{}delete \PYG{o}{\PYGZob{}}\PYG{o}{\PYGZcb{}} \PYG{c+c1}{\PYGZsh{} Take no action}
sub before\PYGZus{}insert \PYG{o}{\PYGZob{}}\PYG{o}{\PYGZcb{}} \PYG{c+c1}{\PYGZsh{} Take no action}
sub custom\PYGZus{}sth    \PYG{o}{\PYGZob{}}\PYG{o}{\PYGZcb{}} \PYG{c+c1}{\PYGZsh{} Take no action}
sub after\PYGZus{}finish  \PYG{o}{\PYGZob{}}\PYG{o}{\PYGZcb{}} \PYG{c+c1}{\PYGZsh{} Take no action}

\PYG{l+m}{1}\PYG{p}{;}
\end{sphinxVerbatim}


\section{ENVIRONMENT}
\label{\detokenize{mariadb-archiver:environment}}
The environment variable \sphinxcode{\sphinxupquote{PTDEBUG}} enables verbose debugging output to STDERR.
To enable debugging and capture all output to a file, run the tool like:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nv}{PTDEBUG}\PYG{o}{=}\PYG{l+m}{1} mariadb\PYGZhy{}archiver ... \PYGZgt{} FILE \PYG{l+m}{2}\PYGZgt{}\PYG{p}{\PYGZam{}}\PYG{l+m}{1}
\end{sphinxVerbatim}

Be careful: debugging output is voluminous and can generate several megabytes
of output.


\section{SYSTEM REQUIREMENTS}
\label{\detokenize{mariadb-archiver:system-requirements}}
You need Perl, DBI, DBD::mysql, and some core packages that ought to be
installed in any reasonably new version of Perl.


\section{AUTHORS}
\label{\detokenize{mariadb-archiver:authors}}
Cole Busby, Baron Schwartz


\section{ACKNOWLEDGMENTS}
\label{\detokenize{mariadb-archiver:acknowledgments}}
Andrew O’Brien


\section{ABOUT THIS MARIADB TOOL}
\label{\detokenize{mariadb-archiver:about-this-mariadb-tool}}
This tool is part of MariaDB client tools. This MariaDB Tool was forked from
Percona Toolkit’s pt\sphinxhyphen{}archiver in August, 2019. Percona Toolkit was forked from two
projects in June, 2011: Maatkit and Aspersa.  Those projects were created by
Baron Schwartz and primarily developed by him and Daniel Nichter.


\section{COPYRIGHT, LICENSE, AND WARRANTY}
\label{\detokenize{mariadb-archiver:copyright-license-and-warranty}}
This program is copyright 2019\sphinxhyphen{}2021 MariaDB Corporation and/or its affiliates,
2011\sphinxhyphen{}2018 Percona LLC and/or its affiliates, 2010\sphinxhyphen{}2011 Baron Schwartz.

THIS PROGRAM IS PROVIDED “AS IS” AND WITHOUT ANY EXPRESS OR IMPLIED
WARRANTIES, INCLUDING, WITHOUT LIMITATION, THE IMPLIED WARRANTIES OF
MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.

This program is free software; you can redistribute it and/or modify it under
the terms of the GNU General Public License as published by the Free Software
Foundation, version 2; OR the Perl Artistic License.  On UNIX and similar
systems, you can issue \textasciigrave{}man perlgpl’ or \textasciigrave{}man perlartistic’ to read these
licenses.

You should have received a copy of the GNU General Public License along with
this program; if not, write to the Free Software Foundation, Inc., 59 Temple
Place, Suite 330, Boston, MA  02111\sphinxhyphen{}1307  USA.


\section{VERSION}
\label{\detokenize{mariadb-archiver:version}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}archiver}} 6.0.0rc


\chapter{\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}backup\sphinxhyphen{}manager}}}
\label{\detokenize{mariadb-backup-manager:mariadb-backup-manager}}\label{\detokenize{mariadb-backup-manager::doc}}

\chapter{\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary}}}
\label{\detokenize{mariadb-database-summary:mariadb-database-summary}}\label{\detokenize{mariadb-database-summary::doc}}

\section{NAME}
\label{\detokenize{mariadb-database-summary:name}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary}} \sphinxhyphen{} Summarize MariaDB information nicely.


\section{SYNOPSIS}
\label{\detokenize{mariadb-database-summary:synopsis}}

\subsection{Usage}
\label{\detokenize{mariadb-database-summary:usage}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{mariadb}\PYG{o}{\PYGZhy{}}\PYG{n}{database}\PYG{o}{\PYGZhy{}}\PYG{n}{summary} \PYG{p}{[}\PYG{n}{OPTIONS}\PYG{p}{]}
\end{sphinxVerbatim}

\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary}} conveniently summarizes the status and configuration of a
MariaDB database server so that you can learn about it at a glance.  It is not
a tuning tool or diagnosis tool.  It produces a report that is easy to diff
and can be pasted into emails without losing the formatting.  It should work
well on any modern UNIX systems.


\section{RISKS}
\label{\detokenize{mariadb-database-summary:risks}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary}} is mature, proven in the real world, and well tested,
but all database tools can pose a risk to the system and the database
server.  Before using this tool, please:
\begin{itemize}
\item {} 
Read the tool’s documentation

\item {} 
Review the tool’s known “BUGS”

\item {} 
Test the tool on a non\sphinxhyphen{}production server

\item {} 
Backup your production server and verify the backups

\end{itemize}


\section{DESCRIPTION}
\label{\detokenize{mariadb-database-summary:description}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary}} works by connecting to a MariaDB database server and querying
it for status and configuration information.  It saves these bits of data
into files in a temporary directory, and then formats them neatly with awk
and other scripting languages.

To use, simply execute it.  Optionally add a double dash and then the same
command\sphinxhyphen{}line options you would use to connect to MariaDB, such as the following:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
mariadb\PYGZhy{}database\PYGZhy{}summary \PYGZhy{}\PYGZhy{}user\PYG{o}{=}root
\end{sphinxVerbatim}

The tool interacts minimally with the server upon which it runs.  It assumes
that you’ll run it on the same server you’re inspecting, and therefore it
assumes that it will be able to find the my.cnf configuration file, for example.
However, it should degrade gracefully if this is not the case.  Note, however,
that its output does not indicate which information comes from the MariaDB
database and which comes from the host operating system, so it is possible for
confusing output to be generated if you run the tool on one server and connect
to a MariaDB database server running on another server.


\section{OUTPUT}
\label{\detokenize{mariadb-database-summary:output}}
Many of the outputs from this tool are deliberately rounded to show their
magnitude but not the exact detail.  This is called fuzzy\sphinxhyphen{}rounding. The idea
is that it does not matter whether a server is running 918 queries per second
or 921 queries per second; such a small variation is insignificant, and only
makes the output hard to compare to other servers.  Fuzzy\sphinxhyphen{}rounding rounds in
larger increments as the input grows.  It begins by rounding to the nearest 5,
then the nearest 10, nearest 25, and then repeats by a factor of 10 larger
(50, 100, 250), and so on, as the input grows.

The following is a sample of the report that the tool produces:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} MariaDB Server Summary Report \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
              System \PYG{n+nb}{time} \PYG{p}{|} \PYG{l+m}{2012}\PYGZhy{}03\PYGZhy{}30 \PYG{l+m}{18}:46:05 UTC
                            \PYG{o}{(}\PYG{n+nb}{local} TZ: EDT \PYGZhy{}0400\PYG{o}{)}
\PYG{c+c1}{\PYGZsh{} Instances \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
  Port  Data Directory             Nice OOM \PYG{n+nv}{Socket}
  \PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=} \PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=} \PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=} \PYG{o}{=}\PYG{o}{=}\PYG{o}{=} \PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}
  \PYG{l+m}{12345} /tmp/12345/data            \PYG{l+m}{0}    \PYG{l+m}{0}   /tmp/12345.sock
  \PYG{l+m}{12346} /tmp/12346/data            \PYG{l+m}{0}    \PYG{l+m}{0}   /tmp/12346.sock
  \PYG{l+m}{12347} /tmp/12347/data            \PYG{l+m}{0}    \PYG{l+m}{0}   /tmp/12347.sock
\end{sphinxVerbatim}

The first two sections show which server the report was generated on and which
MariaDB instances are running on the server. This is detected from the output of
\sphinxcode{\sphinxupquote{ps}} and does not always detect all instances and parameters, but often works
well.  From this point forward, the report will be focused on a single MariaDB
instance, although several instances may appear in the above paragraph.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Report On Port 12345 \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
                     User \PYG{p}{|} msandbox@\PYGZpc{}
                     Time \PYG{p}{|} \PYG{l+m}{2012}\PYGZhy{}03\PYGZhy{}30 \PYG{l+m}{14}:46:05 \PYG{o}{(}EDT\PYG{o}{)}
                 Hostname \PYG{p}{|} localhost.localdomain
                  Version \PYG{p}{|} \PYG{l+m}{10}.4.7\PYGZhy{}MariaDB\PYGZhy{}1:10.4.7+maria\PYGZti{}bionic
                 Built On \PYG{p}{|} linux2.6 i686
                  Started \PYG{p}{|} \PYG{l+m}{2012}\PYGZhy{}03\PYGZhy{}28 \PYG{l+m}{23}:33 \PYG{o}{(}up \PYG{l+m}{1}+15:12:09\PYG{o}{)}
                Databases \PYG{p}{|} \PYG{l+m}{4}
                  Datadir \PYG{p}{|} /tmp/12345/data/
                Processes \PYG{p}{|} \PYG{l+m}{2} connected, \PYG{l+m}{2} running
              Replication \PYG{p}{|} Is not a slave, has \PYG{l+m}{1} slaves connected
                  Pidfile \PYG{p}{|} /tmp/12345/data/12345.pid \PYG{o}{(}exists\PYG{o}{)}
\end{sphinxVerbatim}

This section is a quick summary of the MariaDB instance: version, uptime, and
other very basic parameters. The Time output is generated from the MariaDB server,
unlike the system date and time printed earlier, so you can see whether the
database and operating system times match.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Processlist \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}

  Command                        COUNT\PYG{o}{(}*\PYG{o}{)} Working SUM\PYG{o}{(}Time\PYG{o}{)} MAX\PYG{o}{(}Time\PYG{o}{)}
  \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}
  Binlog Dump                           \PYG{l+m}{1}       \PYG{l+m}{1}    \PYG{l+m}{150000}    \PYG{l+m}{150000}
  Query                                 \PYG{l+m}{1}       \PYG{l+m}{1}         \PYG{l+m}{0}         \PYG{l+m}{0}

  User                           COUNT\PYG{o}{(}*\PYG{o}{)} Working SUM\PYG{o}{(}Time\PYG{o}{)} MAX\PYG{o}{(}Time\PYG{o}{)}
  \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}
  msandbox                              \PYG{l+m}{2}       \PYG{l+m}{2}    \PYG{l+m}{150000}    \PYG{l+m}{150000}

  Host                           COUNT\PYG{o}{(}*\PYG{o}{)} Working SUM\PYG{o}{(}Time\PYG{o}{)} MAX\PYG{o}{(}Time\PYG{o}{)}
  \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}
  localhost                             \PYG{l+m}{2}       \PYG{l+m}{2}    \PYG{l+m}{150000}    \PYG{l+m}{150000}

  db                             COUNT\PYG{o}{(}*\PYG{o}{)} Working SUM\PYG{o}{(}Time\PYG{o}{)} MAX\PYG{o}{(}Time\PYG{o}{)}
  \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}
  NULL                                  \PYG{l+m}{2}       \PYG{l+m}{2}    \PYG{l+m}{150000}    \PYG{l+m}{150000}

  State                          COUNT\PYG{o}{(}*\PYG{o}{)} Working SUM\PYG{o}{(}Time\PYG{o}{)} MAX\PYG{o}{(}Time\PYG{o}{)}
  \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}
  Master has sent all binlog to         \PYG{l+m}{1}       \PYG{l+m}{1}    \PYG{l+m}{150000}    \PYG{l+m}{150000}
  NULL                                  \PYG{l+m}{1}       \PYG{l+m}{1}         \PYG{l+m}{0}         \PYG{l+m}{0}
\end{sphinxVerbatim}

This section is a summary of the output from SHOW PROCESSLIST. Each sub\sphinxhyphen{}section
is aggregated by a different item, which is shown as the first column heading.
When summarized by Command, every row in SHOW PROCESSLIST is included, but
otherwise, rows whose Command is Sleep are excluded from the SUM and MAX
columns, so they do not skew the numbers too much. In the example shown, the
server is idle except for this tool itself, and one connected replica, which
is executing Binlog Dump.

The columns are the number of rows included, the number that are not in Sleep
status, the sum of the Time column, and the maximum Time column. The numbers are
fuzzy\sphinxhyphen{}rounded.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Status Counters (Wait 10 Seconds) \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
Variable                            Per day  Per second     \PYG{l+m}{10} secs
Binlog\PYGZus{}cache\PYGZus{}disk\PYGZus{}use                     \PYG{l+m}{4}
Binlog\PYGZus{}cache\PYGZus{}use                         \PYG{l+m}{80}
Bytes\PYGZus{}received                     \PYG{l+m}{15000000}         \PYG{l+m}{175}         \PYG{l+m}{200}
Bytes\PYGZus{}sent                         \PYG{l+m}{15000000}         \PYG{l+m}{175}        \PYG{l+m}{2000}
Com\PYGZus{}admin\PYGZus{}commands                        \PYG{l+m}{1}
...................\PYG{o}{(}many lines omitted\PYG{o}{)}............................
Threads\PYGZus{}created                          \PYG{l+m}{40}                       \PYG{l+m}{1}
Uptime                                \PYG{l+m}{90000}           \PYG{l+m}{1}           \PYG{l+m}{1}
\end{sphinxVerbatim}

This section shows selected counters from two snapshots of SHOW GLOBAL STATUS,
gathered approximately 10 seconds apart and fuzzy\sphinxhyphen{}rounded. It includes only
items that are incrementing counters; it does not include absolute numbers such
as the Threads\_running status variable, which represents a current value, rather
than an accumulated number over time.

The first column is the variable name, and the second column is the counter from
the first snapshot divided by 86400 (the number of seconds in a day), so you can
see the magnitude of the counter’s change per day. 86400 fuzzy\sphinxhyphen{}rounds to 90000,
so the Uptime counter should always be about 90000.

The third column is the value from the first snapshot, divided by Uptime and
then fuzzy\sphinxhyphen{}rounded, so it represents approximately how quickly the counter is
growing per\sphinxhyphen{}second over the uptime of the server.

The third column is the incremental difference from the first and second
snapshot, divided by the difference in uptime and then fuzzy\sphinxhyphen{}rounded. Therefore,
it shows how quickly the counter is growing per second at the time the report
was generated.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Table cache \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
                     Size \PYG{p}{|} \PYG{l+m}{400}
                    Usage \PYG{p}{|} \PYG{l+m}{15}\PYGZpc{}
\end{sphinxVerbatim}

This section shows the size of the table cache, followed by the percentage of
the table cache in use. The usage is fuzzy\sphinxhyphen{}rounded.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Key MariaDB Server features \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
      Table \PYG{p}{\PYGZam{}} Index Stats \PYG{p}{|} Not Supported
     Multiple I/O Threads \PYG{p}{|} Enabled
     Corruption Resilient \PYG{p}{|} Not Supported
      Durable Replication \PYG{p}{|} Not Supported
     Import InnoDB Tables \PYG{p}{|} Not Supported
     Fast Server Restarts \PYG{p}{|} Not Supported
         Enhanced Logging \PYG{p}{|} Not Supported
     Replica Perf Logging \PYG{p}{|} Not Supported
      Response Time Hist. \PYG{p}{|} Not Supported
          Smooth Flushing \PYG{p}{|} Not Supported
      HandlerSocket NoSQL \PYG{p}{|} Not Supported
           Fast Hash UDFs \PYG{p}{|} Unknown
\end{sphinxVerbatim}

This section shows features that are available in MariaDB Server and whether
they are enabled or not.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Plugins \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
       InnoDB compression \PYG{p}{|} ACTIVE
\end{sphinxVerbatim}

This feature shows specific plugins and whether they are enabled.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Query cache \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
         query\PYGZus{}cache\PYGZus{}type \PYG{p}{|} ON
                     Size \PYG{p}{|} \PYG{l+m}{0}.0
                    Usage \PYG{p}{|} \PYG{l+m}{0}\PYGZpc{}
         HitToInsertRatio \PYG{p}{|} \PYG{l+m}{0}\PYGZpc{}
\end{sphinxVerbatim}

This section shows whether the query cache is enabled and its size, followed by
the percentage of the cache in use and the hit\sphinxhyphen{}to\sphinxhyphen{}insert ratio. The latter two
are fuzzy\sphinxhyphen{}rounded.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Schema \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}

  Database           Tables Views SPs Trigs Funcs   FKs Partn
  mysql                  \PYG{l+m}{24}
  performance\PYGZus{}schema     \PYG{l+m}{17}
  sakila                 \PYG{l+m}{16}     \PYG{l+m}{7}   \PYG{l+m}{3}     \PYG{l+m}{6}     \PYG{l+m}{3}    \PYG{l+m}{22}

  Database           MyISAM CSV PERFORMANCE\PYGZus{}SCHEMA InnoDB
  mysql                  \PYG{l+m}{22}   \PYG{l+m}{2}
  performance\PYGZus{}schema                            \PYG{l+m}{17}
  sakila                  \PYG{l+m}{8}                            \PYG{l+m}{15}

  Database           BTREE FULLTEXT
  mysql                 \PYG{l+m}{31}
  performance\PYGZus{}schema
  sakila                \PYG{l+m}{63}        \PYG{l+m}{1}

                       c   t   s   e   l   d   i   t   m   v   s
                       h   i   e   n   o   a   n   i   e   a   m
                       a   m   t   u   n   t   t   n   d   r   a
                       r   e       m   g   e       y   i   c   l
                           s           b   t       i   u   h   l
                           t           l   i       n   m   a   i
                           a           o   m       t   t   r   n
                           m           b   e           e       t
                           p                           x
                                                       t
  \PYG{n+nv}{Database}           \PYG{o}{=}\PYG{o}{=}\PYG{o}{=} \PYG{o}{=}\PYG{o}{=}\PYG{o}{=} \PYG{o}{=}\PYG{o}{=}\PYG{o}{=} \PYG{o}{=}\PYG{o}{=}\PYG{o}{=} \PYG{o}{=}\PYG{o}{=}\PYG{o}{=} \PYG{o}{=}\PYG{o}{=}\PYG{o}{=} \PYG{o}{=}\PYG{o}{=}\PYG{o}{=} \PYG{o}{=}\PYG{o}{=}\PYG{o}{=} \PYG{o}{=}\PYG{o}{=}\PYG{o}{=} \PYG{o}{=}\PYG{o}{=}\PYG{o}{=} \PYG{o}{=}\PYG{o}{=}\PYG{o}{=}
  mysql               \PYG{l+m}{61}  \PYG{l+m}{10}   \PYG{l+m}{6}  \PYG{l+m}{78}   \PYG{l+m}{5}   \PYG{l+m}{4}  \PYG{l+m}{26}   \PYG{l+m}{3}   \PYG{l+m}{4}   \PYG{l+m}{5}   \PYG{l+m}{3}
  performance\PYGZus{}schema               \PYG{l+m}{5}          \PYG{l+m}{16}          \PYG{l+m}{33}
  sakila               \PYG{l+m}{1}  \PYG{l+m}{15}   \PYG{l+m}{1}   \PYG{l+m}{3}       \PYG{l+m}{4}   \PYG{l+m}{3}  \PYG{l+m}{19}      \PYG{l+m}{42}  \PYG{l+m}{26}
\end{sphinxVerbatim}

If you specify {\hyperref[\detokenize{mariadb-database-summary:cmdoption-mariadb-database-summary-databases}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}databases}}}}} or {\hyperref[\detokenize{mariadb-database-summary:cmdoption-mariadb-database-summary-all-databases}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}all\sphinxhyphen{}databases}}}}}, the tool will print
the above section. This summarizes the number and type of objects in the
databases. It is generated by running \sphinxcode{\sphinxupquote{mariadb\sphinxhyphen{}dump \sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}data}}, not by querying
the INFORMATION\_SCHEMA, which can freeze a busy server.

The first sub\sphinxhyphen{}report in the section is the count of objects by type in each
database: tables, views, and so on. The second one shows how many tables use
various storage engines in each database. The third sub\sphinxhyphen{}report shows the number
of each type of indexes in each database.

The last section shows the number of columns of various data types in each
database. For compact display, the column headers are formatted vertically, so
you need to read downwards from the top. In this example, the first column is
\sphinxcode{\sphinxupquote{char}} and the second column is \sphinxcode{\sphinxupquote{timestamp}}. This example is truncated so it
does not wrap on a terminal.

All of the numbers in this portion of the output are exact, not fuzzy\sphinxhyphen{}rounded.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Noteworthy Technologies \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
       Full Text Indexing \PYG{p}{|} Yes
         Geospatial Types \PYG{p}{|} No
             Foreign Keys \PYG{p}{|} Yes
             Partitioning \PYG{p}{|} No
       InnoDB Compression \PYG{p}{|} Yes
                      SSL \PYG{p}{|} No
     Explicit LOCK TABLES \PYG{p}{|} No
           Delayed Insert \PYG{p}{|} No
          XA Transactions \PYG{p}{|} No
      ColumnStore Cluster \PYG{p}{|} No
      Prepared Statements \PYG{p}{|} No
 Prepared statement count \PYG{p}{|} \PYG{l+m}{0}
\end{sphinxVerbatim}

This section shows some specific technologies used on this server. Some of them
are detected from the schema dump performed for the previous sections; others
can be detected by looking at SHOW GLOBAL STATUS.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} InnoDB \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
                  Version \PYG{p}{|} \PYG{l+m}{1}.1.8
         Buffer Pool Size \PYG{p}{|} \PYG{l+m}{16}.0M
         Buffer Pool Fill \PYG{p}{|} \PYG{l+m}{100}\PYGZpc{}
        Buffer Pool Dirty \PYG{p}{|} \PYG{l+m}{0}\PYGZpc{}
           File Per Table \PYG{p}{|} OFF
                Page Size \PYG{p}{|} 16k
            Log File Size \PYG{p}{|} \PYG{l+m}{2} * \PYG{l+m}{5}.0M \PYG{o}{=} \PYG{l+m}{10}.0M
          Log Buffer Size \PYG{p}{|} 8M
             Flush Method \PYG{p}{|}
      Flush Log At Commit \PYG{p}{|} \PYG{l+m}{1}
               XA Support \PYG{p}{|} ON
                Checksums \PYG{p}{|} ON
              Doublewrite \PYG{p}{|} ON
          R/W I/O Threads \PYG{p}{|} \PYG{l+m}{4} \PYG{l+m}{4}
             I/O Capacity \PYG{p}{|} \PYG{l+m}{200}
       Thread Concurrency \PYG{p}{|} \PYG{l+m}{0}
      Concurrency Tickets \PYG{p}{|} \PYG{l+m}{500}
       Commit Concurrency \PYG{p}{|} \PYG{l+m}{0}
      Txn Isolation Level \PYG{p}{|} REPEATABLE\PYGZhy{}READ
        Adaptive Flushing \PYG{p}{|} ON
      Adaptive Checkpoint \PYG{p}{|}
           Checkpoint Age \PYG{p}{|} \PYG{l+m}{0}
             InnoDB Queue \PYG{p}{|} \PYG{l+m}{0} queries inside InnoDB, \PYG{l+m}{0} queries in queue
       Oldest Transaction \PYG{p}{|} \PYG{l+m}{0} Seconds
         History List Len \PYG{p}{|} \PYG{l+m}{209}
               Read Views \PYG{p}{|} \PYG{l+m}{1}
         Undo Log Entries \PYG{p}{|} \PYG{l+m}{1} transactions, \PYG{l+m}{1} total undo, \PYG{l+m}{1} max undo
        Pending I/O Reads \PYG{p}{|} \PYG{l+m}{0} buf pool reads, \PYG{l+m}{0} normal AIO,
                            \PYG{l+m}{0} ibuf AIO, \PYG{l+m}{0} preads
       Pending I/O Writes \PYG{p}{|} \PYG{l+m}{0} buf pool \PYG{o}{(}\PYG{l+m}{0} LRU, \PYG{l+m}{0} flush list, \PYG{l+m}{0} page\PYG{o}{)}\PYG{p}{;}
                            \PYG{l+m}{0} AIO, \PYG{l+m}{0} sync, \PYG{l+m}{0} log IO \PYG{o}{(}\PYG{l+m}{0} log, \PYG{l+m}{0} chkp\PYG{o}{)}\PYG{p}{;}
                            \PYG{l+m}{0} pwrites
      Pending I/O Flushes \PYG{p}{|} \PYG{l+m}{0} buf pool, \PYG{l+m}{0} log
       Transaction States \PYG{p}{|} 1xnot started
\end{sphinxVerbatim}

This section shows important configuration variables for the InnoDB storage
engine. The buffer pool fill percent and dirty percent are fuzzy\sphinxhyphen{}rounded. The
last few lines are derived from the output of SHOW INNODB STATUS. It is likely
that this output will change in the future to become more useful.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} MyISAM \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
                Key Cache \PYG{p}{|} \PYG{l+m}{16}.0M
                 Pct Used \PYG{p}{|} \PYG{l+m}{10}\PYGZpc{}
                Unflushed \PYG{p}{|} \PYG{l+m}{0}\PYGZpc{}
\end{sphinxVerbatim}

This section shows the size of the MyISAM key cache, followed by the percentage
of the cache in use and percentage unflushed (fuzzy\sphinxhyphen{}rounded).

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Aria \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
        Page Cache Buffer \PYG{p}{|} \PYG{l+m}{16}.0M
                 Pct Used \PYG{p}{|} \PYG{l+m}{10}\PYGZpc{}
                Unflushed \PYG{p}{|} \PYG{l+m}{0}\PYGZpc{}
\end{sphinxVerbatim}

This section shows the size of the Aria page cache, followed by the percentage
of the cache in use and percentage unflushed (fuzzy\sphinxhyphen{}rounded).

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Security \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
                    Users \PYG{p}{|} \PYG{l+m}{2} users, \PYG{l+m}{0} anon, \PYG{l+m}{0} w/o pw, \PYG{l+m}{0} old pw
            Old Passwords \PYG{p}{|} OFF
\end{sphinxVerbatim}

This section is generated from queries to tables in the mysql system database.
It shows how many users exist, and various potential security risks such as
old\sphinxhyphen{}style passwords and users without passwords.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Binary Logging \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
                  Binlogs \PYG{p}{|} \PYG{l+m}{1}
               Zero\PYGZhy{}Sized \PYG{p}{|} \PYG{l+m}{0}
               Total Size \PYG{p}{|} \PYG{l+m}{21}.8M
            binlog\PYGZus{}format \PYG{p}{|} STATEMENT
         expire\PYGZus{}logs\PYGZus{}days \PYG{p}{|} \PYG{l+m}{0}
              sync\PYGZus{}binlog \PYG{p}{|} \PYG{l+m}{0}
                server\PYGZus{}id \PYG{p}{|} \PYG{l+m}{12345}
             binlog\PYGZus{}do\PYGZus{}db \PYG{p}{|}
         binlog\PYGZus{}ignore\PYGZus{}db \PYG{p}{|}
\end{sphinxVerbatim}

This section shows configuration and status of the binary logs. If there are
zero\sphinxhyphen{}sized binary logs, then it is possible that the binlog index is out of sync
with the binary logs that actually exist on disk.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Noteworthy Variables \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
     Auto\PYGZhy{}Inc Incr/Offset \PYG{p}{|} \PYG{l+m}{1}/1
   default\PYGZus{}storage\PYGZus{}engine \PYG{p}{|} InnoDB
               flush\PYGZus{}time \PYG{p}{|} \PYG{l+m}{0}
             init\PYGZus{}connect \PYG{p}{|}
                init\PYGZus{}file \PYG{p}{|}
                 sql\PYGZus{}mode \PYG{p}{|}
         join\PYGZus{}buffer\PYGZus{}size \PYG{p}{|} 128k
         sort\PYGZus{}buffer\PYGZus{}size \PYG{p}{|} 2M
         read\PYGZus{}buffer\PYGZus{}size \PYG{p}{|} 128k
     read\PYGZus{}rnd\PYGZus{}buffer\PYGZus{}size \PYG{p}{|} 256k
       bulk\PYGZus{}insert\PYGZus{}buffer \PYG{p}{|} \PYG{l+m}{0}.00
      max\PYGZus{}heap\PYGZus{}table\PYGZus{}size \PYG{p}{|} 16M
           tmp\PYGZus{}table\PYGZus{}size \PYG{p}{|} 16M
       max\PYGZus{}allowed\PYGZus{}packet \PYG{p}{|} 1M
             thread\PYGZus{}stack \PYG{p}{|} 192k
                      log \PYG{p}{|} OFF
                log\PYGZus{}error \PYG{p}{|} /tmp/12345/data/mysqld.log
             log\PYGZus{}warnings \PYG{p}{|} \PYG{l+m}{1}
         log\PYGZus{}slow\PYGZus{}queries \PYG{p}{|} ON
log\PYGZus{}queries\PYGZus{}not\PYGZus{}using\PYGZus{}indexes \PYG{p}{|} OFF
        log\PYGZus{}slave\PYGZus{}updates \PYG{p}{|} ON
\end{sphinxVerbatim}

This section shows several noteworthy server configuration variables that might
be important to know about when working with this server.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Configuration File \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
              Config File \PYG{p}{|} /tmp/12345/my.sandbox.cnf
\PYG{o}{[}client\PYG{o}{]}
\PYG{n+nv}{user}                                \PYG{o}{=} msandbox
\PYG{n+nv}{password}                            \PYG{o}{=} msandbox
\PYG{n+nv}{port}                                \PYG{o}{=} \PYG{l+m}{12345}
\PYG{n+nv}{socket}                              \PYG{o}{=} /tmp/12345/mysql\PYGZus{}sandbox12345.sock
\PYG{o}{[}mysqld\PYG{o}{]}
\PYG{n+nv}{port}                                \PYG{o}{=} \PYG{l+m}{12345}
\PYG{n+nv}{socket}                              \PYG{o}{=} /tmp/12345/mysql\PYGZus{}sandbox12345.sock
pid\PYGZhy{}file                            \PYG{o}{=} /tmp/12345/data/mysql\PYGZus{}sandbox12345.pid
\PYG{n+nv}{basedir}                             \PYG{o}{=} /home/baron/5.5.20
\PYG{n+nv}{datadir}                             \PYG{o}{=} /tmp/12345/data
\PYG{n+nv}{key\PYGZus{}buffer\PYGZus{}size}                     \PYG{o}{=} 16M
\PYG{n+nv}{innodb\PYGZus{}buffer\PYGZus{}pool\PYGZus{}size}             \PYG{o}{=} 16M
\PYG{n+nv}{innodb\PYGZus{}data\PYGZus{}home\PYGZus{}dir}                \PYG{o}{=} /tmp/12345/data
\PYG{n+nv}{innodb\PYGZus{}log\PYGZus{}group\PYGZus{}home\PYGZus{}dir}           \PYG{o}{=} /tmp/12345/data
\PYG{n+nv}{innodb\PYGZus{}data\PYGZus{}file\PYGZus{}path}               \PYG{o}{=} ibdata1:10M:autoextend
\PYG{n+nv}{innodb\PYGZus{}log\PYGZus{}file\PYGZus{}size}                \PYG{o}{=} 5M
log\PYGZhy{}bin                             \PYG{o}{=} mariadb\PYGZhy{}bin
\PYG{n+nv}{relay\PYGZus{}log}                           \PYG{o}{=} mariadb\PYGZhy{}relay\PYGZhy{}bin
log\PYGZus{}slave\PYGZus{}updates
server\PYGZhy{}id                           \PYG{o}{=} \PYG{l+m}{12345}
report\PYGZhy{}host                         \PYG{o}{=} \PYG{l+m}{127}.0.0.1
report\PYGZhy{}port                         \PYG{o}{=} \PYG{l+m}{12345}
log\PYGZhy{}error                           \PYG{o}{=} mysqld.log
\PYG{n+nv}{innodb\PYGZus{}lock\PYGZus{}wait\PYGZus{}timeout}            \PYG{o}{=} \PYG{l+m}{3}
\PYG{c+c1}{\PYGZsh{} The End \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
\end{sphinxVerbatim}

This section shows a pretty\sphinxhyphen{}printed version of the my.cnf file, with comments
removed and with whitespace added to align things for easy reading. The tool
tries to detect the my.cnf file by looking at the output of ps, and if it does
not find the location of the file there, it tries common locations until it
finds a file. Note that this file might not actually correspond with the server
from which the report was generated. This can happen when the tool isn’t run on
the same server it’s reporting on, or when detecting the location of the
configuration file fails.


\section{OPTIONS}
\label{\detokenize{mariadb-database-summary:options}}
All options after \textendash{} are passed to \sphinxcode{\sphinxupquote{mariadb}}.
\index{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}all\sphinxhyphen{}databases@\spxentry{\sphinxhyphen{}\sphinxhyphen{}all\sphinxhyphen{}databases}}\index{\sphinxhyphen{}\sphinxhyphen{}all\sphinxhyphen{}databases@\spxentry{\sphinxhyphen{}\sphinxhyphen{}all\sphinxhyphen{}databases}!mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-database-summary:cmdoption-mariadb-database-summary-all-databases}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}all\sphinxhyphen{}databases}}\sphinxcode{\sphinxupquote{}}}
mariadb\sphinxhyphen{}dump and summarize all databases.  See {\hyperref[\detokenize{mariadb-database-summary:cmdoption-mariadb-database-summary-databases}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}databases}}}}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass}}\index{\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass}!mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-database-summary:cmdoption-mariadb-database-summary-ask-pass}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass}}\sphinxcode{\sphinxupquote{}}}
Prompt for a password when connecting to MariaDB.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}config@\spxentry{\sphinxhyphen{}\sphinxhyphen{}config}}\index{\sphinxhyphen{}\sphinxhyphen{}config@\spxentry{\sphinxhyphen{}\sphinxhyphen{}config}!mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-database-summary:cmdoption-mariadb-database-summary-config}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}config}}\sphinxcode{\sphinxupquote{}}}
type: string

Read this comma\sphinxhyphen{}separated list of config files.  If specified, this must be the
first option on the command line.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}databases@\spxentry{\sphinxhyphen{}\sphinxhyphen{}databases}}\index{\sphinxhyphen{}\sphinxhyphen{}databases@\spxentry{\sphinxhyphen{}\sphinxhyphen{}databases}!mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-database-summary:cmdoption-mariadb-database-summary-databases}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}databases}}\sphinxcode{\sphinxupquote{}}}
type: string

mariadb\sphinxhyphen{}dump and summarize this comma\sphinxhyphen{}separated list of databases.  Specify
{\hyperref[\detokenize{mariadb-database-summary:cmdoption-mariadb-database-summary-all-databases}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}all\sphinxhyphen{}databases}}}}} instead if you want to dump and summary all databases.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}defaults\sphinxhyphen{}file@\spxentry{\sphinxhyphen{}\sphinxhyphen{}defaults\sphinxhyphen{}file}}\index{\sphinxhyphen{}\sphinxhyphen{}defaults\sphinxhyphen{}file@\spxentry{\sphinxhyphen{}\sphinxhyphen{}defaults\sphinxhyphen{}file}!mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-database-summary:cmdoption-mariadb-database-summary-defaults-file}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}defaults\sphinxhyphen{}file}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}F; type: string

Only read mariadb options from the given file.  You must give an absolute
pathname.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}help@\spxentry{\sphinxhyphen{}\sphinxhyphen{}help}}\index{\sphinxhyphen{}\sphinxhyphen{}help@\spxentry{\sphinxhyphen{}\sphinxhyphen{}help}!mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-database-summary:cmdoption-mariadb-database-summary-help}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}help}}\sphinxcode{\sphinxupquote{}}}
Print help and exit.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}host@\spxentry{\sphinxhyphen{}\sphinxhyphen{}host}}\index{\sphinxhyphen{}\sphinxhyphen{}host@\spxentry{\sphinxhyphen{}\sphinxhyphen{}host}!mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-database-summary:cmdoption-mariadb-database-summary-host}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}host}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}h; type: string

Host to connect to.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}list\sphinxhyphen{}encrypted\sphinxhyphen{}tables@\spxentry{\sphinxhyphen{}\sphinxhyphen{}list\sphinxhyphen{}encrypted\sphinxhyphen{}tables}}\index{\sphinxhyphen{}\sphinxhyphen{}list\sphinxhyphen{}encrypted\sphinxhyphen{}tables@\spxentry{\sphinxhyphen{}\sphinxhyphen{}list\sphinxhyphen{}encrypted\sphinxhyphen{}tables}!mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-database-summary:cmdoption-mariadb-database-summary-list-encrypted-tables}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}list\sphinxhyphen{}encrypted\sphinxhyphen{}tables}}\sphinxcode{\sphinxupquote{}}}
default: false

Include a list of the encrypted tables in all databases. This can cause slowdowns since
querying Information Schema tables can be slow.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}password@\spxentry{\sphinxhyphen{}\sphinxhyphen{}password}}\index{\sphinxhyphen{}\sphinxhyphen{}password@\spxentry{\sphinxhyphen{}\sphinxhyphen{}password}!mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-database-summary:cmdoption-mariadb-database-summary-password}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}password}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}p; type: string

Password to use when connecting.
If password contains commas they must be escaped with a backslash: “exam,ple”

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}port@\spxentry{\sphinxhyphen{}\sphinxhyphen{}port}}\index{\sphinxhyphen{}\sphinxhyphen{}port@\spxentry{\sphinxhyphen{}\sphinxhyphen{}port}!mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-database-summary:cmdoption-mariadb-database-summary-port}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}port}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}P; type: int

Port number to use for connection.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}read\sphinxhyphen{}samples@\spxentry{\sphinxhyphen{}\sphinxhyphen{}read\sphinxhyphen{}samples}}\index{\sphinxhyphen{}\sphinxhyphen{}read\sphinxhyphen{}samples@\spxentry{\sphinxhyphen{}\sphinxhyphen{}read\sphinxhyphen{}samples}!mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-database-summary:cmdoption-mariadb-database-summary-read-samples}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}read\sphinxhyphen{}samples}}\sphinxcode{\sphinxupquote{}}}
type: string

Create a report from the files found in this directory.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}save\sphinxhyphen{}samples@\spxentry{\sphinxhyphen{}\sphinxhyphen{}save\sphinxhyphen{}samples}}\index{\sphinxhyphen{}\sphinxhyphen{}save\sphinxhyphen{}samples@\spxentry{\sphinxhyphen{}\sphinxhyphen{}save\sphinxhyphen{}samples}!mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-database-summary:cmdoption-mariadb-database-summary-save-samples}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}save\sphinxhyphen{}samples}}\sphinxcode{\sphinxupquote{}}}
type: string

Save the data files used to generate the summary in this directory.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}sleep@\spxentry{\sphinxhyphen{}\sphinxhyphen{}sleep}}\index{\sphinxhyphen{}\sphinxhyphen{}sleep@\spxentry{\sphinxhyphen{}\sphinxhyphen{}sleep}!mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-database-summary:cmdoption-mariadb-database-summary-sleep}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}sleep}}\sphinxcode{\sphinxupquote{}}}
type: int; default: 10

Seconds to sleep when gathering status counters.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}socket@\spxentry{\sphinxhyphen{}\sphinxhyphen{}socket}}\index{\sphinxhyphen{}\sphinxhyphen{}socket@\spxentry{\sphinxhyphen{}\sphinxhyphen{}socket}!mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-database-summary:cmdoption-mariadb-database-summary-socket}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}socket}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}S; type: string

Socket file to use for connection.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}user@\spxentry{\sphinxhyphen{}\sphinxhyphen{}user}}\index{\sphinxhyphen{}\sphinxhyphen{}user@\spxentry{\sphinxhyphen{}\sphinxhyphen{}user}!mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-database-summary:cmdoption-mariadb-database-summary-user}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}user}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}u; type: string

User for login if not current user.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}version@\spxentry{\sphinxhyphen{}\sphinxhyphen{}version}}\index{\sphinxhyphen{}\sphinxhyphen{}version@\spxentry{\sphinxhyphen{}\sphinxhyphen{}version}!mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-database-summary:cmdoption-mariadb-database-summary-version}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}version}}\sphinxcode{\sphinxupquote{}}}
Print tool’s version and exit.

\end{fulllineitems}



\section{ENVIRONMENT}
\label{\detokenize{mariadb-database-summary:environment}}
This tool does not use any environment variables.


\section{SYSTEM REQUIREMENTS}
\label{\detokenize{mariadb-database-summary:system-requirements}}
This tool requires Bash v3 or newer, Perl 5.8 or newer, and binutils.
These are generally already provided by most distributions.
On BSD systems, it may require a mounted procfs.


\section{AUTHORS}
\label{\detokenize{mariadb-database-summary:authors}}
Cole Busby,Baron Schwartz, Brian Fraser, and Daniel Nichter


\section{ABOUT THIS MARIADB TOOL}
\label{\detokenize{mariadb-database-summary:about-this-mariadb-tool}}
This tool is part of MariaDB client tools. This MariaDB Tool was forked from
Percona Toolkit’s pt\sphinxhyphen{}mysql\sphinxhyphen{}summary in August, 2019. Percona Toolkit was forked
from two projects in June, 2011: Maatkit and Aspersa.  Those projects were
created by Baron Schwartz and primarily developed by him and Daniel Nichter.


\section{COPYRIGHT, LICENSE, AND WARRANTY}
\label{\detokenize{mariadb-database-summary:copyright-license-and-warranty}}
This program is copyright 2019\sphinxhyphen{}2021 MariaDB Corporation and/or its affiliates,
2011\sphinxhyphen{}2018 Percona LLC and/or its affiliates, 2010\sphinxhyphen{}2011 Baron Schwartz.

THIS PROGRAM IS PROVIDED “AS IS” AND WITHOUT ANY EXPRESS OR IMPLIED
WARRANTIES, INCLUDING, WITHOUT LIMITATION, THE IMPLIED WARRANTIES OF
MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.

This program is free software; you can redistribute it and/or modify it under
the terms of the GNU General Public License as published by the Free Software
Foundation, version 2; OR the Perl Artistic License.  On UNIX and similar
systems, you can issue \textasciigrave{}man perlgpl’ or \textasciigrave{}man perlartistic’ to read these
licenses.

You should have received a copy of the GNU General Public License along with
this program; if not, write to the Free Software Foundation, Inc., 59 Temple
Place, Suite 330, Boston, MA  02111\sphinxhyphen{}1307  USA.


\section{VERSION}
\label{\detokenize{mariadb-database-summary:version}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}database\sphinxhyphen{}summary}} 6.0.0rc


\chapter{\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker}}}
\label{\detokenize{mariadb-index-checker:mariadb-index-checker}}\label{\detokenize{mariadb-index-checker::doc}}

\section{NAME}
\label{\detokenize{mariadb-index-checker:name}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker}} \sphinxhyphen{} Find duplicate indexes and foreign keys on MariaDB tables.


\section{SYNOPSIS}
\label{\detokenize{mariadb-index-checker:synopsis}}

\subsection{Usage}
\label{\detokenize{mariadb-index-checker:usage}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{mariadb}\PYG{o}{\PYGZhy{}}\PYG{n}{index}\PYG{o}{\PYGZhy{}}\PYG{n}{checker} \PYG{p}{[}\PYG{n}{OPTIONS}\PYG{p}{]} \PYG{p}{[}\PYG{n}{DSN}\PYG{p}{]}
\end{sphinxVerbatim}

\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker}} examines MariaDB tables for duplicate or redundant
indexes and foreign keys.  Connection options are read from MariaDB option files.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
mariadb\PYGZhy{}index\PYGZhy{}checker \PYGZhy{}\PYGZhy{}host host1
\end{sphinxVerbatim}


\section{RISKS}
\label{\detokenize{mariadb-index-checker:risks}}
MariaDB Tools is mature, proven in the real world, and well tested,
but all database tools can pose a risk to the system and the database
server.  Before using this tool, please:
\begin{itemize}
\item {} 
Read the tool’s documentation

\item {} 
Review the tool’s known “BUGS”

\item {} 
Test the tool on a non\sphinxhyphen{}production server

\item {} 
Backup your production server and verify the backups

\end{itemize}


\section{DESCRIPTION}
\label{\detokenize{mariadb-index-checker:description}}
This program examines the output of SHOW CREATE TABLE on MariaDB tables, and if
it finds indexes that cover the same columns as another index in the same
order, or cover an exact leftmost prefix of another index, it prints out
the suspicious indexes.  By default, indexes must be of the same type, so a
BTREE index is not a duplicate of a FULLTEXT index, even if they have the same
columns.  You can override this.

It also looks for duplicate foreign keys.  A duplicate foreign key covers the
same columns as another in the same table, and references the same parent
table.

The output ends with a short summary that includes an estimate of the total
size, in bytes, that the duplicate indexes are using. This is calculated by
multiplying the index length by the number of rows in their respective tables.


\section{OPTIONS}
\label{\detokenize{mariadb-index-checker:options}}
This tool accepts additional command\sphinxhyphen{}line arguments.  Refer to the
“SYNOPSIS” and usage information for details.
\index{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}!\sphinxhyphen{}\sphinxhyphen{}all\sphinxhyphen{}structs@\spxentry{\sphinxhyphen{}\sphinxhyphen{}all\sphinxhyphen{}structs}}\index{\sphinxhyphen{}\sphinxhyphen{}all\sphinxhyphen{}structs@\spxentry{\sphinxhyphen{}\sphinxhyphen{}all\sphinxhyphen{}structs}!mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-index-checker:cmdoption-mariadb-index-checker-all-structs}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}all\sphinxhyphen{}structs}}\sphinxcode{\sphinxupquote{}}}
Compare indexes with different structs (BTREE, HASH, etc).

By default this is disabled, because a BTREE index that covers the same columns
as a FULLTEXT index is not really a duplicate, for example.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}!\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass}}\index{\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass}!mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-index-checker:cmdoption-mariadb-index-checker-ask-pass}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass}}\sphinxcode{\sphinxupquote{}}}
Prompt for a password when connecting to MariaDB.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}!\sphinxhyphen{}\sphinxhyphen{}charset@\spxentry{\sphinxhyphen{}\sphinxhyphen{}charset}}\index{\sphinxhyphen{}\sphinxhyphen{}charset@\spxentry{\sphinxhyphen{}\sphinxhyphen{}charset}!mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-index-checker:cmdoption-mariadb-index-checker-charset}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}charset}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}A; type: string

Default character set.  If the value is utf8, sets Perl’s binmode on
STDOUT to utf8, passes the mysql\_enable\_utf8 option to DBD::mysql, and runs SET
NAMES UTF8 after connecting to MariaDB.  Any other value sets binmode on STDOUT
without the utf8 layer, and runs SET NAMES after connecting to MariaDB.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}!\sphinxhyphen{}\sphinxhyphen{}{[}no{]}clustered@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}clustered}}\index{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}clustered@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}clustered}!mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-index-checker:cmdoption-mariadb-index-checker-0}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}}}\sphinxcode{\sphinxupquote{{[}no{]}clustered}}}
default: yes

PK columns appended to secondary key is duplicate.

Detects when a suffix of a secondary key is a leftmost prefix of the primary
key, and treats it as a duplicate key.  Only detects this condition on storage
engines whose primary keys are clustered (currently InnoDB and solidDB).

Clustered storage engines append the primary key columns to the leaf nodes of
all secondary keys anyway, so you might consider it redundant to have them
appear in the internal nodes as well.  Of course, you may also want them in the
internal nodes, because just having them at the leaf nodes won’t help for some
queries.  It does help for covering index queries, however.

Here’s an example of a key that is considered redundant with this option:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
PRIMARY KEY  \PYG{o}{(}\PYG{l+s+sb}{`}a\PYG{l+s+sb}{`}\PYG{o}{)}
KEY \PYG{l+s+sb}{`}b\PYG{l+s+sb}{`} \PYG{o}{(}\PYG{l+s+sb}{`}b\PYG{l+s+sb}{`},\PYG{l+s+sb}{`}a\PYG{l+s+sb}{`}\PYG{o}{)}
\end{sphinxVerbatim}

The use of such indexes is rather subtle.  For example, suppose you have the
following query:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
SELECT ... WHERE \PYG{n+nv}{b}\PYG{o}{=}\PYG{l+m}{1} ORDER BY a\PYG{p}{;}
\end{sphinxVerbatim}

This query will do a filesort if we remove the index on \sphinxcode{\sphinxupquote{b,a}}.  But if we
shorten the index on \sphinxcode{\sphinxupquote{b,a}} to just \sphinxcode{\sphinxupquote{b}} and also remove the ORDER BY, the query
should return the same results.

The tool suggests shortening duplicate clustered keys by dropping the key
and re\sphinxhyphen{}adding it without the primary key prefix.  The shortened clustered
key may still duplicate another key, but the tool cannot currently detect
when this happens without being ran a second time to re\sphinxhyphen{}check the newly
shortened clustered keys.  Therefore, if you shorten any duplicate clustered
keys, you should run the tool again.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}!\sphinxhyphen{}\sphinxhyphen{}config@\spxentry{\sphinxhyphen{}\sphinxhyphen{}config}}\index{\sphinxhyphen{}\sphinxhyphen{}config@\spxentry{\sphinxhyphen{}\sphinxhyphen{}config}!mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-index-checker:cmdoption-mariadb-index-checker-config}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}config}}\sphinxcode{\sphinxupquote{}}}
type: Array

Read this comma\sphinxhyphen{}separated list of config files; if specified, this must be the
first option on the command line.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}!\sphinxhyphen{}\sphinxhyphen{}databases@\spxentry{\sphinxhyphen{}\sphinxhyphen{}databases}}\index{\sphinxhyphen{}\sphinxhyphen{}databases@\spxentry{\sphinxhyphen{}\sphinxhyphen{}databases}!mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-index-checker:cmdoption-mariadb-index-checker-databases}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}databases}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}d; type: hash

Check only this comma\sphinxhyphen{}separated list of databases.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}!\sphinxhyphen{}\sphinxhyphen{}defaults\sphinxhyphen{}file@\spxentry{\sphinxhyphen{}\sphinxhyphen{}defaults\sphinxhyphen{}file}}\index{\sphinxhyphen{}\sphinxhyphen{}defaults\sphinxhyphen{}file@\spxentry{\sphinxhyphen{}\sphinxhyphen{}defaults\sphinxhyphen{}file}!mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-index-checker:cmdoption-mariadb-index-checker-defaults-file}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}defaults\sphinxhyphen{}file}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}F; type: string

Only read mysql options from the given file.  You must give an absolute pathname.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}!\sphinxhyphen{}\sphinxhyphen{}engines@\spxentry{\sphinxhyphen{}\sphinxhyphen{}engines}}\index{\sphinxhyphen{}\sphinxhyphen{}engines@\spxentry{\sphinxhyphen{}\sphinxhyphen{}engines}!mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-index-checker:cmdoption-mariadb-index-checker-engines}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}engines}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}e; type: hash

Check only tables whose storage engine is in this comma\sphinxhyphen{}separated list.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}!\sphinxhyphen{}\sphinxhyphen{}help@\spxentry{\sphinxhyphen{}\sphinxhyphen{}help}}\index{\sphinxhyphen{}\sphinxhyphen{}help@\spxentry{\sphinxhyphen{}\sphinxhyphen{}help}!mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-index-checker:cmdoption-mariadb-index-checker-help}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}help}}\sphinxcode{\sphinxupquote{}}}
Show help and exit.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}!\sphinxhyphen{}\sphinxhyphen{}host@\spxentry{\sphinxhyphen{}\sphinxhyphen{}host}}\index{\sphinxhyphen{}\sphinxhyphen{}host@\spxentry{\sphinxhyphen{}\sphinxhyphen{}host}!mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-index-checker:cmdoption-mariadb-index-checker-host}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}host}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}h; type: string

Connect to host.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}!\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}databases@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}databases}}\index{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}databases@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}databases}!mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-index-checker:cmdoption-mariadb-index-checker-ignore-databases}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}databases}}\sphinxcode{\sphinxupquote{}}}
type: Hash

Ignore this comma\sphinxhyphen{}separated list of databases.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}!\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}engines@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}engines}}\index{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}engines@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}engines}!mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-index-checker:cmdoption-mariadb-index-checker-ignore-engines}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}engines}}\sphinxcode{\sphinxupquote{}}}
type: Hash

Ignore this comma\sphinxhyphen{}separated list of storage engines.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}!\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}order@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}order}}\index{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}order@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}order}!mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-index-checker:cmdoption-mariadb-index-checker-ignore-order}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}order}}\sphinxcode{\sphinxupquote{}}}
Ignore index order so KEY(a,b) duplicates KEY(b,a).

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}!\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}tables@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}tables}}\index{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}tables@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}tables}!mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-index-checker:cmdoption-mariadb-index-checker-ignore-tables}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}tables}}\sphinxcode{\sphinxupquote{}}}
type: Hash

Ignore this comma\sphinxhyphen{}separated list of tables.  Table names may be qualified with
the database name.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}!\sphinxhyphen{}\sphinxhyphen{}key\sphinxhyphen{}types@\spxentry{\sphinxhyphen{}\sphinxhyphen{}key\sphinxhyphen{}types}}\index{\sphinxhyphen{}\sphinxhyphen{}key\sphinxhyphen{}types@\spxentry{\sphinxhyphen{}\sphinxhyphen{}key\sphinxhyphen{}types}!mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-index-checker:cmdoption-mariadb-index-checker-key-types}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}key\sphinxhyphen{}types}}\sphinxcode{\sphinxupquote{}}}
type: string; default: fk

Check for duplicate f=foreign keys, k=keys or fk=both.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}!\sphinxhyphen{}\sphinxhyphen{}password@\spxentry{\sphinxhyphen{}\sphinxhyphen{}password}}\index{\sphinxhyphen{}\sphinxhyphen{}password@\spxentry{\sphinxhyphen{}\sphinxhyphen{}password}!mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-index-checker:cmdoption-mariadb-index-checker-password}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}password}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}p; type: string

Password to use when connecting.
If password contains commas they must be escaped with a backslash: “exam,ple”

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}!\sphinxhyphen{}\sphinxhyphen{}pid@\spxentry{\sphinxhyphen{}\sphinxhyphen{}pid}}\index{\sphinxhyphen{}\sphinxhyphen{}pid@\spxentry{\sphinxhyphen{}\sphinxhyphen{}pid}!mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-index-checker:cmdoption-mariadb-index-checker-pid}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}pid}}\sphinxcode{\sphinxupquote{}}}
type: string

Create the given PID file.  The tool won’t start if the PID file already
exists and the PID it contains is different than the current PID.  However,
if the PID file exists and the PID it contains is no longer running, the
tool will overwrite the PID file with the current PID.  The PID file is
removed automatically when the tool exits.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}!\sphinxhyphen{}\sphinxhyphen{}port@\spxentry{\sphinxhyphen{}\sphinxhyphen{}port}}\index{\sphinxhyphen{}\sphinxhyphen{}port@\spxentry{\sphinxhyphen{}\sphinxhyphen{}port}!mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-index-checker:cmdoption-mariadb-index-checker-port}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}port}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}P; type: int

Port number to use for connection.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}!\sphinxhyphen{}\sphinxhyphen{}set\sphinxhyphen{}vars@\spxentry{\sphinxhyphen{}\sphinxhyphen{}set\sphinxhyphen{}vars}}\index{\sphinxhyphen{}\sphinxhyphen{}set\sphinxhyphen{}vars@\spxentry{\sphinxhyphen{}\sphinxhyphen{}set\sphinxhyphen{}vars}!mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-index-checker:cmdoption-mariadb-index-checker-set-vars}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}set\sphinxhyphen{}vars}}\sphinxcode{\sphinxupquote{}}}
type: Array

Set the MariaDB variables in this comma\sphinxhyphen{}separated list of \sphinxcode{\sphinxupquote{variable=value}} pairs.

By default, the tool sets:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nv}{wait\PYGZus{}timeout}\PYG{o}{=}\PYG{l+m}{10000}
\end{sphinxVerbatim}

Variables specified on the command line override these defaults.  For
example, specifying \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}set\sphinxhyphen{}vars wait\_timeout=500}} overrides the defaultvalue of \sphinxcode{\sphinxupquote{10000}}.

The tool prints a warning and continues if a variable cannot be set.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}!\sphinxhyphen{}\sphinxhyphen{}socket@\spxentry{\sphinxhyphen{}\sphinxhyphen{}socket}}\index{\sphinxhyphen{}\sphinxhyphen{}socket@\spxentry{\sphinxhyphen{}\sphinxhyphen{}socket}!mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-index-checker:cmdoption-mariadb-index-checker-socket}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}socket}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}S; type: string

Socket file to use for connection.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}!\sphinxhyphen{}\sphinxhyphen{}{[}no{]}sql@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}sql}}\index{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}sql@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}sql}!mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-index-checker:cmdoption-mariadb-index-checker-1}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}}}\sphinxcode{\sphinxupquote{{[}no{]}sql}}}
default: yes

Print DROP KEY statement for each duplicate key.  By default an ALTER TABLE
DROP KEY statement is printed below each duplicate key so that, if you want to
remove the duplicate key, you can copy\sphinxhyphen{}paste the statement into MariaDB.

To disable printing these statements, specify \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}sql}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}!\sphinxhyphen{}\sphinxhyphen{}{[}no{]}summary@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}summary}}\index{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}summary@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}summary}!mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-index-checker:cmdoption-mariadb-index-checker-2}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}}}\sphinxcode{\sphinxupquote{{[}no{]}summary}}}
default: yes

Print summary of indexes at end of output.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}!\sphinxhyphen{}\sphinxhyphen{}tables@\spxentry{\sphinxhyphen{}\sphinxhyphen{}tables}}\index{\sphinxhyphen{}\sphinxhyphen{}tables@\spxentry{\sphinxhyphen{}\sphinxhyphen{}tables}!mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-index-checker:cmdoption-mariadb-index-checker-tables}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}tables}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}t; type: hash

Check only this comma\sphinxhyphen{}separated list of tables.

Table names may be qualified with the database name.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}!\sphinxhyphen{}\sphinxhyphen{}user@\spxentry{\sphinxhyphen{}\sphinxhyphen{}user}}\index{\sphinxhyphen{}\sphinxhyphen{}user@\spxentry{\sphinxhyphen{}\sphinxhyphen{}user}!mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-index-checker:cmdoption-mariadb-index-checker-user}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}user}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}u; type: string

User for login if not current user.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}!\sphinxhyphen{}\sphinxhyphen{}verbose@\spxentry{\sphinxhyphen{}\sphinxhyphen{}verbose}}\index{\sphinxhyphen{}\sphinxhyphen{}verbose@\spxentry{\sphinxhyphen{}\sphinxhyphen{}verbose}!mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-index-checker:cmdoption-mariadb-index-checker-verbose}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}verbose}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}v

Output all keys and/or foreign keys found, not just redundant ones.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}!\sphinxhyphen{}\sphinxhyphen{}version@\spxentry{\sphinxhyphen{}\sphinxhyphen{}version}}\index{\sphinxhyphen{}\sphinxhyphen{}version@\spxentry{\sphinxhyphen{}\sphinxhyphen{}version}!mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option@\spxentry{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-index-checker:cmdoption-mariadb-index-checker-version}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}version}}\sphinxcode{\sphinxupquote{}}}
Show version and exit.

\end{fulllineitems}



\section{DSN OPTIONS}
\label{\detokenize{mariadb-index-checker:dsn-options}}
These DSN options are used to create a DSN.  Each option is given like
\sphinxcode{\sphinxupquote{option=value}}.  The options are case\sphinxhyphen{}sensitive, so P and p are not the
same option.  There cannot be whitespace before or after the \sphinxcode{\sphinxupquote{=}} and
if the value contains whitespace it must be quoted.  DSN options are
comma\sphinxhyphen{}separated.  See the mariadb\sphinxhyphen{}tools manpage for full details.
\begin{itemize}
\item {} 
A

\end{itemize}
\begin{quote}

dsn: charset; copy: yes

Default character set.
\end{quote}
\begin{itemize}
\item {} 
D

\end{itemize}
\begin{quote}

dsn: database; copy: yes

Default database.
\end{quote}
\begin{itemize}
\item {} 
F

\end{itemize}
\begin{quote}

dsn: mysql\_read\_default\_file; copy: yes

Only read default options from the given file
\end{quote}
\begin{itemize}
\item {} 
h

\end{itemize}
\begin{quote}

dsn: host; copy: yes

Connect to host.
\end{quote}
\begin{itemize}
\item {} 
p

\end{itemize}
\begin{quote}

dsn: password; copy: yes

Password to use when connecting.
If password contains commas they must be escaped with a backslash: “exam,ple”
\end{quote}
\begin{itemize}
\item {} 
P

\end{itemize}
\begin{quote}

dsn: port; copy: yes

Port number to use for connection.
\end{quote}
\begin{itemize}
\item {} 
S

\end{itemize}
\begin{quote}

dsn: mysql\_socket; copy: yes

Socket file to use for connection.
\end{quote}
\begin{itemize}
\item {} 
u

\end{itemize}
\begin{quote}

dsn: user; copy: yes

User for login if not current user.
\end{quote}


\section{ENVIRONMENT}
\label{\detokenize{mariadb-index-checker:environment}}
This tool does not use any environment variables.


\section{SYSTEM REQUIREMENTS}
\label{\detokenize{mariadb-index-checker:system-requirements}}
You need Perl, and some core packages that ought to be installed in any
reasonably new version of Perl.


\section{AUTHORS}
\label{\detokenize{mariadb-index-checker:authors}}
Cole Busby, Baron Schwartz, Brian Fraser, and Daniel Nichter


\section{ABOUT THIS MARIADB TOOL}
\label{\detokenize{mariadb-index-checker:about-this-mariadb-tool}}
This tool is part of MariaDB client tools. This MariaDB Tool was forked from
Percona Toolkit’s pt\sphinxhyphen{}duplicate\sphinxhyphen{}key\sphinxhyphen{}checker in October, 2021. Percona Toolkit
was forked from two projects in June, 2011: Maatkit and Aspersa.
Those projects were created by Baron Schwartz and primarily developed by him
and Daniel Nichter.


\section{COPYRIGHT, LICENSE, AND WARRANTY}
\label{\detokenize{mariadb-index-checker:copyright-license-and-warranty}}
This program is copyright 2021 MariaDB Corporation and/or its affiliates,
2011\sphinxhyphen{}2018 Percona LLC and/or its affiliates, 2010\sphinxhyphen{}2011 Baron Schwartz.

THIS PROGRAM IS PROVIDED “AS IS” AND WITHOUT ANY EXPRESS OR IMPLIED
WARRANTIES, INCLUDING, WITHOUT LIMITATION, THE IMPLIED WARRANTIES OF
MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.

This program is free software; you can redistribute it and/or modify it under
the terms of the GNU General Public License as published by the Free Software
Foundation, version 2; OR the Perl Artistic License.  On UNIX and similar
systems, you can issue \textasciigrave{}man perlgpl’ or \textasciigrave{}man perlartistic’ to read these
licenses.

You should have received a copy of the GNU General Public License along with
this program; if not, write to the Free Software Foundation, Inc., 59 Temple
Place, Suite 330, Boston, MA  02111\sphinxhyphen{}1307  USA.


\section{VERSION}
\label{\detokenize{mariadb-index-checker:version}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}index\sphinxhyphen{}checker}} 6.0.0rc


\chapter{\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}iostat}}}
\label{\detokenize{mariadb-iostat:mariadb-iostat}}\label{\detokenize{mariadb-iostat::doc}}

\section{NAME}
\label{\detokenize{mariadb-iostat:name}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}iostat}} \sphinxhyphen{} An interactive I/O monitoring tool for GNU/Linux.


\section{SYNOPSIS}
\label{\detokenize{mariadb-iostat:synopsis}}

\subsection{Usage}
\label{\detokenize{mariadb-iostat:usage}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{mariadb}\PYG{o}{\PYGZhy{}}\PYG{n}{iostat} \PYG{p}{[}\PYG{n}{OPTIONS}\PYG{p}{]} \PYG{p}{[}\PYG{n}{FILES}\PYG{p}{]}
\end{sphinxVerbatim}

\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}iostat}} prints disk I/O statistics for GNU/Linux.  It is somewhat similar
to iostat, but it is interactive and more detailed.  It can analyze samples
gathered from another machine.


\section{RISKS}
\label{\detokenize{mariadb-iostat:risks}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}iostat}} is mature, proven in the real world, and well tested,
but all database tools can pose a risk to the system and the database
server.  Before using this tool, please:
\begin{itemize}
\item {} 
Read the tool’s documentation

\item {} 
Test the tool on a non\sphinxhyphen{}production server

\item {} 
Backup your production server and verify the backups

\end{itemize}


\section{DESCRIPTION}
\label{\detokenize{mariadb-iostat:description}}
The \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}iostat}} tool is similar to iostat, but has some advantages. It prints
read and write statistics separately, and has more columns. It is menu\sphinxhyphen{}driven
and interactive, with several different ways to aggregate the data. It
integrates well with the mariadb\sphinxhyphen{}stat tool. It also does the “right thing” by
default, such as hiding disks that are idle.  These properties make it very
convenient for quickly drilling down into I/O performance and inspecting disk
behavior.

This program works in two modes. The default is to collect samples of
\sphinxstyleemphasis{/proc/diskstats} and print out the formatted statistics at intervals. The other
mode is to process a file that contains saved samples of \sphinxstyleemphasis{/proc/diskstats}; there
is a shell script later in this documentation that shows how to collect such a
file.

In both cases, the tool is interactively controlled by keystrokes, so you can
redisplay and slice the data flexibly and easily.  It loops forever, until you
exit with the ‘q’ key.  If you press the ‘?’ key, you will bring up the
interactive help menu that shows which keys control the program.

When the program is gathering samples of \sphinxstyleemphasis{/proc/diskstats} and refreshing its
display, it prints information about the newest sample each time it refreshes.
When it is operating on a file of saved samples, it redraws the entire file’s
contents every time you change an option.

The program doesn’t print information about every block device on the system. It
hides devices that it has never observed to have any activity.  You can enable
and disable this by pressing the ‘i’ key.


\section{OUTPUT}
\label{\detokenize{mariadb-iostat:output}}
In the rest of this documentation, we will try to clarify the distinction
between block devices (/dev/sda1, for example), which the kernel presents to the
application via a filesystem, versus the (usually) physical device underneath
the block device, which could be a disk, a RAID controller, and so on.  We will
sometimes refer to logical I/O operations, which occur at the block device,
versus physical I/Os which are performed on the underlying device.  When we
refer to the queue, we are speaking of the queue associated with the block
device, which holds requests until they’re issued to the physical device.

The program’s output looks like the following sample, which is too wide for this
manual page, so we have formatted it as several samples with line breaks:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{}ts device rd\PYGZus{}s rd\PYGZus{}avkb rd\PYGZus{}mb\PYGZus{}s rd\PYGZus{}mrg rd\PYGZus{}cnc   rd\PYGZus{}rt}
\PYG{o}{\PYGZob{}}\PYG{l+m}{6}\PYG{o}{\PYGZcb{}} sda     \PYG{l+m}{0}.9     \PYG{l+m}{4}.2     \PYG{l+m}{0}.0     \PYG{l+m}{0}\PYGZpc{}    \PYG{l+m}{0}.0    \PYG{l+m}{17}.9
\PYG{o}{\PYGZob{}}\PYG{l+m}{6}\PYG{o}{\PYGZcb{}} sdb     \PYG{l+m}{0}.4     \PYG{l+m}{4}.0     \PYG{l+m}{0}.0     \PYG{l+m}{0}\PYGZpc{}    \PYG{l+m}{0}.0    \PYG{l+m}{26}.1
\PYG{o}{\PYGZob{}}\PYG{l+m}{6}\PYG{o}{\PYGZcb{}} dm\PYGZhy{}0    \PYG{l+m}{0}.0     \PYG{l+m}{4}.0     \PYG{l+m}{0}.0     \PYG{l+m}{0}\PYGZpc{}    \PYG{l+m}{0}.0    \PYG{l+m}{13}.5
\PYG{o}{\PYGZob{}}\PYG{l+m}{6}\PYG{o}{\PYGZcb{}} dm\PYGZhy{}1    \PYG{l+m}{0}.8     \PYG{l+m}{4}.0     \PYG{l+m}{0}.0     \PYG{l+m}{0}\PYGZpc{}    \PYG{l+m}{0}.0    \PYG{l+m}{16}.0

    ...    wr\PYGZus{}s wr\PYGZus{}avkb wr\PYGZus{}mb\PYGZus{}s wr\PYGZus{}mrg wr\PYGZus{}cnc   wr\PYGZus{}rt
    ...    \PYG{l+m}{99}.7     \PYG{l+m}{6}.2     \PYG{l+m}{0}.6    \PYG{l+m}{35}\PYGZpc{}    \PYG{l+m}{3}.7    \PYG{l+m}{23}.7
    ...    \PYG{l+m}{14}.5    \PYG{l+m}{15}.8     \PYG{l+m}{0}.2    \PYG{l+m}{75}\PYGZpc{}    \PYG{l+m}{0}.5     \PYG{l+m}{9}.2
    ...     \PYG{l+m}{1}.0     \PYG{l+m}{4}.0     \PYG{l+m}{0}.0     \PYG{l+m}{0}\PYGZpc{}    \PYG{l+m}{0}.0     \PYG{l+m}{2}.3
    ...   \PYG{l+m}{117}.7     \PYG{l+m}{4}.0     \PYG{l+m}{0}.5     \PYG{l+m}{0}\PYGZpc{}    \PYG{l+m}{4}.1    \PYG{l+m}{35}.1

    ...              busy in\PYGZus{}prg    io\PYGZus{}s  qtime stime
    ...                \PYG{l+m}{6}\PYGZpc{}      \PYG{l+m}{0}   \PYG{l+m}{100}.6   \PYG{l+m}{23}.3   \PYG{l+m}{0}.4
    ...                \PYG{l+m}{4}\PYGZpc{}      \PYG{l+m}{0}    \PYG{l+m}{14}.9    \PYG{l+m}{8}.6   \PYG{l+m}{0}.6
    ...                \PYG{l+m}{0}\PYGZpc{}      \PYG{l+m}{0}     \PYG{l+m}{1}.1    \PYG{l+m}{1}.5   \PYG{l+m}{1}.2
    ...                \PYG{l+m}{5}\PYGZpc{}      \PYG{l+m}{0}   \PYG{l+m}{118}.5   \PYG{l+m}{34}.5   \PYG{l+m}{0}.4
\end{sphinxVerbatim}

The columns are as follows:

\#ts
\begin{quote}

This column’s contents vary depending on the tool’s aggregation mode.  In the
default mode, when each line contains information about a single disk but
possibly aggregates across several samples from that disk, this column shows the
number of samples that were included into the line of output, in \{curly braces\}.
In the example shown, each line of output aggregates \{10\} samples of
\sphinxstyleemphasis{/proc/diskstats}.

In the “all” group\sphinxhyphen{}by mode, this column shows timestamp offsets, relative to the
time the tool began aggregating or the timestamp of the previous lines printed,
depending on the mode.  The output can be confusing to explain, but it’s rather
intuitive when you see the lines appearing on your screen periodically.

Similarly, in “sample” group\sphinxhyphen{}by mode, the number indicates the total time span
that is grouped into each sample.

If you specify {\hyperref[\detokenize{mariadb-iostat:cmdoption-mariadb-iostat-show-timestamps}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}show\sphinxhyphen{}timestamps}}}}}, this field instead shows the timestamp at
which the sample was taken; if multiple timestamps are present in a single line
of output, then the first timestamp is used.
\end{quote}

device
\begin{quote}

The device name.  If there is more than one device, then instead the number
of devices aggregated into the line is shown, in \{curly braces\}.
\end{quote}

rd\_s
\begin{quote}

The average number of reads per second.  This is the number of I/O requests that
were sent to the underlying device.  This usually is a smaller number than the
number of logical IO requests made by applications.  More requests might have
been queued to the block device, but some of them usually are merged before
being sent to the disk.

This field is computed from the contents of \sphinxstyleemphasis{/proc/diskstats} as follows.  See
“KERNEL DOCUMENTATION” below for the meaning of the field numbers:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
delta\PYG{o}{[}field1\PYG{o}{]} / delta\PYG{o}{[}time\PYG{o}{]}
\end{sphinxVerbatim}
\end{quote}

rd\_avkb
\begin{quote}

The average size of the reads, in kilobytes.  This field is computed as follows:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{l+m}{2} * delta\PYG{o}{[}field3\PYG{o}{]} / delta\PYG{o}{[}field1\PYG{o}{]}
\end{sphinxVerbatim}
\end{quote}

rd\_mb\_s
\begin{quote}

The average number of megabytes read per second.  Computed as follows:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{l+m}{2} * delta\PYG{o}{[}field3\PYG{o}{]} / delta\PYG{o}{[}time\PYG{o}{]}
\end{sphinxVerbatim}
\end{quote}

rd\_mrg
\begin{quote}

The percentage of read requests that were merged together in the queue scheduler
before being sent to the physical device.  The field is computed as follows:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{l+m}{100} * delta\PYG{o}{[}field2\PYG{o}{]} / \PYG{o}{(}delta\PYG{o}{[}field2\PYG{o}{]} + delta\PYG{o}{[}field1\PYG{o}{]}\PYG{o}{)}
\end{sphinxVerbatim}
\end{quote}

rd\_cnc
\begin{quote}

The average concurrency of the read operations, as computed by Little’s Law.
This is the end\sphinxhyphen{}to\sphinxhyphen{}end concurrency on the block device, not the underlying
disk’s concurrency. It includes time spent in the queue.  The field is computed
as follows:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
delta\PYG{o}{[}field4\PYG{o}{]} / delta\PYG{o}{[}time\PYG{o}{]} / \PYG{l+m}{1000} / devices\PYGZhy{}in\PYGZhy{}group
\end{sphinxVerbatim}
\end{quote}

rd\_rt
\begin{quote}

The average response time of the read operations, in milliseconds.  This is the
end\sphinxhyphen{}to\sphinxhyphen{}end response time, including time spent in the queue.  It is the response
time that the application making I/O requests sees, not the response time of the
physical disk underlying the block device.  It is computed as follows:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
delta\PYG{o}{[}field4\PYG{o}{]} / \PYG{o}{(}delta\PYG{o}{[}field1\PYG{o}{]} + delta\PYG{o}{[}field2\PYG{o}{]}\PYG{o}{)}
\end{sphinxVerbatim}
\end{quote}

wr\_s, wr\_avkb, wr\_mb\_s, wr\_mrg, wr\_cnc, wr\_rt
\begin{quote}

These columns show write activity, and they match the corresponding columns for
read activity.
\end{quote}

busy
\begin{quote}

The fraction of wall\sphinxhyphen{}clock time that the device had at least one request in
progress; this is what iostat calls \%util, and indeed it is utilization,
depending on how you define utilization, but that is sometimes ambiguous in
common parlance.  It may also be called the residence time; the time during
which at least one request was resident in the system.  It is computed as
follows:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{l+m}{100} * delta\PYG{o}{[}field10\PYG{o}{]} / \PYG{o}{(}\PYG{l+m}{1000} * delta\PYG{o}{[}time\PYG{o}{]}\PYG{o}{)}
\end{sphinxVerbatim}

This field cannot exceed 100\% unless there is a rounding error, but it is a
common mistake to think that a device that’s busy all the time is saturated.  A
device such as a RAID volume should support concurrency higher than 1, and
solid\sphinxhyphen{}state drives can support very high concurrency.  Concurrency can grow
without bound, and is a more reliable indicator of how loaded the device really
is.
\end{quote}

in\_prg
\begin{quote}

The number of requests that were in progress.  Unlike the read and write
concurrencies, which are averages that are generated from reliable numbers, this
number is an instantaneous sample, and you can see that it might represent a
spike of requests, rather than the true long\sphinxhyphen{}term average.  If this number is
large, it essentially means that the device is heavily loaded.  It is computed
as follows:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
field9
\end{sphinxVerbatim}
\end{quote}

ios\_s
\begin{quote}

The average throughput of the physical device, in I/O operations per second
(IOPS).  This column shows the total IOPS the underlying device is handling.  It
is the sum of rd\_s and wr\_s.
\end{quote}

qtime
\begin{quote}

The average queue time; that is, time a request spends in the device scheduler
queue before being sent to the physical device.  This is an average over reads
and writes.

It is computed in a slightly complex way: the average response time seen by the
application, minus the average service time (see the description of the next
column).  This is derived from the queueing theory formula for response time, R
= W + S: response time = queue time + service time.  This is solved for W, of
course, to give W = R \sphinxhyphen{} S.  The computation follows:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
delta\PYG{o}{[}field11\PYG{o}{]} / \PYG{o}{(}delta\PYG{o}{[}field1, \PYG{l+m}{2}, \PYG{l+m}{5}, \PYG{l+m}{6}\PYG{o}{]} + delta\PYG{o}{[}field9\PYG{o}{]}\PYG{o}{)}
   \PYGZhy{} delta\PYG{o}{[}field10\PYG{o}{]} / delta\PYG{o}{[}field1, \PYG{l+m}{2}, \PYG{l+m}{5}, \PYG{l+m}{6}\PYG{o}{]}
\end{sphinxVerbatim}

See the description for \sphinxcode{\sphinxupquote{stime}} for more details and cautions.
\end{quote}

stime
\begin{quote}

The average service time; that is, the time elapsed while the physical device
processes the request, after the request finishes waiting in the queue.  This is
an average over reads and writes.  It is computed from the queueing theory
utilization formula, U = SX, solved for S.  This means that utilization divided
by throughput gives service time:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
delta\PYG{o}{[}field10\PYG{o}{]} / \PYG{o}{(}delta\PYG{o}{[}field1, \PYG{l+m}{2}, \PYG{l+m}{5}, \PYG{l+m}{6}\PYG{o}{]}\PYG{o}{)}
\end{sphinxVerbatim}

Note, however, that there can be some kernel bugs that cause field 9 in
\sphinxstyleemphasis{/proc/diskstats} to become negative, and this can cause field 10 to be wrong,
thus making the service time computation not wholly trustworthy.

Note that in the above formula we use utilization very specifically. It is a
duration, not a percentage.

You can compare the stime and qtime columns to see whether the response time for
reads and writes is spent in the queue or on the physical device.  However, you
cannot see the difference between reads and writes.  Changing the block device
scheduler algorithm might improve queue time greatly.  The default algorithm,
cfq, is very bad for servers, and should only be used on laptops and
workstations that perform tasks such as working with spreadsheets and surfing
the Internet.
\end{quote}

If you are used to using iostat, you might wonder where you can find the same
information in \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}iostat}}.  Here are two samples of output from both tools on
the same machine at the same time, for \sphinxstyleemphasis{/dev/sda}, wrapped to fit:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
     \PYG{c+c1}{\PYGZsh{}ts dev rd\PYGZus{}s rd\PYGZus{}avkb rd\PYGZus{}mb\PYGZus{}s rd\PYGZus{}mrg rd\PYGZus{}cnc   rd\PYGZus{}rt}
\PYG{l+m}{08}:50:10 sda  \PYG{l+m}{0}.0     \PYG{l+m}{0}.0     \PYG{l+m}{0}.0     \PYG{l+m}{0}\PYGZpc{}    \PYG{l+m}{0}.0     \PYG{l+m}{0}.0
\PYG{l+m}{08}:50:20 sda  \PYG{l+m}{0}.4     \PYG{l+m}{4}.0     \PYG{l+m}{0}.0     \PYG{l+m}{0}\PYGZpc{}    \PYG{l+m}{0}.0    \PYG{l+m}{15}.5
\PYG{l+m}{08}:50:30 sda  \PYG{l+m}{2}.1     \PYG{l+m}{4}.4     \PYG{l+m}{0}.0     \PYG{l+m}{0}\PYGZpc{}    \PYG{l+m}{0}.0    \PYG{l+m}{21}.1
\PYG{l+m}{08}:50:40 sda  \PYG{l+m}{2}.4     \PYG{l+m}{4}.0     \PYG{l+m}{0}.0     \PYG{l+m}{0}\PYGZpc{}    \PYG{l+m}{0}.0    \PYG{l+m}{15}.4
\PYG{l+m}{08}:50:50 sda  \PYG{l+m}{0}.1     \PYG{l+m}{4}.0     \PYG{l+m}{0}.0     \PYG{l+m}{0}\PYGZpc{}    \PYG{l+m}{0}.0    \PYG{l+m}{33}.0

             wr\PYGZus{}s wr\PYGZus{}avkb wr\PYGZus{}mb\PYGZus{}s wr\PYGZus{}mrg wr\PYGZus{}cnc   wr\PYGZus{}rt
              \PYG{l+m}{7}.7    \PYG{l+m}{25}.5     \PYG{l+m}{0}.2    \PYG{l+m}{84}\PYGZpc{}    \PYG{l+m}{0}.0     \PYG{l+m}{0}.3
             \PYG{l+m}{49}.6     \PYG{l+m}{6}.8     \PYG{l+m}{0}.3    \PYG{l+m}{41}\PYGZpc{}    \PYG{l+m}{2}.4    \PYG{l+m}{28}.8
            \PYG{l+m}{210}.1     \PYG{l+m}{5}.6     \PYG{l+m}{1}.1    \PYG{l+m}{28}\PYGZpc{}    \PYG{l+m}{7}.4    \PYG{l+m}{25}.2
            \PYG{l+m}{297}.1     \PYG{l+m}{5}.4     \PYG{l+m}{1}.6    \PYG{l+m}{26}\PYGZpc{}   \PYG{l+m}{11}.4    \PYG{l+m}{28}.3
             \PYG{l+m}{11}.9    \PYG{l+m}{11}.7     \PYG{l+m}{0}.1    \PYG{l+m}{66}\PYGZpc{}    \PYG{l+m}{0}.2     \PYG{l+m}{4}.9

                     busy  in\PYGZus{}prg   io\PYGZus{}s  qtime   stime
                       \PYG{l+m}{1}\PYGZpc{}       \PYG{l+m}{0}    \PYG{l+m}{7}.7    \PYG{l+m}{0}.1     \PYG{l+m}{0}.2
                       \PYG{l+m}{6}\PYGZpc{}       \PYG{l+m}{0}   \PYG{l+m}{50}.0   \PYG{l+m}{28}.1     \PYG{l+m}{0}.7
                      \PYG{l+m}{12}\PYGZpc{}       \PYG{l+m}{0}  \PYG{l+m}{212}.2   \PYG{l+m}{24}.8     \PYG{l+m}{0}.4
                      \PYG{l+m}{16}\PYGZpc{}       \PYG{l+m}{0}  \PYG{l+m}{299}.5   \PYG{l+m}{27}.8     \PYG{l+m}{0}.4
                       \PYG{l+m}{1}\PYGZpc{}       \PYG{l+m}{0}   \PYG{l+m}{12}.0    \PYG{l+m}{4}.7     \PYG{l+m}{0}.3

         Dev rrqm/s  wrqm/s   r/s    w/s  rMB/s  wMB/s
\PYG{l+m}{08}:50:10 sda   \PYG{l+m}{0}.00   \PYG{l+m}{41}.40  \PYG{l+m}{0}.00   \PYG{l+m}{7}.70   \PYG{l+m}{0}.00   \PYG{l+m}{0}.19
\PYG{l+m}{08}:50:20 sda   \PYG{l+m}{0}.00   \PYG{l+m}{34}.70  \PYG{l+m}{0}.40  \PYG{l+m}{49}.60   \PYG{l+m}{0}.00   \PYG{l+m}{0}.33
\PYG{l+m}{08}:50:30 sda   \PYG{l+m}{0}.00   \PYG{l+m}{83}.30  \PYG{l+m}{2}.10 \PYG{l+m}{210}.10   \PYG{l+m}{0}.01   \PYG{l+m}{1}.15
\PYG{l+m}{08}:50:40 sda   \PYG{l+m}{0}.00  \PYG{l+m}{105}.10  \PYG{l+m}{2}.40 \PYG{l+m}{297}.90   \PYG{l+m}{0}.01   \PYG{l+m}{1}.58
\PYG{l+m}{08}:50:50 sda   \PYG{l+m}{0}.00   \PYG{l+m}{22}.50  \PYG{l+m}{0}.10  \PYG{l+m}{11}.10   \PYG{l+m}{0}.00   \PYG{l+m}{0}.13

                avgrq\PYGZhy{}sz avgqu\PYGZhy{}sz  await  svctm  \PYGZpc{}util
                   \PYG{l+m}{51}.01     \PYG{l+m}{0}.02   \PYG{l+m}{2}.04   \PYG{l+m}{1}.25   \PYG{l+m}{0}.96
                   \PYG{l+m}{13}.55     \PYG{l+m}{2}.44  \PYG{l+m}{48}.76   \PYG{l+m}{1}.16   \PYG{l+m}{5}.79
                   \PYG{l+m}{11}.15     \PYG{l+m}{7}.45  \PYG{l+m}{35}.10   \PYG{l+m}{0}.55  \PYG{l+m}{11}.76
                   \PYG{l+m}{10}.81    \PYG{l+m}{11}.40  \PYG{l+m}{37}.96   \PYG{l+m}{0}.53  \PYG{l+m}{15}.97
                   \PYG{l+m}{24}.07     \PYG{l+m}{0}.17  \PYG{l+m}{15}.60   \PYG{l+m}{0}.87   \PYG{l+m}{0}.97
\end{sphinxVerbatim}

The correspondence between the columns is not one\sphinxhyphen{}to\sphinxhyphen{}one.  In particular:

rrqm/s, wrqm/s
\begin{quote}

These columns in iostat are replaced by rd\_mrg and wr\_mrg in \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}iostat}}.
\end{quote}

avgrq\sphinxhyphen{}sz
\begin{quote}

This column is in sectors in iostat, and is a combination of reads and writes.
The \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}iostat}} output breaks these out separately and shows them in kB.  You
can derive it via a weighted average of rd\_avkb and wr\_avkb in \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}iostat}}, and
then multiply by 2 to get sectors (each sector is 512 bytes).
\end{quote}

avgqu\sphinxhyphen{}sz
\begin{quote}

This column really represents concurrency at the block device scheduler.  The
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}iostat}} output shows concurrency for reads and writes separately: rd\_cnc
and wr\_cnc.
\end{quote}

await
\begin{quote}

This column is the average response time from the beginning to the end of a
request to the block device, including queue time and service time, and is not
shown in \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}iostat}}.  Instead, \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}iostat}} shows individual response times at
the disk level for reads and writes (rd\_rt and wr\_rt), as well as queue time
versus service time for reads and writes in aggregate.
\end{quote}

svctm
\begin{quote}

This column is the average service time at the disk, and is shown as stime in
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}iostat}}.
\end{quote}

\%util
\begin{quote}

This column is called busy in \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}iostat}}.  Utilization is usually defined as
the portion of time during which there was at least one active request, not as a
percentage, which is why we chose to avoid this confusing term.
\end{quote}


\section{COLLECTING DATA}
\label{\detokenize{mariadb-iostat:collecting-data}}
It is straightforward to gather a sample of data for this tool.  Files should
have this format, with a timestamp line preceding each sample of statistics:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
TS \PYGZlt{}timestamp\PYGZgt{}
\PYGZlt{}contents of /proc/diskstats\PYGZgt{}
TS \PYGZlt{}timestamp\PYGZgt{}
\PYGZlt{}contents of /proc/diskstats\PYGZgt{}
... et cetera
\end{sphinxVerbatim}

You can simply use \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}iostat}} with {\hyperref[\detokenize{mariadb-iostat:cmdoption-mariadb-iostat-save-samples}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}save\sphinxhyphen{}samples}}}}} to collect this data
for you.  If you wish to capture samples as part of some other tool, and use
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}iostat}} to analyze them, you can include a snippet of shell script such as
the following:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nv}{INTERVAL}\PYG{o}{=}\PYG{l+m}{1}
\PYG{k}{while} true\PYG{p}{;} \PYG{k}{do}
   \PYG{n+nv}{sleep}\PYG{o}{=}\PYG{k}{\PYGZdl{}(}date +\PYGZpc{}s.\PYGZpc{}N \PYG{p}{|} awk \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZob{}print }\PYG{n+nv}{\PYGZdl{}INTERVAL}\PYG{l+s+s2}{ \PYGZhy{} (\PYGZbs{}\PYGZdl{}1 \PYGZpc{} }\PYG{n+nv}{\PYGZdl{}INTERVAL}\PYG{l+s+s2}{)\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{k}{)}
   sleep \PYG{n+nv}{\PYGZdl{}sleep}
   date +\PYG{l+s+s2}{\PYGZdq{}TS \PYGZpc{}s.\PYGZpc{}N \PYGZpc{}F \PYGZpc{}T\PYGZdq{}} \PYGZgt{}\PYGZgt{} diskstats\PYGZhy{}samples.txt
   cat /proc/diskstats \PYGZgt{}\PYGZgt{} diskstats\PYGZhy{}samples.txt
\PYG{k}{done}
\end{sphinxVerbatim}


\section{KERNEL DOCUMENTATION}
\label{\detokenize{mariadb-iostat:kernel-documentation}}
This documentation supplements \sphinxhref{http://www.kernel.org/doc/Documentation/iostats.txt}{the official
documentation} on the
contents of \sphinxstyleemphasis{/proc/diskstats}.  That documentation can sometimes be difficult
to understand for those who are not familiar with Linux kernel internals.  The
contents of \sphinxstyleemphasis{/proc/diskstats} are generated by the \sphinxcode{\sphinxupquote{diskstats\_show()}} function
in the kernel source file \sphinxstyleemphasis{block/genhd.c}.

Here is a sample of \sphinxstyleemphasis{/proc/diskstats} on a recent kernel.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{l+m}{8} \PYG{l+m}{1} sda1 \PYG{l+m}{426} \PYG{l+m}{243} \PYG{l+m}{3386} \PYG{l+m}{2056} \PYG{l+m}{3} \PYG{l+m}{0} \PYG{l+m}{18} \PYG{l+m}{87} \PYG{l+m}{0} \PYG{l+m}{2135} \PYG{l+m}{2142}
\end{sphinxVerbatim}

The fields in this sample are as follows.  The first three fields are the major
and minor device numbers (8, 1), and the device name (sda1). They are followed
by 11 fields of statistics:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
The number of reads completed.  This is the number of physical reads done by the
underlying disk, not the number of reads that applications made from the block
device.  This means that 426 actual reads have completed successfully to the
disk on which \sphinxstyleemphasis{/dev/sda1} resides.  Reads are not counted until they complete.

\item {} 
The number of reads merged because they were adjacent.  In the sample, 243 reads
were merged. This means that \sphinxstyleemphasis{/dev/sda1} actually received 869 logical reads,
but sent only 426 physical reads to the underlying physical device.

\item {} 
The number of sectors read successfully.  The 426 physical reads to the disk
read 3386 sectors.  Sectors are 512 bytes, so a total of about 1.65MB have been
read from \sphinxstyleemphasis{/dev/sda1}.

\item {} 
The number of milliseconds spent reading.  This counts only reads that have
completed, not reads that are in progress.  It counts the time spent from when
requests are placed on the queue until they complete, not the time that the
underlying disk spends servicing the requests. That is, it measures the total
response time seen by applications, not disk response times.

\item {} 
Ditto for field 1, but for writes.

\item {} 
Ditto for field 2, but for writes.

\item {} 
Ditto for field 3, but for writes.

\item {} 
Ditto for field 4, but for writes.

\item {} 
The number of I/Os currently in progress, that is, they’ve been scheduled by the
queue scheduler and issued to the disk (submitted to the underlying disk’s
queue), but not yet completed.  There are bugs in some kernels that cause this
number, and thus fields 10 and 11, to be wrong sometimes.

\item {} 
The total number of milliseconds spent doing I/Os.  This is \sphinxstylestrong{not} the total
response time seen by the applications; it is the total amount of time during
which at least one I/O was in progress.  If one I/O is issued at time 100,
another comes in at 101, and both of them complete at 102, then this field
increments by 2, not 3.

\item {} 
This field counts the total response time of all I/Os.  In contrast to field 10,
it counts double when two I/Os overlap.  In our previous example, this field
would increment by 3, not 2.

\end{enumerate}


\section{OPTIONS}
\label{\detokenize{mariadb-iostat:options}}
This tool accepts additional command\sphinxhyphen{}line arguments.  Refer to the
“SYNOPSIS” and usage information for details.
\index{mariadb\sphinxhyphen{}iostat command line option@\spxentry{mariadb\sphinxhyphen{}iostat command line option}!\sphinxhyphen{}\sphinxhyphen{}columns\sphinxhyphen{}regex@\spxentry{\sphinxhyphen{}\sphinxhyphen{}columns\sphinxhyphen{}regex}}\index{\sphinxhyphen{}\sphinxhyphen{}columns\sphinxhyphen{}regex@\spxentry{\sphinxhyphen{}\sphinxhyphen{}columns\sphinxhyphen{}regex}!mariadb\sphinxhyphen{}iostat command line option@\spxentry{mariadb\sphinxhyphen{}iostat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-iostat:cmdoption-mariadb-iostat-columns-regex}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}columns\sphinxhyphen{}regex}}\sphinxcode{\sphinxupquote{}}}
type: string; default: .

Print columns that match this Perl regex.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}iostat command line option@\spxentry{mariadb\sphinxhyphen{}iostat command line option}!\sphinxhyphen{}\sphinxhyphen{}config@\spxentry{\sphinxhyphen{}\sphinxhyphen{}config}}\index{\sphinxhyphen{}\sphinxhyphen{}config@\spxentry{\sphinxhyphen{}\sphinxhyphen{}config}!mariadb\sphinxhyphen{}iostat command line option@\spxentry{mariadb\sphinxhyphen{}iostat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-iostat:cmdoption-mariadb-iostat-config}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}config}}\sphinxcode{\sphinxupquote{}}}
type: Array

Read this comma\sphinxhyphen{}separated list of config files; if specified, this must be the
first option on the command line.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}iostat command line option@\spxentry{mariadb\sphinxhyphen{}iostat command line option}!\sphinxhyphen{}\sphinxhyphen{}devices\sphinxhyphen{}regex@\spxentry{\sphinxhyphen{}\sphinxhyphen{}devices\sphinxhyphen{}regex}}\index{\sphinxhyphen{}\sphinxhyphen{}devices\sphinxhyphen{}regex@\spxentry{\sphinxhyphen{}\sphinxhyphen{}devices\sphinxhyphen{}regex}!mariadb\sphinxhyphen{}iostat command line option@\spxentry{mariadb\sphinxhyphen{}iostat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-iostat:cmdoption-mariadb-iostat-devices-regex}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}devices\sphinxhyphen{}regex}}\sphinxcode{\sphinxupquote{}}}
type: string

Print devices that match this Perl regex.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}iostat command line option@\spxentry{mariadb\sphinxhyphen{}iostat command line option}!\sphinxhyphen{}\sphinxhyphen{}group\sphinxhyphen{}by@\spxentry{\sphinxhyphen{}\sphinxhyphen{}group\sphinxhyphen{}by}}\index{\sphinxhyphen{}\sphinxhyphen{}group\sphinxhyphen{}by@\spxentry{\sphinxhyphen{}\sphinxhyphen{}group\sphinxhyphen{}by}!mariadb\sphinxhyphen{}iostat command line option@\spxentry{mariadb\sphinxhyphen{}iostat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-iostat:cmdoption-mariadb-iostat-group-by}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}group\sphinxhyphen{}by}}\sphinxcode{\sphinxupquote{}}}
type: string; default: all

Group\sphinxhyphen{}by mode: disk, sample, or all.  In \sphinxstylestrong{disk} mode, each line of output
shows one disk device, with the statistics computed since the tool started.  In
\sphinxstylestrong{sample} mode, each line of output shows one sample of statistics, with all
disks averaged together.  In \sphinxstylestrong{all} mode, each line of output shows one sample
and one disk device.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}iostat command line option@\spxentry{mariadb\sphinxhyphen{}iostat command line option}!\sphinxhyphen{}\sphinxhyphen{}headers@\spxentry{\sphinxhyphen{}\sphinxhyphen{}headers}}\index{\sphinxhyphen{}\sphinxhyphen{}headers@\spxentry{\sphinxhyphen{}\sphinxhyphen{}headers}!mariadb\sphinxhyphen{}iostat command line option@\spxentry{mariadb\sphinxhyphen{}iostat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-iostat:cmdoption-mariadb-iostat-headers}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}headers}}\sphinxcode{\sphinxupquote{}}}
type: Hash; default: group,scroll

If \sphinxcode{\sphinxupquote{group}} is present, each sample will be separated by a blank line, unless
the sample is only one line.  If \sphinxcode{\sphinxupquote{scroll}} is present, the tool will print the
headers as often as needed to prevent them from scrolling out of view. Note that
you can press the space bar, or the enter key, to reprint headers at will.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}iostat command line option@\spxentry{mariadb\sphinxhyphen{}iostat command line option}!\sphinxhyphen{}\sphinxhyphen{}help@\spxentry{\sphinxhyphen{}\sphinxhyphen{}help}}\index{\sphinxhyphen{}\sphinxhyphen{}help@\spxentry{\sphinxhyphen{}\sphinxhyphen{}help}!mariadb\sphinxhyphen{}iostat command line option@\spxentry{mariadb\sphinxhyphen{}iostat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-iostat:cmdoption-mariadb-iostat-help}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}help}}\sphinxcode{\sphinxupquote{}}}
Show help and exit.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}iostat command line option@\spxentry{mariadb\sphinxhyphen{}iostat command line option}!\sphinxhyphen{}\sphinxhyphen{}interval@\spxentry{\sphinxhyphen{}\sphinxhyphen{}interval}}\index{\sphinxhyphen{}\sphinxhyphen{}interval@\spxentry{\sphinxhyphen{}\sphinxhyphen{}interval}!mariadb\sphinxhyphen{}iostat command line option@\spxentry{mariadb\sphinxhyphen{}iostat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-iostat:cmdoption-mariadb-iostat-interval}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}interval}}\sphinxcode{\sphinxupquote{}}}
type: int; default: 1

When in interactive mode, wait N seconds before printing to the screen.
Also, how often the tool should sample \sphinxstyleemphasis{/proc/diskstats}.

The tool attempts to gather statistics exactly on even intervals of clock time.
That is, if you specify a 5\sphinxhyphen{}second interval, it will try to capture samples at
12:00:00, 12:00:05, and so on; it will not gather at 12:00:01, 12:00:06 and so
forth.

This can lead to slightly odd delays in some circumstances, because the tool
waits one full cycle before printing out the first set of lines. (Unlike iostat
and vmstat, \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}iostat}} does not start with a line representing the averages
since the computer was booted.)  Therefore, the rule has an exception to avoid
very long delays.  Suppose you specify a 10\sphinxhyphen{}second interval, but you start the
tool at 12:00:00.01.  The tool might wait until 12:00:20 to print its first
lines of output, and in the intervening 19.99 seconds, it would appear to do
nothing.

To alleviate this, the tool waits until the next even interval of time to
gather, unless more than 20\% of that interval remains.  This means the tool will
never wait more than 120\% of the sampling interval to produce output, e.g if you
start the tool at 12:00:53 with a 10\sphinxhyphen{}second sampling interval, then the first
sample will be only 7 seconds long, not 10 seconds.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}iostat command line option@\spxentry{mariadb\sphinxhyphen{}iostat command line option}!\sphinxhyphen{}\sphinxhyphen{}iterations@\spxentry{\sphinxhyphen{}\sphinxhyphen{}iterations}}\index{\sphinxhyphen{}\sphinxhyphen{}iterations@\spxentry{\sphinxhyphen{}\sphinxhyphen{}iterations}!mariadb\sphinxhyphen{}iostat command line option@\spxentry{mariadb\sphinxhyphen{}iostat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-iostat:cmdoption-mariadb-iostat-iterations}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}iterations}}\sphinxcode{\sphinxupquote{}}}
type: int

When in interactive mode, stop after N samples.  Run forever by default.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}iostat command line option@\spxentry{mariadb\sphinxhyphen{}iostat command line option}!\sphinxhyphen{}\sphinxhyphen{}sample\sphinxhyphen{}time@\spxentry{\sphinxhyphen{}\sphinxhyphen{}sample\sphinxhyphen{}time}}\index{\sphinxhyphen{}\sphinxhyphen{}sample\sphinxhyphen{}time@\spxentry{\sphinxhyphen{}\sphinxhyphen{}sample\sphinxhyphen{}time}!mariadb\sphinxhyphen{}iostat command line option@\spxentry{mariadb\sphinxhyphen{}iostat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-iostat:cmdoption-mariadb-iostat-sample-time}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}sample\sphinxhyphen{}time}}\sphinxcode{\sphinxupquote{}}}
type: int; default: 1

In \textendash{}group\sphinxhyphen{}by sample mode, include N seconds of samples per group.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}iostat command line option@\spxentry{mariadb\sphinxhyphen{}iostat command line option}!\sphinxhyphen{}\sphinxhyphen{}save\sphinxhyphen{}samples@\spxentry{\sphinxhyphen{}\sphinxhyphen{}save\sphinxhyphen{}samples}}\index{\sphinxhyphen{}\sphinxhyphen{}save\sphinxhyphen{}samples@\spxentry{\sphinxhyphen{}\sphinxhyphen{}save\sphinxhyphen{}samples}!mariadb\sphinxhyphen{}iostat command line option@\spxentry{mariadb\sphinxhyphen{}iostat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-iostat:cmdoption-mariadb-iostat-save-samples}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}save\sphinxhyphen{}samples}}\sphinxcode{\sphinxupquote{}}}
type: string

File to save diskstats samples in; these can be used for later analysis.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}iostat command line option@\spxentry{mariadb\sphinxhyphen{}iostat command line option}!\sphinxhyphen{}\sphinxhyphen{}show\sphinxhyphen{}inactive@\spxentry{\sphinxhyphen{}\sphinxhyphen{}show\sphinxhyphen{}inactive}}\index{\sphinxhyphen{}\sphinxhyphen{}show\sphinxhyphen{}inactive@\spxentry{\sphinxhyphen{}\sphinxhyphen{}show\sphinxhyphen{}inactive}!mariadb\sphinxhyphen{}iostat command line option@\spxentry{mariadb\sphinxhyphen{}iostat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-iostat:cmdoption-mariadb-iostat-show-inactive}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}show\sphinxhyphen{}inactive}}\sphinxcode{\sphinxupquote{}}}
Show inactive devices.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}iostat command line option@\spxentry{mariadb\sphinxhyphen{}iostat command line option}!\sphinxhyphen{}\sphinxhyphen{}show\sphinxhyphen{}timestamps@\spxentry{\sphinxhyphen{}\sphinxhyphen{}show\sphinxhyphen{}timestamps}}\index{\sphinxhyphen{}\sphinxhyphen{}show\sphinxhyphen{}timestamps@\spxentry{\sphinxhyphen{}\sphinxhyphen{}show\sphinxhyphen{}timestamps}!mariadb\sphinxhyphen{}iostat command line option@\spxentry{mariadb\sphinxhyphen{}iostat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-iostat:cmdoption-mariadb-iostat-show-timestamps}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}show\sphinxhyphen{}timestamps}}\sphinxcode{\sphinxupquote{}}}
Show a ‘HH:MM:SS’ timestamp in the \sphinxcode{\sphinxupquote{\#ts}} column.  If multiple timestamps are
aggregated into one line, the first timestamp is shown.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}iostat command line option@\spxentry{mariadb\sphinxhyphen{}iostat command line option}!\sphinxhyphen{}\sphinxhyphen{}version@\spxentry{\sphinxhyphen{}\sphinxhyphen{}version}}\index{\sphinxhyphen{}\sphinxhyphen{}version@\spxentry{\sphinxhyphen{}\sphinxhyphen{}version}!mariadb\sphinxhyphen{}iostat command line option@\spxentry{mariadb\sphinxhyphen{}iostat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-iostat:cmdoption-mariadb-iostat-version}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}version}}\sphinxcode{\sphinxupquote{}}}
Show version and exit.

\end{fulllineitems}



\section{ENVIRONMENT}
\label{\detokenize{mariadb-iostat:environment}}
The environment variable \sphinxcode{\sphinxupquote{PTDEBUG}} enables verbose debugging output to STDERR.
To enable debugging and capture all output to a file, run the tool like:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nv}{PTDEBUG}\PYG{o}{=}\PYG{l+m}{1} mariadb\PYGZhy{}iostat ... \PYGZgt{} FILE \PYG{l+m}{2}\PYGZgt{}\PYG{p}{\PYGZam{}}\PYG{l+m}{1}
\end{sphinxVerbatim}

Be careful: debugging output is voluminous and can generate several megabytes
of output.


\section{SYSTEM REQUIREMENTS}
\label{\detokenize{mariadb-iostat:system-requirements}}
This tool requires Perl v5.8.0 or newer and the \sphinxstyleemphasis{/proc} filesystem, unless
reading from files.


\section{AUTHORS}
\label{\detokenize{mariadb-iostat:authors}}
Cole Busby,Baron Schwartz, Brian Fraser, and Daniel Nichter


\section{ABOUT THIS MARIADB TOOL}
\label{\detokenize{mariadb-iostat:about-this-mariadb-tool}}
This tool is part of MariaDB client tools. This MariaDB Tool was forked from
Percona Toolkit’s pt\sphinxhyphen{}diskstat in August, 2019. Percona Toolkit was forked from two
projects in June, 2011: Maatkit and Aspersa.  Those projects were created by
Baron Schwartz and primarily developed by him and Daniel Nichter.


\section{COPYRIGHT, LICENSE, AND WARRANTY}
\label{\detokenize{mariadb-iostat:copyright-license-and-warranty}}
This program is copyright 2019\sphinxhyphen{}2021 MariaDB Corporation and/or its affiliates,
2011\sphinxhyphen{}2018 Percona LLC and/or its affiliates, 2010\sphinxhyphen{}2011 Baron Schwartz.

THIS PROGRAM IS PROVIDED “AS IS” AND WITHOUT ANY EXPRESS OR IMPLIED
WARRANTIES, INCLUDING, WITHOUT LIMITATION, THE IMPLIED WARRANTIES OF
MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.

This program is free software; you can redistribute it and/or modify it under
the terms of the GNU General Public License as published by the Free Software
Foundation, version 2; OR the Perl Artistic License.  On UNIX and similar
systems, you can issue \textasciigrave{}man perlgpl’ or \textasciigrave{}man perlartistic’ to read these
licenses.

You should have received a copy of the GNU General Public License along with
this program; if not, write to the Free Software Foundation, Inc., 59 Temple
Place, Suite 330, Boston, MA  02111\sphinxhyphen{}1307  USA.


\section{VERSION}
\label{\detokenize{mariadb-iostat:version}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}iostat}} 6.0.0rc


\chapter{\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}kill}}}
\label{\detokenize{mariadb-kill:mariadb-kill}}\label{\detokenize{mariadb-kill::doc}}

\section{NAME}
\label{\detokenize{mariadb-kill:name}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}kill}} \sphinxhyphen{} Kill MariaDB queries that match certain criteria.


\section{SYNOPSIS}
\label{\detokenize{mariadb-kill:synopsis}}

\subsection{Usage}
\label{\detokenize{mariadb-kill:usage}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{mariadb}\PYG{o}{\PYGZhy{}}\PYG{n}{kill} \PYG{p}{[}\PYG{n}{OPTIONS}\PYG{p}{]} \PYG{p}{[}\PYG{n}{DSN}\PYG{p}{]}
\end{sphinxVerbatim}

\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}kill}} kills MariaDB connections.  \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}kill}} connects to MariaDB and gets queries
from SHOW PROCESSLIST if no FILE is given.  Else, it reads queries from one
or more FILE which contains the output of SHOW PROCESSLIST.  If FILE is \sphinxhyphen{},
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}kill}} reads from STDIN.

Kill queries running longer than 60s:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
mariadb\PYGZhy{}kill \PYGZhy{}\PYGZhy{}busy\PYGZhy{}time \PYG{l+m}{60} \PYGZhy{}\PYGZhy{}kill
\end{sphinxVerbatim}

Print, do not kill, queries running longer than 60s:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
mariadb\PYGZhy{}kill \PYGZhy{}\PYGZhy{}busy\PYGZhy{}time \PYG{l+m}{60} \PYGZhy{}\PYGZhy{}print
\end{sphinxVerbatim}

Check for sleeping processes and kill them all every 10s:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
mariadb\PYGZhy{}kill \PYGZhy{}\PYGZhy{}match\PYGZhy{}command Sleep \PYGZhy{}\PYGZhy{}kill \PYGZhy{}\PYGZhy{}victims all \PYGZhy{}\PYGZhy{}interval \PYG{l+m}{10}
\end{sphinxVerbatim}

Print all login processes:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
mariadb\PYGZhy{}kill \PYGZhy{}\PYGZhy{}match\PYGZhy{}state login \PYGZhy{}\PYGZhy{}print \PYGZhy{}\PYGZhy{}victims all
\end{sphinxVerbatim}

See which queries in the processlist right now would match:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
mariadb \PYGZhy{}e \PYG{l+s+s2}{\PYGZdq{}SHOW PROCESSLIST\PYGZdq{}} \PYGZgt{} proclist.txt
mariadb\PYGZhy{}kill \PYGZhy{}\PYGZhy{}test\PYGZhy{}matching proclist.txt \PYGZhy{}\PYGZhy{}busy\PYGZhy{}time \PYG{l+m}{60} \PYGZhy{}\PYGZhy{}print
\end{sphinxVerbatim}


\section{RISKS}
\label{\detokenize{mariadb-kill:risks}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}kill}} is mature, proven in the real world, and well tested,
but all database tools can pose a risk to the system and the database
server.  Before using this tool, please:
\begin{itemize}
\item {} 
Read the tool’s documentation

\item {} 
Review the tool’s known “BUGS”

\item {} 
Test the tool on a non\sphinxhyphen{}production server

\item {} 
Backup your production server and verify the backups

\end{itemize}


\section{DESCRIPTION}
\label{\detokenize{mariadb-kill:description}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}kill}} captures queries from SHOW PROCESSLIST, filters them, and then either
kills or prints them.  This is also known as a “slow query sniper” in some
circles.  The idea is to watch for queries that might be consuming too many
resources, and kill them.

For brevity, we talk about killing queries, but they may just be printed
(or some other future action) depending on what options are given.

Normally \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}kill}} connects to MariaDB to get queries from SHOW PROCESSLIST.
Alternatively, it can read SHOW PROCESSLIST output from files.  In this case,
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}kill}} does not connect to MariaDB and {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-kill}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}kill}}}}} has no effect.  You should
use {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-print}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}print}}}}} instead when reading files.  The ability to read a file
with {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-test-matching}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}test\sphinxhyphen{}matching}}}}} allows you to capture SHOW PROCESSLIST and test it
later with \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}kill}} to make sure that your matches kill the proper queries.
There are a lot of special rules to follow, such as “don’t kill replication
threads,” so be careful not to kill something important!

Two important options to know are {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-busy-time}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}busy\sphinxhyphen{}time}}}}} and {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-victims}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}victims}}}}}.
First, whereas most match/filter options match their corresponding value from
SHOW PROCESSLIST (e.g. {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-match-command}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}command}}}}} matches a query’s Command value),
the Time value is matched by {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-busy-time}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}busy\sphinxhyphen{}time}}}}}.  See also {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-interval}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}interval}}}}}.

Second, {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-victims}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}victims}}}}} controls which matching queries from each class are
killed.  By default, the matching query with the highest Time value is killed
(the oldest query).  See the next section, “GROUP, MATCH AND KILL”,
for more details.

Usually you need to specify at least one \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}match}} option, else no
queries will match.  Or, you can specify {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-match-all}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}all}}}}} to match all queries
that aren’t ignored by an \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}ignore}} option.


\section{GROUP, MATCH AND KILL}
\label{\detokenize{mariadb-kill:group-match-and-kill}}
Queries pass through several steps to determine which exactly will be killed
(or printed\textendash{}whatever action is specified).  Understanding these steps will
help you match precisely the queries you want.

The first step is grouping queries into classes.  The {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-group-by}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}group\sphinxhyphen{}by}}}}} option
controls grouping.  By default, this option has no value so all queries are
grouped into one default class.  All types of matching and filtering
(the next step) are applied per\sphinxhyphen{}class.  Therefore, you may need to group
queries in order to match/filter some classes but not others.

The second step is matching.  Matching implies filtering since if a query
doesn’t match some criteria, it is removed from its class.
Matching happens for each class.  First, queries are filtered from their
class by the various \sphinxcode{\sphinxupquote{Query Matches}} options like {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-match-user}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}user}}}}}.
Then, entire classes are filtered by the various \sphinxcode{\sphinxupquote{Class Matches}} options
like {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-query-count}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}query\sphinxhyphen{}count}}}}}.

The third step is victim selection, that is, which matching queries in each
class to kill.  This is controlled by the {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-victims}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}victims}}}}} option.  Although
many queries in a class may match, you may only want to kill the oldest
query, or all queries, etc.

The forth and final step is to take some action on all matching queries
from all classes.  The \sphinxcode{\sphinxupquote{Actions}} options specify which actions will be
taken.  At this step, there are no more classes, just a single list of
queries to kill, print, etc.

\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}kill}} will kill all the queries matching ANY of the specified criteria (logical OR).
For example, using:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZhy{}\PYGZhy{}busy\PYGZhy{}time \PYG{l+m}{114} \PYGZhy{}\PYGZhy{}match\PYGZhy{}command \PYG{l+s+s1}{\PYGZsq{}Query|Execute\PYGZsq{}}
\end{sphinxVerbatim}

will kill all queries having busy\sphinxhyphen{}time \textgreater{} 114 \sphinxcode{\sphinxupquote{OR}} where the command is \sphinxcode{\sphinxupquote{Query}} or \sphinxcode{\sphinxupquote{Execute}}

If you want to kill only the queries where \sphinxcode{\sphinxupquote{busy\sphinxhyphen{}time \textasciigrave{}\textasciigrave{} 114\textgreater{} \textasciigrave{}\textasciigrave{}AND}} the command is Query or
Execute, you need to use “\textendash{}kill\sphinxhyphen{}busy\sphinxhyphen{}commands:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZhy{}\PYGZhy{}busy\PYGZhy{}time \PYG{l+m}{114} \PYGZhy{}\PYGZhy{}kill\PYGZhy{}busy\PYGZhy{}commands \PYG{l+s+s1}{\PYGZsq{}Query|Execute\PYGZsq{}}
\end{sphinxVerbatim}


\section{OUTPUT}
\label{\detokenize{mariadb-kill:output}}
If only {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-kill}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}kill}}}}} is given, then there is no output.  If only
{\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-print}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}print}}}}} is given, then a timestamped KILL statement if printed
for every query that would have been killed, like:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} 2009\PYGZhy{}07\PYGZhy{}15T15:04:01 KILL 8 (Query 42 sec) SELECT * FROM huge\PYGZus{}table}
\end{sphinxVerbatim}

The line shows a timestamp, the query’s Id (8), its Time (42 sec) and its
Info (usually the query SQL).

If both {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-kill}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}kill}}}}} and {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-print}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}print}}}}} are given, then matching queries are
killed and a line for each like the one above is printed.

Any command executed by {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-execute-command}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}execute\sphinxhyphen{}command}}}}} is responsible for its own
output and logging.  After being executed, \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}kill}} has no control or interaction
with the command.


\section{OPTIONS}
\label{\detokenize{mariadb-kill:options}}
Specify at least one of {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-kill}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}kill}}}}}, {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-kill-query}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}kill\sphinxhyphen{}query}}}}}, {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-print}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}print}}}}}, {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-execute-command}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}execute\sphinxhyphen{}command}}}}} or {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-stop}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}stop}}}}}.

{\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-any-busy-time}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}any\sphinxhyphen{}busy\sphinxhyphen{}time}}}}} and {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-each-busy-time}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}each\sphinxhyphen{}busy\sphinxhyphen{}time}}}}} are mutually exclusive.

{\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-kill}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}kill}}}}} and {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-kill-query}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}kill\sphinxhyphen{}query}}}}} are mutually exclusive.

{\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-daemonize}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}daemonize}}}}} and {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-test-matching}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}test\sphinxhyphen{}matching}}}}} are mutually exclusive.

This tool accepts additional command\sphinxhyphen{}line arguments.  Refer to the
“SYNOPSIS” and usage information for details.
\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass}}\index{\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-ask-pass}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass}}\sphinxcode{\sphinxupquote{}}}
Prompt for a password when connecting to MariaDB.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}charset@\spxentry{\sphinxhyphen{}\sphinxhyphen{}charset}}\index{\sphinxhyphen{}\sphinxhyphen{}charset@\spxentry{\sphinxhyphen{}\sphinxhyphen{}charset}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-charset}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}charset}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}A; type: string

Default character set.  If the value is utf8, sets Perl’s binmode on
STDOUT to utf8, passes the mysql\_enable\_utf8 option to DBD::mysql, and runs SET
NAMES UTF8 after connecting to MariaDB.  Any other value sets binmode on STDOUT
without the utf8 layer, and runs SET NAMES after connecting to MariaDB.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}config@\spxentry{\sphinxhyphen{}\sphinxhyphen{}config}}\index{\sphinxhyphen{}\sphinxhyphen{}config@\spxentry{\sphinxhyphen{}\sphinxhyphen{}config}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-config}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}config}}\sphinxcode{\sphinxupquote{}}}
type: Array

Read this comma\sphinxhyphen{}separated list of config files; if specified, this must be the
first option on the command line.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}create\sphinxhyphen{}log\sphinxhyphen{}table@\spxentry{\sphinxhyphen{}\sphinxhyphen{}create\sphinxhyphen{}log\sphinxhyphen{}table}}\index{\sphinxhyphen{}\sphinxhyphen{}create\sphinxhyphen{}log\sphinxhyphen{}table@\spxentry{\sphinxhyphen{}\sphinxhyphen{}create\sphinxhyphen{}log\sphinxhyphen{}table}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-create-log-table}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}create\sphinxhyphen{}log\sphinxhyphen{}table}}\sphinxcode{\sphinxupquote{}}}
Create the {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-log-dsn}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}log\sphinxhyphen{}dsn}}}}} table if it does not exist.

This option causes the table specified by {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-log-dsn}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}log\sphinxhyphen{}dsn}}}}} to be created with the
default structure shown in the documentation for that option.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}daemonize@\spxentry{\sphinxhyphen{}\sphinxhyphen{}daemonize}}\index{\sphinxhyphen{}\sphinxhyphen{}daemonize@\spxentry{\sphinxhyphen{}\sphinxhyphen{}daemonize}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-daemonize}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}daemonize}}\sphinxcode{\sphinxupquote{}}}
Fork to the background and detach from the shell.  POSIX operating systems
only.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}database@\spxentry{\sphinxhyphen{}\sphinxhyphen{}database}}\index{\sphinxhyphen{}\sphinxhyphen{}database@\spxentry{\sphinxhyphen{}\sphinxhyphen{}database}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-database}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}database}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}D; type: string

The database to use for the connection.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}defaults\sphinxhyphen{}file@\spxentry{\sphinxhyphen{}\sphinxhyphen{}defaults\sphinxhyphen{}file}}\index{\sphinxhyphen{}\sphinxhyphen{}defaults\sphinxhyphen{}file@\spxentry{\sphinxhyphen{}\sphinxhyphen{}defaults\sphinxhyphen{}file}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-defaults-file}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}defaults\sphinxhyphen{}file}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}F; type: string

Only read MariaDB options from the given file.  You must give an absolute
pathname.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}filter@\spxentry{\sphinxhyphen{}\sphinxhyphen{}filter}}\index{\sphinxhyphen{}\sphinxhyphen{}filter@\spxentry{\sphinxhyphen{}\sphinxhyphen{}filter}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-filter}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}filter}}\sphinxcode{\sphinxupquote{}}}
type: string

Discard events for which this Perl code doesn’t return true.

This option is a string of Perl code or a file containing Perl code that gets
compiled into a subroutine with one argument: \$event.  This is a hashref.
If the given value is a readable file, then \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}kill}} reads the entire
file and uses its contents as the code.  The file should not contain
a shebang (\#!/usr/bin/perl) line.

If the code returns true, the chain of callbacks continues; otherwise it ends.
The code is the last statement in the subroutine other than \sphinxcode{\sphinxupquote{return \$event}}.
The subroutine template is:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
sub \PYG{o}{\PYGZob{}} \PYG{n+nv}{\PYGZdl{}event} \PYG{o}{=} shift\PYG{p}{;} filter \PYG{o}{\PYGZam{}\PYGZam{}} \PYG{k}{return} \PYG{n+nv}{\PYGZdl{}event}\PYG{p}{;} \PYG{o}{\PYGZcb{}}
\end{sphinxVerbatim}

Filters given on the command line are wrapped inside parentheses like like
\sphinxcode{\sphinxupquote{( filter )}}.  For complex, multi\sphinxhyphen{}line filters, you must put the code inside
a file so it will not be wrapped inside parentheses.  Either way, the filter
must produce syntactically valid code given the template.  For example, an
if\sphinxhyphen{}else branch given on the command line would not be valid:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZhy{}\PYGZhy{}filter \PYG{l+s+s1}{\PYGZsq{}if () \PYGZob{} \PYGZcb{} else \PYGZob{} \PYGZcb{}\PYGZsq{}}  \PYG{c+c1}{\PYGZsh{} WRONG}
\end{sphinxVerbatim}

Since it’s given on the command line, the if\sphinxhyphen{}else branch would be wrapped inside
parentheses which is not syntactically valid.  So to accomplish something more
complex like this would require putting the code in a file, for example
filter.txt:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
my \PYG{n+nv}{\PYGZdl{}event\PYGZus{}ok}\PYG{p}{;} \PYG{k}{if} \PYG{o}{(}...\PYG{o}{)} \PYG{o}{\PYGZob{}} \PYG{n+nv}{\PYGZdl{}event\PYGZus{}ok}\PYG{o}{=}\PYG{l+m}{1}\PYG{p}{;} \PYG{o}{\PYGZcb{}} \PYG{k}{else} \PYG{o}{\PYGZob{}} \PYG{n+nv}{\PYGZdl{}event\PYGZus{}ok}\PYG{o}{=}\PYG{l+m}{0}\PYG{p}{;} \PYG{o}{\PYGZcb{}} \PYG{n+nv}{\PYGZdl{}event\PYGZus{}ok}
\end{sphinxVerbatim}

Then specify \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}filter filter.txt}} to read the code from filter.txt.

If the filter code won’t compile, \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}kill}} will die with an error.
If the filter code does compile, an error may still occur at runtime if the
code tries to do something wrong (like pattern match an undefined value).
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}kill}} does not provide any safeguards so code carefully!

It is permissible for the code to have side effects (to alter \sphinxcode{\sphinxupquote{\$event}}).

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}group\sphinxhyphen{}by@\spxentry{\sphinxhyphen{}\sphinxhyphen{}group\sphinxhyphen{}by}}\index{\sphinxhyphen{}\sphinxhyphen{}group\sphinxhyphen{}by@\spxentry{\sphinxhyphen{}\sphinxhyphen{}group\sphinxhyphen{}by}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-group-by}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}group\sphinxhyphen{}by}}\sphinxcode{\sphinxupquote{}}}
type: string

Apply matches to each class of queries grouped by this SHOW PROCESSLIST column.
In addition to the basic columns of SHOW PROCESSLIST (user, host, command,
state, etc.), queries can be matched by \sphinxcode{\sphinxupquote{fingerprint}} which abstracts the
SQL query in the \sphinxcode{\sphinxupquote{Info}} column.

By default, queries are not grouped, so matches and actions apply to all
queries.  Grouping allows matches and actions to apply to classes of
similar queries, if any queries in the class match.

For example, detecting cache stampedes (see \sphinxcode{\sphinxupquote{all\sphinxhyphen{}but\sphinxhyphen{}oldest}} under
{\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-victims}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}victims}}}}} for an explanation of that term) requires that queries are
grouped by the \sphinxcode{\sphinxupquote{arg}} attribute.  This creates classes of identical queries
(stripped of comments).  So queries \sphinxcode{\sphinxupquote{"SELECT c FROM t WHERE id=1"}} and
\sphinxcode{\sphinxupquote{"SELECT c FROM t WHERE id=1"}} are grouped into the same class, but
query c\textless{}”SELECT c FROM t WHERE id=3”\textgreater{} is not identical to the first two
queries so it is grouped into another class. Then when {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-victims}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}victims}}}}}
\sphinxcode{\sphinxupquote{all\sphinxhyphen{}but\sphinxhyphen{}oldest}} is specified, all but the oldest query in each class is
killed for each class of queries that matches the match criteria.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}help@\spxentry{\sphinxhyphen{}\sphinxhyphen{}help}}\index{\sphinxhyphen{}\sphinxhyphen{}help@\spxentry{\sphinxhyphen{}\sphinxhyphen{}help}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-help}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}help}}\sphinxcode{\sphinxupquote{}}}
Show help and exit.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}host@\spxentry{\sphinxhyphen{}\sphinxhyphen{}host}}\index{\sphinxhyphen{}\sphinxhyphen{}host@\spxentry{\sphinxhyphen{}\sphinxhyphen{}host}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-host}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}host}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}h; type: string; default: localhost

Connect to host.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}interval@\spxentry{\sphinxhyphen{}\sphinxhyphen{}interval}}\index{\sphinxhyphen{}\sphinxhyphen{}interval@\spxentry{\sphinxhyphen{}\sphinxhyphen{}interval}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-interval}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}interval}}\sphinxcode{\sphinxupquote{}}}
type: time

How often to check for queries to kill.  If {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-busy-time}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}busy\sphinxhyphen{}time}}}}} is not given,
then the default interval is 30 seconds.  Else the default is half as often
as {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-busy-time}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}busy\sphinxhyphen{}time}}}}}.  If both {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-interval}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}interval}}}}} and {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-busy-time}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}busy\sphinxhyphen{}time}}}}} are given,
then the explicit {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-interval}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}interval}}}}} value is used.

See also {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-run-time}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time}}}}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}log@\spxentry{\sphinxhyphen{}\sphinxhyphen{}log}}\index{\sphinxhyphen{}\sphinxhyphen{}log@\spxentry{\sphinxhyphen{}\sphinxhyphen{}log}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-log}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}log}}\sphinxcode{\sphinxupquote{}}}
type: string

Print all output to this file when daemonized.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}log\sphinxhyphen{}dsn@\spxentry{\sphinxhyphen{}\sphinxhyphen{}log\sphinxhyphen{}dsn}}\index{\sphinxhyphen{}\sphinxhyphen{}log\sphinxhyphen{}dsn@\spxentry{\sphinxhyphen{}\sphinxhyphen{}log\sphinxhyphen{}dsn}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-log-dsn}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}log\sphinxhyphen{}dsn}}\sphinxcode{\sphinxupquote{}}}
type: DSN

Store each query killed in this DSN.

The argument specifies a table to store all killed queries.  The DSN
passed in must have the databse (D) and table (t) options. The
table must have at least the following columns.  You can add more columns for
your own special purposes, but they won’t be used by \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}kill}}.  The
following CREATE TABLE definition is also used for {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-create-log-table}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}create\sphinxhyphen{}log\sphinxhyphen{}table}}}}}.
MAGIC\_create\_log\_table:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{CREATE} \PYG{k}{TABLE} \PYG{n}{kill\PYGZus{}log} \PYG{p}{(}
   \PYG{n}{kill\PYGZus{}id}     \PYG{n+nb}{int}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{)} \PYG{n}{unsigned} \PYG{k}{NOT} \PYG{k}{NULL} \PYG{n}{AUTO\PYGZus{}INCREMENT}\PYG{p}{,}
   \PYG{n}{server\PYGZus{}id}   \PYG{n+nb}{bigint}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)} \PYG{k}{NOT} \PYG{k}{NULL} \PYG{k}{DEFAULT} \PYG{l+s+s1}{\PYGZsq{}0\PYGZsq{}}\PYG{p}{,}
   \PYG{k}{timestamp}   \PYG{n}{DATETIME}\PYG{p}{,}
   \PYG{n}{reason}      \PYG{n+nb}{TEXT}\PYG{p}{,}
   \PYG{n}{kill\PYGZus{}error}  \PYG{n+nb}{TEXT}\PYG{p}{,}
   \PYG{n}{Id}          \PYG{n+nb}{bigint}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)} \PYG{k}{NOT} \PYG{k}{NULL} \PYG{k}{DEFAULT} \PYG{l+s+s1}{\PYGZsq{}0\PYGZsq{}}\PYG{p}{,}
   \PYG{k}{User}        \PYG{n+nb}{varchar}\PYG{p}{(}\PYG{l+m+mi}{16}\PYG{p}{)} \PYG{k}{NOT} \PYG{k}{NULL} \PYG{k}{DEFAULT} \PYG{l+s+s1}{\PYGZsq{}\PYGZsq{}}\PYG{p}{,}
   \PYG{k}{Host}        \PYG{n+nb}{varchar}\PYG{p}{(}\PYG{l+m+mi}{64}\PYG{p}{)} \PYG{k}{NOT} \PYG{k}{NULL} \PYG{k}{DEFAULT} \PYG{l+s+s1}{\PYGZsq{}\PYGZsq{}}\PYG{p}{,}
   \PYG{n}{db}          \PYG{n+nb}{varchar}\PYG{p}{(}\PYG{l+m+mi}{64}\PYG{p}{)} \PYG{k}{DEFAULT} \PYG{k}{NULL}\PYG{p}{,}
   \PYG{n}{Command}     \PYG{n+nb}{varchar}\PYG{p}{(}\PYG{l+m+mi}{16}\PYG{p}{)} \PYG{k}{NOT} \PYG{k}{NULL} \PYG{k}{DEFAULT} \PYG{l+s+s1}{\PYGZsq{}\PYGZsq{}}\PYG{p}{,}
   \PYG{k}{Time}        \PYG{n+nb}{int}\PYG{p}{(}\PYG{l+m+mi}{7}\PYG{p}{)} \PYG{k}{NOT} \PYG{k}{NULL} \PYG{k}{DEFAULT} \PYG{l+s+s1}{\PYGZsq{}0\PYGZsq{}}\PYG{p}{,}
   \PYG{k}{State}       \PYG{n+nb}{varchar}\PYG{p}{(}\PYG{l+m+mi}{64}\PYG{p}{)} \PYG{k}{DEFAULT} \PYG{k}{NULL}\PYG{p}{,}
   \PYG{n}{Info}        \PYG{n}{longtext}\PYG{p}{,}
   \PYG{n}{Time\PYGZus{}ms}     \PYG{n+nb}{bigint}\PYG{p}{(}\PYG{l+m+mi}{21}\PYG{p}{)} \PYG{k}{DEFAULT} \PYG{l+s+s1}{\PYGZsq{}0\PYGZsq{}}\PYG{p}{,} \PYG{o}{\PYGZsh{}} \PYG{n}{NOTE}\PYG{p}{,} \PYG{n}{TODO}\PYG{p}{:} \PYG{n}{currently} \PYG{k}{not} \PYG{n}{used}
   \PYG{k}{PRIMARY} \PYG{k}{KEY} \PYG{p}{(}\PYG{n}{kill\PYGZus{}id}\PYG{p}{)}
\PYG{p}{)} \PYG{k}{DEFAULT} \PYG{n}{CHARSET}\PYG{o}{=}\PYG{n}{utf8}
\end{sphinxVerbatim}

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}password@\spxentry{\sphinxhyphen{}\sphinxhyphen{}password}}\index{\sphinxhyphen{}\sphinxhyphen{}password@\spxentry{\sphinxhyphen{}\sphinxhyphen{}password}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-password}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}password}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}p; type: string

Password to use when connecting.
If password contains commas they must be escaped with a backslash: “exam,ple”

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}pid@\spxentry{\sphinxhyphen{}\sphinxhyphen{}pid}}\index{\sphinxhyphen{}\sphinxhyphen{}pid@\spxentry{\sphinxhyphen{}\sphinxhyphen{}pid}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-pid}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}pid}}\sphinxcode{\sphinxupquote{}}}
type: string

Create the given PID file.  The tool won’t start if the PID file already
exists and the PID it contains is different than the current PID.  However,
if the PID file exists and the PID it contains is no longer running, the
tool will overwrite the PID file with the current PID.  The PID file is
removed automatically when the tool exits.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}port@\spxentry{\sphinxhyphen{}\sphinxhyphen{}port}}\index{\sphinxhyphen{}\sphinxhyphen{}port@\spxentry{\sphinxhyphen{}\sphinxhyphen{}port}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-port}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}port}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}P; type: int

Port number to use for connection.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}query\sphinxhyphen{}id@\spxentry{\sphinxhyphen{}\sphinxhyphen{}query\sphinxhyphen{}id}}\index{\sphinxhyphen{}\sphinxhyphen{}query\sphinxhyphen{}id@\spxentry{\sphinxhyphen{}\sphinxhyphen{}query\sphinxhyphen{}id}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-query-id}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}query\sphinxhyphen{}id}}\sphinxcode{\sphinxupquote{}}}
Prints an ID of the query that was just killed. This is
equivalent to the “ID” output of pt\sphinxhyphen{}query\sphinxhyphen{}digest. This allows
cross\sphinxhyphen{}referencing the output of both tools.

Example:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
Query ID 0xE9800998ECF8427E
\end{sphinxVerbatim}

Note that this is a digest (or hash) of the query’s “fingerprint”,
so queries of the same form but with different values will have the same ID.
See pt\sphinxhyphen{}query\sphinxhyphen{}digest for more information.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}rds@\spxentry{\sphinxhyphen{}\sphinxhyphen{}rds}}\index{\sphinxhyphen{}\sphinxhyphen{}rds@\spxentry{\sphinxhyphen{}\sphinxhyphen{}rds}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-rds}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}rds}}\sphinxcode{\sphinxupquote{}}}
Denotes the instance in question is on Amazon RDS. By default \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}kill}} runs
the MariaDB command “kill” for {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-kill}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}kill}}}}} and “kill query” {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-kill-query}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}kill\sphinxhyphen{}query}}}}}.
On RDS these two commands are not available and are replaced by function calls.
This option modifies {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-kill}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}kill}}}}} to use “CALL mysql.rds\_kill(thread\sphinxhyphen{}id)” instead
and {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-kill-query}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}kill\sphinxhyphen{}query}}}}} to use “CALL mysql.rds\_kill\_query(thread\sphinxhyphen{}id)”

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time@\spxentry{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time}}\index{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time@\spxentry{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-run-time}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time}}\sphinxcode{\sphinxupquote{}}}
type: time

How long to run before exiting.  By default \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}kill}} runs forever, or until
its process is killed or stopped by the creation of a {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-sentinel}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}sentinel}}}}} file.
If this option is specified, \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}kill}} runs for the specified amount of time
and sleeps {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-interval}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}interval}}}}} seconds between each check of the PROCESSLIST.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}sentinel@\spxentry{\sphinxhyphen{}\sphinxhyphen{}sentinel}}\index{\sphinxhyphen{}\sphinxhyphen{}sentinel@\spxentry{\sphinxhyphen{}\sphinxhyphen{}sentinel}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-sentinel}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}sentinel}}\sphinxcode{\sphinxupquote{}}}
type: string; default: /tmp/mariadb\sphinxhyphen{}kill\sphinxhyphen{}sentinel

Exit if this file exists.

The presence of the file specified by {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-sentinel}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}sentinel}}}}} will cause all
running instances of \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}kill}} to exit.  You might find this handy to stop cron
jobs gracefully if necessary.  See also {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-stop}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}stop}}}}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}user@\spxentry{\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}user}}\index{\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}user@\spxentry{\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}user}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-slave-user}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}user}}\sphinxcode{\sphinxupquote{}}}
type: string

Sets the user to be used to connect to the slaves.
This parameter allows you to have a different user with less privileges on the
slaves but that user must exist on all slaves.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}password@\spxentry{\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}password}}\index{\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}password@\spxentry{\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}password}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-slave-password}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}password}}\sphinxcode{\sphinxupquote{}}}
type: string

Sets the password to be used to connect to the slaves.
It can be used with \textendash{}slave\sphinxhyphen{}user and the password for the user must be the same
on all slaves.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}set\sphinxhyphen{}vars@\spxentry{\sphinxhyphen{}\sphinxhyphen{}set\sphinxhyphen{}vars}}\index{\sphinxhyphen{}\sphinxhyphen{}set\sphinxhyphen{}vars@\spxentry{\sphinxhyphen{}\sphinxhyphen{}set\sphinxhyphen{}vars}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-set-vars}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}set\sphinxhyphen{}vars}}\sphinxcode{\sphinxupquote{}}}
type: Array

Set the MariaDB variables in this comma\sphinxhyphen{}separated list of \sphinxcode{\sphinxupquote{variable=value}} pairs.

By default, the tool sets:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nv}{wait\PYGZus{}timeout}\PYG{o}{=}\PYG{l+m}{10000}
\end{sphinxVerbatim}

Variables specified on the command line override these defaults.  For
example, specifying \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}set\sphinxhyphen{}vars wait\_timeout=500}} overrides the defaultvalue of \sphinxcode{\sphinxupquote{10000}}.

The tool prints a warning and continues if a variable cannot be set.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}socket@\spxentry{\sphinxhyphen{}\sphinxhyphen{}socket}}\index{\sphinxhyphen{}\sphinxhyphen{}socket@\spxentry{\sphinxhyphen{}\sphinxhyphen{}socket}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-socket}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}socket}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}S; type: string

Socket file to use for connection.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}stop@\spxentry{\sphinxhyphen{}\sphinxhyphen{}stop}}\index{\sphinxhyphen{}\sphinxhyphen{}stop@\spxentry{\sphinxhyphen{}\sphinxhyphen{}stop}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-stop}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}stop}}\sphinxcode{\sphinxupquote{}}}
Stop running instances by creating the {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-sentinel}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}sentinel}}}}} file.

Causes \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}kill}} to create the sentinel file specified by {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-sentinel}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}sentinel}}}}} and
exit.  This should have the effect of stopping all running instances which are
watching the same sentinel file.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}{[}no{]}strip\sphinxhyphen{}comments@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}strip\sphinxhyphen{}comments}}\index{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}strip\sphinxhyphen{}comments@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}strip\sphinxhyphen{}comments}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-0}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}}}\sphinxcode{\sphinxupquote{{[}no{]}strip\sphinxhyphen{}comments}}}
default: yes

Remove SQL comments from queries in the Info column of the PROCESSLIST.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}user@\spxentry{\sphinxhyphen{}\sphinxhyphen{}user}}\index{\sphinxhyphen{}\sphinxhyphen{}user@\spxentry{\sphinxhyphen{}\sphinxhyphen{}user}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-user}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}user}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}u; type: string

User for login if not current user.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}version@\spxentry{\sphinxhyphen{}\sphinxhyphen{}version}}\index{\sphinxhyphen{}\sphinxhyphen{}version@\spxentry{\sphinxhyphen{}\sphinxhyphen{}version}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-version}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}version}}\sphinxcode{\sphinxupquote{}}}
Show version and exit.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}victims@\spxentry{\sphinxhyphen{}\sphinxhyphen{}victims}}\index{\sphinxhyphen{}\sphinxhyphen{}victims@\spxentry{\sphinxhyphen{}\sphinxhyphen{}victims}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-victims}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}victims}}\sphinxcode{\sphinxupquote{}}}
type: string; default: oldest

Which of the matching queries in each class will be killed.  After classes
have been matched/filtered, this option specifies which of the matching
queries in each class will be killed (or printed, etc.).  The following
values are possible:

oldest
\begin{quote}

Only kill the single oldest query.  This is to prevent killing queries that
aren’t really long\sphinxhyphen{}running, they’re just long\sphinxhyphen{}waiting.  This sorts matching
queries by Time and kills the one with the highest Time value.
\end{quote}

all
\begin{quote}

Kill all queries in the class.
\end{quote}

all\sphinxhyphen{}but\sphinxhyphen{}oldest
\begin{quote}

Kill all but the oldest query.  This is the inverse of the \sphinxcode{\sphinxupquote{oldest}} value.

This value can be used to prevent “cache stampedes”, the condition where
several identical queries are executed and create a backlog while the first
query attempts to finish.  Since all queries are identical, all but the first
query are killed so that it can complete and populate the cache.
\end{quote}

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}wait\sphinxhyphen{}after\sphinxhyphen{}kill@\spxentry{\sphinxhyphen{}\sphinxhyphen{}wait\sphinxhyphen{}after\sphinxhyphen{}kill}}\index{\sphinxhyphen{}\sphinxhyphen{}wait\sphinxhyphen{}after\sphinxhyphen{}kill@\spxentry{\sphinxhyphen{}\sphinxhyphen{}wait\sphinxhyphen{}after\sphinxhyphen{}kill}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-wait-after-kill}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}wait\sphinxhyphen{}after\sphinxhyphen{}kill}}\sphinxcode{\sphinxupquote{}}}
type: time

Wait after killing a query, before looking for more to kill.  The purpose of
this is to give blocked queries a chance to execute, so we don’t kill a query
that’s blocking a bunch of others, and then kill the others immediately
afterwards.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}wait\sphinxhyphen{}before\sphinxhyphen{}kill@\spxentry{\sphinxhyphen{}\sphinxhyphen{}wait\sphinxhyphen{}before\sphinxhyphen{}kill}}\index{\sphinxhyphen{}\sphinxhyphen{}wait\sphinxhyphen{}before\sphinxhyphen{}kill@\spxentry{\sphinxhyphen{}\sphinxhyphen{}wait\sphinxhyphen{}before\sphinxhyphen{}kill}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-wait-before-kill}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}wait\sphinxhyphen{}before\sphinxhyphen{}kill}}\sphinxcode{\sphinxupquote{}}}
type: time

Wait before killing a query.  The purpose of this is to give
{\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-execute-command}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}execute\sphinxhyphen{}command}}}}} a chance to see the matching query and gather other
MariaDB or system information before it’s killed.

\end{fulllineitems}



\section{QUERY MATCHES}
\label{\detokenize{mariadb-kill:query-matches}}
These options filter queries from their classes.  If a query does not
match, it is removed from its class.  The \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}ignore}} options take precedence.
The matches for command, db, host, etc. correspond to the columns returned
by SHOW PROCESSLIST: Command, db, Host, etc.  All pattern matches are
case\sphinxhyphen{}sensitive by default, but they can be made case\sphinxhyphen{}insensitive by specifying
a regex pattern like \sphinxcode{\sphinxupquote{(?i\sphinxhyphen{}xsm:select)}}.

See also “GROUP, MATCH AND KILL”.
\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}busy\sphinxhyphen{}time@\spxentry{\sphinxhyphen{}\sphinxhyphen{}busy\sphinxhyphen{}time}}\index{\sphinxhyphen{}\sphinxhyphen{}busy\sphinxhyphen{}time@\spxentry{\sphinxhyphen{}\sphinxhyphen{}busy\sphinxhyphen{}time}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-busy-time}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}busy\sphinxhyphen{}time}}\sphinxcode{\sphinxupquote{}}}
type: time; group: Query Matches

Match queries that have been running for longer than this time.  The queries
must be in Command=Query status.  This matches a query’s Time value as
reported by SHOW PROCESSLIST.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}idle\sphinxhyphen{}time@\spxentry{\sphinxhyphen{}\sphinxhyphen{}idle\sphinxhyphen{}time}}\index{\sphinxhyphen{}\sphinxhyphen{}idle\sphinxhyphen{}time@\spxentry{\sphinxhyphen{}\sphinxhyphen{}idle\sphinxhyphen{}time}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-idle-time}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}idle\sphinxhyphen{}time}}\sphinxcode{\sphinxupquote{}}}
type: time; group: Query Matches

Match queries that have been idle/sleeping for longer than this time.
The queries must be in Command=Sleep status.  This matches a query’s Time
value as reported by SHOW PROCESSLIST.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}command@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}command}}\index{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}command@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}command}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-ignore-command}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}command}}\sphinxcode{\sphinxupquote{}}}
type: string; group: Query Matches

Ignore queries whose Command matches this Perl regex.

See {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-match-command}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}command}}}}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}db@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}db}}\index{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}db@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}db}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-ignore-db}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}db}}\sphinxcode{\sphinxupquote{}}}
type: string; group: Query Matches

Ignore queries whose db (database) matches this Perl regex.

See {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-match-db}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}db}}}}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}host@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}host}}\index{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}host@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}host}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-ignore-host}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}host}}\sphinxcode{\sphinxupquote{}}}
type: string; group: Query Matches

Ignore queries whose Host matches this Perl regex.

See {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-match-host}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}host}}}}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}info@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}info}}\index{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}info@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}info}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-ignore-info}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}info}}\sphinxcode{\sphinxupquote{}}}
type: string; group: Query Matches

Ignore queries whose Info (query) matches this Perl regex.

See {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-match-info}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}info}}}}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}{[}no{]}ignore\sphinxhyphen{}self@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}ignore\sphinxhyphen{}self}}\index{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}ignore\sphinxhyphen{}self@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}ignore\sphinxhyphen{}self}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-1}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}}}\sphinxcode{\sphinxupquote{{[}no{]}ignore\sphinxhyphen{}self}}}
default: yes; group: Query Matches

Don’t kill \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}kill}}’s own connection.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}state@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}state}}\index{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}state@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}state}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-ignore-state}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}state}}\sphinxcode{\sphinxupquote{}}}
type: string; group: Query Matches; default: Locked

Ignore queries whose State matches this Perl regex.  The default is to keep
threads from being killed if they are locked waiting for another thread.

See {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-match-state}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}state}}}}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}user@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}user}}\index{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}user@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}user}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-ignore-user}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}user}}\sphinxcode{\sphinxupquote{}}}
type: string; group: Query Matches

Ignore queries whose user matches this Perl regex.

See {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-match-user}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}user}}}}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}all@\spxentry{\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}all}}\index{\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}all@\spxentry{\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}all}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-match-all}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}all}}\sphinxcode{\sphinxupquote{}}}
group: Query Matches

Match all queries that are not ignored.  If no ignore options are specified,
then every query matches (except replication threads, unless
{\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-replication-threads}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}replication\sphinxhyphen{}threads}}}}} is also specified).  This option allows you to
specify negative matches, i.e. “match every query \sphinxstyleemphasis{except}…” where the
exceptions are defined by specifying various \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}ignore}} options.

This option is \sphinxstyleemphasis{not} the same as {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-victims}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}victims}}}}} \sphinxcode{\sphinxupquote{all}}.  This option matches
all queries within a class, whereas {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-victims}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}victims}}}}} \sphinxcode{\sphinxupquote{all}} specifies that all
matching queries in a class (however they matched) will be killed.  Normally,
however, the two are used together because if, for example, you specify
{\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-victims}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}victims}}}}} \sphinxcode{\sphinxupquote{oldest}}, then although all queries may match, only the oldest
will be killed.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}command@\spxentry{\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}command}}\index{\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}command@\spxentry{\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}command}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-match-command}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}command}}\sphinxcode{\sphinxupquote{}}}
type: string; group: Query Matches

Match only queries whose Command matches this Perl regex.

Common Command values are:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
Query
Sleep
Binlog Dump
Connect
Delayed insert
Execute
Fetch
Init DB
Kill
Prepare
Processlist
Quit
Reset stmt
Table Dump
\end{sphinxVerbatim}

See \sphinxurl{https://mariadb.com/kb/en/library/thread-command-values/} for a full
list and description of Command values.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}db@\spxentry{\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}db}}\index{\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}db@\spxentry{\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}db}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-match-db}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}db}}\sphinxcode{\sphinxupquote{}}}
type: string; group: Query Matches

Match only queries whose db (database) matches this Perl regex.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}host@\spxentry{\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}host}}\index{\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}host@\spxentry{\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}host}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-match-host}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}host}}\sphinxcode{\sphinxupquote{}}}
type: string; group: Query Matches

Match only queries whose Host matches this Perl regex.

The Host value often time includes the port like “host:port”.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}info@\spxentry{\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}info}}\index{\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}info@\spxentry{\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}info}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-match-info}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}info}}\sphinxcode{\sphinxupquote{}}}
type: string; group: Query Matches

Match only queries whose Info (query) matches this Perl regex.

The Info column of the processlist shows the query that is being executed
or NULL if no query is being executed.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}state@\spxentry{\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}state}}\index{\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}state@\spxentry{\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}state}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-match-state}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}state}}\sphinxcode{\sphinxupquote{}}}
type: string; group: Query Matches

Match only queries whose State matches this Perl regex.

Common State values are:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
Locked
login
copy to tmp table
Copying to tmp table
Copying to tmp table on disk
Creating tmp table
executing
Reading from net
Sending data
Sorting \PYG{k}{for} order
Sorting result
Table lock
Updating
\end{sphinxVerbatim}

See \sphinxurl{https://mariadb.com/kb/en/library/general-thread-states/} for
a full list and description of State values.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}user@\spxentry{\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}user}}\index{\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}user@\spxentry{\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}user}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-match-user}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}match\sphinxhyphen{}user}}\sphinxcode{\sphinxupquote{}}}
type: string; group: Query Matches

Match only queries whose User matches this Perl regex.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}replication\sphinxhyphen{}threads@\spxentry{\sphinxhyphen{}\sphinxhyphen{}replication\sphinxhyphen{}threads}}\index{\sphinxhyphen{}\sphinxhyphen{}replication\sphinxhyphen{}threads@\spxentry{\sphinxhyphen{}\sphinxhyphen{}replication\sphinxhyphen{}threads}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-replication-threads}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}replication\sphinxhyphen{}threads}}\sphinxcode{\sphinxupquote{}}}
group: Query Matches

Allow matching and killing replication threads.

By default, matches do not apply to replication threads; i.e. replication
threads are completely ignored.  Specifying this option allows matches to
match (and potentially kill) replication threads on masters and slaves.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}test\sphinxhyphen{}matching@\spxentry{\sphinxhyphen{}\sphinxhyphen{}test\sphinxhyphen{}matching}}\index{\sphinxhyphen{}\sphinxhyphen{}test\sphinxhyphen{}matching@\spxentry{\sphinxhyphen{}\sphinxhyphen{}test\sphinxhyphen{}matching}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-test-matching}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}test\sphinxhyphen{}matching}}\sphinxcode{\sphinxupquote{}}}
type: array; group: Query Matches

Files with processlist snapshots to test matching options against.  Since
the matching options can be complex, you can save snapshots of processlist
in files, then test matching options against queries in those files.

This option disables {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-run-time}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time}}}}}, {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-interval}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}interval}}}}},
and \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}ignore\sphinxhyphen{}self}}.

\end{fulllineitems}



\section{CLASS MATCHES}
\label{\detokenize{mariadb-kill:class-matches}}
These matches apply to entire query classes.  Classes are created by specifying
the {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-group-by}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}group\sphinxhyphen{}by}}}}} option, else all queries are members of a single, default
class.

See also “GROUP, MATCH AND KILL”.
\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}any\sphinxhyphen{}busy\sphinxhyphen{}time@\spxentry{\sphinxhyphen{}\sphinxhyphen{}any\sphinxhyphen{}busy\sphinxhyphen{}time}}\index{\sphinxhyphen{}\sphinxhyphen{}any\sphinxhyphen{}busy\sphinxhyphen{}time@\spxentry{\sphinxhyphen{}\sphinxhyphen{}any\sphinxhyphen{}busy\sphinxhyphen{}time}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-any-busy-time}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}any\sphinxhyphen{}busy\sphinxhyphen{}time}}\sphinxcode{\sphinxupquote{}}}
type: time; group: Class Matches

Match query class if any query has been running for longer than this time.
“Longer than” means that if you specify \sphinxcode{\sphinxupquote{10}}, for example, the class will
only match if there’s at least one query that has been running for greater
than 10 seconds.

See {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-each-busy-time}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}each\sphinxhyphen{}busy\sphinxhyphen{}time}}}}} for more details.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}each\sphinxhyphen{}busy\sphinxhyphen{}time@\spxentry{\sphinxhyphen{}\sphinxhyphen{}each\sphinxhyphen{}busy\sphinxhyphen{}time}}\index{\sphinxhyphen{}\sphinxhyphen{}each\sphinxhyphen{}busy\sphinxhyphen{}time@\spxentry{\sphinxhyphen{}\sphinxhyphen{}each\sphinxhyphen{}busy\sphinxhyphen{}time}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-each-busy-time}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}each\sphinxhyphen{}busy\sphinxhyphen{}time}}\sphinxcode{\sphinxupquote{}}}
type: time; group: Class Matches

Match query class if each query has been running for longer than this time.
“Longer than” means that if you specify \sphinxcode{\sphinxupquote{10}}, for example, the class will
only match if each and every query has been running for greater than 10
seconds.

See also {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-any-busy-time}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}any\sphinxhyphen{}busy\sphinxhyphen{}time}}}}} (to match a class if ANY query has been running
longer than the specified time) and {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-busy-time}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}busy\sphinxhyphen{}time}}}}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}query\sphinxhyphen{}count@\spxentry{\sphinxhyphen{}\sphinxhyphen{}query\sphinxhyphen{}count}}\index{\sphinxhyphen{}\sphinxhyphen{}query\sphinxhyphen{}count@\spxentry{\sphinxhyphen{}\sphinxhyphen{}query\sphinxhyphen{}count}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-query-count}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}query\sphinxhyphen{}count}}\sphinxcode{\sphinxupquote{}}}
type: int; group: Class Matches

Match query class if it has at least this many queries.  When queries are
grouped into classes by specifying {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-group-by}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}group\sphinxhyphen{}by}}}}}, this option causes matches
to apply only to classes with at least this many queries.  If {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-group-by}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}group\sphinxhyphen{}by}}}}}
is not specified then this option causes matches to apply only if there
are at least this many queries in the entire SHOW PROCESSLIST.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}verbose@\spxentry{\sphinxhyphen{}\sphinxhyphen{}verbose}}\index{\sphinxhyphen{}\sphinxhyphen{}verbose@\spxentry{\sphinxhyphen{}\sphinxhyphen{}verbose}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-verbose}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}verbose}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}v

Print information to STDOUT about what is being done.

\end{fulllineitems}



\section{ACTIONS}
\label{\detokenize{mariadb-kill:actions}}
These actions are taken for every matching query from all classes.
The actions are taken in this order: {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-print}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}print}}}}}, {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-execute-command}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}execute\sphinxhyphen{}command}}}}},
\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}kill"/"\sphinxhyphen{}\sphinxhyphen{}kill\sphinxhyphen{}query}}.  This order allows {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-execute-command}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}execute\sphinxhyphen{}command}}}}}
to see the output of {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-print}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}print}}}}} and the query before
\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}kill"/"\sphinxhyphen{}\sphinxhyphen{}kill\sphinxhyphen{}query}}.  This may be helpful because \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}kill}} does
not pass any information to {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-execute-command}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}execute\sphinxhyphen{}command}}}}}.

See also “GROUP, MATCH AND KILL”.
\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}execute\sphinxhyphen{}command@\spxentry{\sphinxhyphen{}\sphinxhyphen{}execute\sphinxhyphen{}command}}\index{\sphinxhyphen{}\sphinxhyphen{}execute\sphinxhyphen{}command@\spxentry{\sphinxhyphen{}\sphinxhyphen{}execute\sphinxhyphen{}command}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-execute-command}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}execute\sphinxhyphen{}command}}\sphinxcode{\sphinxupquote{}}}
type: string; group: Actions

Execute this command when a query matches.

After the command is executed, \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}kill}} has no control over it, so the command
is responsible for its own info gathering, logging, interval, etc.  The
command is executed each time a query matches, so be careful that the command
behaves well when multiple instances are ran.  No information from \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}kill}} is
passed to the command.

See also {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-wait-before-kill}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}wait\sphinxhyphen{}before\sphinxhyphen{}kill}}}}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}kill@\spxentry{\sphinxhyphen{}\sphinxhyphen{}kill}}\index{\sphinxhyphen{}\sphinxhyphen{}kill@\spxentry{\sphinxhyphen{}\sphinxhyphen{}kill}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-kill}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}kill}}\sphinxcode{\sphinxupquote{}}}
group: Actions

Kill the connection for matching queries.

This option makes \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}kill}} kill the connections (a.k.a. processes, threads) that
have matching queries.  Use {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-kill-query}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}kill\sphinxhyphen{}query}}}}} if you only want to kill
individual queries and not their connections.

Unless {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-print}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}print}}}}} is also given, no other information is printed that shows
that \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}kill}} matched and killed a query.

See also {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-wait-before-kill}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}wait\sphinxhyphen{}before\sphinxhyphen{}kill}}}}} and {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-wait-after-kill}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}wait\sphinxhyphen{}after\sphinxhyphen{}kill}}}}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}kill\sphinxhyphen{}busy\sphinxhyphen{}commands@\spxentry{\sphinxhyphen{}\sphinxhyphen{}kill\sphinxhyphen{}busy\sphinxhyphen{}commands}}\index{\sphinxhyphen{}\sphinxhyphen{}kill\sphinxhyphen{}busy\sphinxhyphen{}commands@\spxentry{\sphinxhyphen{}\sphinxhyphen{}kill\sphinxhyphen{}busy\sphinxhyphen{}commands}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-kill-busy-commands}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}kill\sphinxhyphen{}busy\sphinxhyphen{}commands}}\sphinxcode{\sphinxupquote{}}}
type: string; default: Query

group: Actions

Comma sepatated list of commands that will be watched/killed if they ran for
more than {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-busy-time}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}busy\sphinxhyphen{}time}}}}} seconds. Default: \sphinxcode{\sphinxupquote{Query}}

By default, {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-busy-time}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}busy\sphinxhyphen{}time}}}}} kills only \sphinxcode{\sphinxupquote{Query}} commands but in some cases, it
is needed to make {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-busy-time}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}busy\sphinxhyphen{}time}}}}} to watch and kill other commands. For example,
a prepared statement execution command is \sphinxcode{\sphinxupquote{Execute}} instead of \sphinxcode{\sphinxupquote{Query}}. In this
case, specifying \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}kill\sphinxhyphen{}busy\sphinxhyphen{}commands=Query,Execute}} will also kill the prepared
stamente execution.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}kill\sphinxhyphen{}query@\spxentry{\sphinxhyphen{}\sphinxhyphen{}kill\sphinxhyphen{}query}}\index{\sphinxhyphen{}\sphinxhyphen{}kill\sphinxhyphen{}query@\spxentry{\sphinxhyphen{}\sphinxhyphen{}kill\sphinxhyphen{}query}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-kill-query}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}kill\sphinxhyphen{}query}}\sphinxcode{\sphinxupquote{}}}
group: Actions

Kill matching queries.

This option makes \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}kill}} kill matching queries.  This requires MariaDB 5.0 or
newer.  Unlike {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-kill}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}kill}}}}} which kills the connection for matching queries,
this option only kills the query, not its connection.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}!\sphinxhyphen{}\sphinxhyphen{}print@\spxentry{\sphinxhyphen{}\sphinxhyphen{}print}}\index{\sphinxhyphen{}\sphinxhyphen{}print@\spxentry{\sphinxhyphen{}\sphinxhyphen{}print}!mariadb\sphinxhyphen{}kill command line option@\spxentry{mariadb\sphinxhyphen{}kill command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-kill:cmdoption-mariadb-kill-print}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}print}}\sphinxcode{\sphinxupquote{}}}
group: Actions

Print a KILL statement for matching queries; does not actually kill queries.

If you just want to see which queries match and would be killed without
actually killing them, specify {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-print}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}print}}}}}.  To both kill and print
matching queries, specify both {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-kill}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}kill}}}}} and {\hyperref[\detokenize{mariadb-kill:cmdoption-mariadb-kill-print}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}print}}}}}.

\end{fulllineitems}



\section{DSN OPTIONS}
\label{\detokenize{mariadb-kill:dsn-options}}
These DSN options are used to create a DSN.  Each option is given like
\sphinxcode{\sphinxupquote{option=value}}.  The options are case\sphinxhyphen{}sensitive, so P and p are not the
same option.  There cannot be whitespace before or after the \sphinxcode{\sphinxupquote{=}} and
if the value contains whitespace it must be quoted.  DSN options are
comma\sphinxhyphen{}separated.  See the percona\sphinxhyphen{}toolkit manpage for full details.
\begin{itemize}
\item {} 
A

\end{itemize}
\begin{quote}

dsn: charset; copy: yes

Default character set.
\end{quote}
\begin{itemize}
\item {} 
D

\end{itemize}
\begin{quote}

dsn: database; copy: yes

Default database.
\end{quote}
\begin{itemize}
\item {} 
F

\end{itemize}
\begin{quote}

dsn: mysql\_read\_default\_file; copy: yes

Only read default options from the given file
\end{quote}
\begin{itemize}
\item {} 
h

\end{itemize}
\begin{quote}

dsn: host; copy: yes

Connect to host.
\end{quote}
\begin{itemize}
\item {} 
p

\end{itemize}
\begin{quote}

dsn: password; copy: yes

Password to use when connecting.
If password contains commas they must be escaped with a backslash: “exam,ple”
\end{quote}
\begin{itemize}
\item {} 
P

\end{itemize}
\begin{quote}

dsn: port; copy: yes

Port number to use for connection.
\end{quote}
\begin{itemize}
\item {} 
S

\end{itemize}
\begin{quote}

dsn: mariadb\_socket; copy: yes

Socket file to use for connection.
\end{quote}
\begin{itemize}
\item {} 
u

\end{itemize}
\begin{quote}

dsn: user; copy: yes

User for login if not current user.
\end{quote}
\begin{itemize}
\item {} 
t

\end{itemize}
\begin{quote}

Table to log actions in, if passed through \textendash{}log\sphinxhyphen{}dsn.
\end{quote}


\section{ENVIRONMENT}
\label{\detokenize{mariadb-kill:environment}}
The environment variable \sphinxcode{\sphinxupquote{PTDEBUG}} enables verbose debugging output to STDERR.
To enable debugging and capture all output to a file, run the tool like:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nv}{PTDEBUG}\PYG{o}{=}\PYG{l+m}{1} mariadb\PYGZhy{}kill ... \PYGZgt{} FILE \PYG{l+m}{2}\PYGZgt{}\PYG{p}{\PYGZam{}}\PYG{l+m}{1}
\end{sphinxVerbatim}

Be careful: debugging output is voluminous and can generate several megabytes
of output.


\section{SYSTEM REQUIREMENTS}
\label{\detokenize{mariadb-kill:system-requirements}}
You need Perl, DBI, DBD::mysql, and some core packages that ought to be
installed in any reasonably new version of Perl.


\section{AUTHORS}
\label{\detokenize{mariadb-kill:authors}}
Cole Busby, Baron Schwartz and Daniel Nichter


\section{ABOUT THIS MARIADB TOOL}
\label{\detokenize{mariadb-kill:about-this-mariadb-tool}}
This tool is part of MariaDB client tools. This MariaDB Tool was forked from
Percona Toolkit’s pt\sphinxhyphen{}stalk in August, 2019. Percona Toolkit was forked from two
projects in June, 2011: Maatkit and Aspersa.  Those projects were created by
Baron Schwartz and primarily developed by him and Daniel Nichter.


\section{COPYRIGHT, LICENSE, AND WARRANTY}
\label{\detokenize{mariadb-kill:copyright-license-and-warranty}}
This program is copyright 2019\sphinxhyphen{}2021 MariaDB Corporation and/or its affiliates,
2011\sphinxhyphen{}2018 Percona LLC and/or its affiliates, 2010\sphinxhyphen{}2011 Baron Schwartz.

THIS PROGRAM IS PROVIDED “AS IS” AND WITHOUT ANY EXPRESS OR IMPLIED
WARRANTIES, INCLUDING, WITHOUT LIMITATION, THE IMPLIED WARRANTIES OF
MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.

This program is free software; you can redistribute it and/or modify it under
the terms of the GNU General Public License as published by the Free Software
Foundation, version 2; OR the Perl Artistic License.  On UNIX and similar
systems, you can issue \textasciigrave{}man perlgpl’ or \textasciigrave{}man perlartistic’ to read these
licenses.

You should have received a copy of the GNU General Public License along with
this program; if not, write to the Free Software Foundation, Inc., 59 Temple
Place, Suite 330, Boston, MA  02111\sphinxhyphen{}1307  USA.


\section{VERSION}
\label{\detokenize{mariadb-kill:version}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}kill}} 6.0.0rc


\chapter{\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}parted}}}
\label{\detokenize{mariadb-parted:mariadb-parted}}\label{\detokenize{mariadb-parted::doc}}

\section{NAME}
\label{\detokenize{mariadb-parted:name}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}parted}} \sphinxhyphen{} MySQL partition management script


\section{EXAMPLES}
\label{\detokenize{mariadb-parted:examples}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Create weekly partitions for the next quarter to test.part\PYGZus{}table}
mariadb\PYGZhy{}parted \PYGZhy{}\PYGZhy{}add \PYGZhy{}\PYGZhy{}interval w +1q \PYG{n+nv}{h}\PYG{o}{=}localhost,D\PYG{o}{=}test,t\PYG{o}{=}part\PYGZus{}table

\PYG{c+c1}{\PYGZsh{} Create daily partitions for the next 2 weeks}
\PYG{c+c1}{\PYGZsh{} starting exactly at the beginning of every day}
mariadb\PYGZhy{}parted \PYGZhy{}\PYGZhy{}add \PYGZhy{}\PYGZhy{}interval d +2w.startof \PYG{n+nv}{h}\PYG{o}{=}localhost,D\PYG{o}{=}test,t\PYG{o}{=}part\PYGZus{}table

\PYG{c+c1}{\PYGZsh{} Email ops@example.com about partitions added}
mariadb\PYGZhy{}parted \PYGZhy{}\PYGZhy{}add \PYGZhy{}\PYGZhy{}email\PYGZhy{}activity \PYGZhy{}\PYGZhy{}email\PYGZhy{}to ops@example.com \PYG{l+s+se}{\PYGZbs{}}
           \PYGZhy{}\PYGZhy{}interval d +4w \PYG{n+nv}{h}\PYG{o}{=}localhost,D\PYG{o}{=}test,t\PYG{o}{=}part\PYGZus{}table

\PYG{c+c1}{\PYGZsh{} Drop partitions older than 8 weeks}
mariadb\PYGZhy{}parted \PYGZhy{}\PYGZhy{}drop \PYGZhy{}8w \PYG{n+nv}{h}\PYG{o}{=}localhost,D\PYG{o}{=}test,t\PYG{o}{=}part\PYGZus{}table

\PYG{c+c1}{\PYGZsh{} Drop partitions older than Dec 20th, 2010, but only 5 of them.}
mariadb\PYGZhy{}parted \PYGZhy{}\PYGZhy{}drop \PYGZhy{}\PYGZhy{}limit \PYG{l+m}{5} \PYG{l+s+s1}{\PYGZsq{}2010\PYGZhy{}12\PYGZhy{}20 00:00:00\PYGZsq{}} \PYG{l+s+se}{\PYGZbs{}}
           \PYG{n+nv}{h}\PYG{o}{=}localhost,D\PYG{o}{=}test,t\PYG{o}{=}part\PYGZus{}table

\PYG{c+c1}{\PYGZsh{} Drop and archive partitions older than 2 quarters ago.}
mariadb\PYGZhy{}parted \PYGZhy{}\PYGZhy{}drop \PYGZhy{}\PYGZhy{}archive \PYGZhy{}\PYGZhy{}archive\PYGZhy{}path /backups \PYGZhy{}2q \PYG{l+s+se}{\PYGZbs{}}
           \PYG{n+nv}{h}\PYG{o}{=}locahost,D\PYG{o}{=}test,t\PYG{o}{=}part\PYGZus{}table

\PYG{c+c1}{\PYGZsh{} Same as above, but archived to a separate database.}
mariadb\PYGZhy{}parted \PYGZhy{}\PYGZhy{}drop \PYGZhy{}\PYGZhy{}archive \PYGZhy{}\PYGZhy{}archive\PYGZhy{}database \PYG{n+nv}{h}\PYG{o}{=}remotehost,D\PYG{o}{=}test\PYGZus{}archives,t\PYG{o}{=}part\PYGZus{}table \PYGZhy{}2q \PYG{l+s+se}{\PYGZbs{}}
           \PYG{n+nv}{h}\PYG{o}{=}locahost,D\PYG{o}{=}test,t\PYG{o}{=}part\PYGZus{}table

\PYG{c+c1}{\PYGZsh{} Logging to syslog}
mariadb\PYGZhy{}parted \PYGZhy{}\PYGZhy{}logfile syslog:LOCAL0 \PYGZhy{}\PYGZhy{}add \PYGZhy{}\PYGZhy{}interval d 1y \PYG{l+s+se}{\PYGZbs{}}
           \PYG{n+nv}{h}\PYG{o}{=}localhost,D\PYG{o}{=}test,t\PYG{o}{=}part\PYGZus{}table
\end{sphinxVerbatim}


\section{SYNOPSIS}
\label{\detokenize{mariadb-parted:synopsis}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}parted}} {[}options{]} ACTION TIMESPEC DSN

This tool assists in the creation of partitions in regular intervals.
It creates partitions in regular intervals up to some maximum future date.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZhy{}\PYGZhy{}help,          \PYGZhy{}h   This help. See C\PYGZlt{}perldoc mariadb\PYGZhy{}parted\PYGZgt{} \PYG{k}{for} full docs.
\PYGZhy{}\PYGZhy{}dryrun,        \PYGZhy{}n   Report on actions without taking them.
\PYGZhy{}\PYGZhy{}logfile,       \PYGZhy{}L   Direct output to given logfile. Default: none.

\PYGZhy{}\PYGZhy{}email\PYGZhy{}activity      Send a brief email report of actions taken.
                      The email is sent to \PYGZhy{}\PYGZhy{}email\PYGZhy{}to.
\PYGZhy{}\PYGZhy{}use\PYGZhy{}hours          Use hours instead of days when checking partitions.
\PYGZhy{}\PYGZhy{}partcol\PYGZhy{}integer     Assume no partitioning \PYG{n+nb}{time} or date \PYG{k}{function} in use
\PYGZhy{}\PYGZhy{}email\PYGZhy{}to,      \PYGZhy{}E   Where to send activity and failure emails.
                      Default: none.

\PYGZhy{}\PYGZhy{}prefix,        \PYGZhy{}P   Partition prefix. Defaults to \PYG{l+s+s1}{\PYGZsq{}p\PYGZsq{}}.

\PYGZhy{}\PYGZhy{}archive             Archive partitions before dropping them.
\PYGZhy{}\PYGZhy{}archive\PYGZhy{}path        Directory to place mysqldumps.
                      Default: current directory.
\PYGZhy{}\PYGZhy{}archive\PYGZhy{}database    Database to archive partitions to.
                      Default: none

\PYGZhy{}\PYGZhy{}limit,         \PYGZhy{}m   Limit the number of actions to be performed.
                      Default: \PYG{l+m}{0} \PYG{o}{(}unlimited\PYG{o}{)}
\end{sphinxVerbatim}


\section{ACTION}
\label{\detokenize{mariadb-parted:action}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZhy{}\PYGZhy{}add   Add partitions.
\PYGZhy{}\PYGZhy{}drop  Remove partitions.
\end{sphinxVerbatim}


\section{TIMESPEC}
\label{\detokenize{mariadb-parted:timespec}}
A timespec is a “natural” string to specify how far in advance to create
partitions. A sampling of possible timespecs:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
1w \PYG{o}{(}create partitions one week in advance\PYG{o}{)}
1m \PYG{o}{(}one month\PYG{o}{)}
2q \PYG{o}{(}two quarters\PYG{o}{)}
5h \PYG{o}{(}five hours\PYG{o}{)}
\end{sphinxVerbatim}

See the full documentation for a complete description of timespecs.


\section{DSN}
\label{\detokenize{mariadb-parted:dsn}}
DSNs, such as those passed as option values, or arguments to a program
are of the format: \sphinxcode{\sphinxupquote{(\{key\}=\{value\}(,\{key\}=\{value\})*}}. That is, a \sphinxcode{\sphinxupquote{key=value}} pair, followed
by a comma, followed by any number of additional \sphinxcode{\sphinxupquote{key=value}} pairs separated by
commas.


\subsection{Examples}
\label{\detokenize{mariadb-parted:id1}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nv}{h}\PYG{o}{=}testdb1,u\PYG{o}{=}pdb,p\PYG{o}{=}frogs
\PYG{n+nv}{h}\PYG{o}{=}localhost,S\PYG{o}{=}/tmp/mysql.sock,u\PYG{o}{=}root,F\PYG{o}{=}/root/my.cnf
\end{sphinxVerbatim}

Where ‘h’ is a hostname, ‘S’ is a socket path, ‘u’ is a user, ‘F’ is a path
to a defaults file, and ‘p’ is a password. These are non\sphinxhyphen{}exhaustive examples.


\section{TIMESPEC}
\label{\detokenize{mariadb-parted:id2}}
A timespec is one of:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
A modifier to current \PYG{n+nb}{local} time,
A unix timestamp \PYG{o}{(}assumed in UTC\PYG{o}{)},
The string \PYG{l+s+s1}{\PYGZsq{}now\PYGZsq{}} to refer to current \PYG{n+nb}{local} time,
An absolute \PYG{n+nb}{time} in \PYG{l+s+s1}{\PYGZsq{}YYYY\PYGZhy{}MM\PYGZhy{}DD HH:MM:SS\PYGZsq{}} format,
An absolute \PYG{n+nb}{time} in \PYG{l+s+s1}{\PYGZsq{}YYYY\PYGZhy{}MD\PYGZhy{}DD HH:MM:SS TIMEZONE\PYGZsq{}} format.
\end{sphinxVerbatim}

For the purposes of this module, TIMEZONE refers to zone names
created and maintained by the zoneinfo database.
See \sphinxurl{http://en.wikipedia.org/wiki/Tz\_database} for more information.
Commonly used zone names are: Etc/UTC, US/Pacific and US/Eastern.

Since the last four aren’t very complicated, this section describes
what the modifiers are.

A modifer is, an optional plus or minus sign followed by a number,
and then one of:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nv}{y} \PYG{o}{=} year, \PYG{n+nv}{q} \PYG{o}{=} quarter , \PYG{n+nv}{m} \PYG{o}{=} month, \PYG{n+nv}{w} \PYG{o}{=} week, \PYG{n+nv}{d} \PYG{o}{=} day, \PYG{n+nv}{h} \PYG{o}{=} hour
\end{sphinxVerbatim}

Followed optionally by a space or a period and ‘startof’.
Which is described in the next section.

Some examples (the time is assumed to be 00:00:00):

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZhy{}1y         \PYG{o}{(}\PYG{l+m}{2010}\PYGZhy{}11\PYGZhy{}01 \PYGZhy{}\PYGZgt{} \PYG{l+m}{2009}\PYGZhy{}11\PYGZhy{}01\PYG{o}{)}
 5d         \PYG{o}{(}\PYG{l+m}{2010}\PYGZhy{}12\PYGZhy{}10 \PYGZhy{}\PYGZgt{} \PYG{l+m}{2010}\PYGZhy{}12\PYGZhy{}15\PYG{o}{)}
\PYGZhy{}1w         \PYG{o}{(}\PYG{l+m}{2010}\PYGZhy{}12\PYGZhy{}13 \PYGZhy{}\PYGZgt{} \PYG{l+m}{2010}\PYGZhy{}12\PYGZhy{}07\PYG{o}{)}
\PYGZhy{}1q startof \PYG{o}{(}\PYG{l+m}{2010}\PYGZhy{}05\PYGZhy{}01 \PYGZhy{}\PYGZgt{} \PYG{l+m}{2010}\PYGZhy{}01\PYGZhy{}01\PYG{o}{)}
 1q.startof \PYG{o}{(}\PYG{l+m}{2010}\PYGZhy{}05\PYGZhy{}01 \PYGZhy{}\PYGZgt{} \PYG{l+m}{2010}\PYGZhy{}07\PYGZhy{}01\PYG{o}{)}
\end{sphinxVerbatim}


\section{startof}
\label{\detokenize{mariadb-parted:startof}}
The ‘startof’ modifier for timespecs is a little confusing,
but, is the only sane way to achieve latching like behavior.
It adjusts the reference time so that it starts at the beginning
of the requested type of interval. So, if you specify \sphinxcode{\sphinxupquote{\sphinxhyphen{}1h startof}},
and the current time is: \sphinxcode{\sphinxupquote{2010\sphinxhyphen{}12\sphinxhyphen{}03 04:33:56}}, first the calculation
throws away \sphinxcode{\sphinxupquote{33:56}} to get: \sphinxcode{\sphinxupquote{2010\sphinxhyphen{}12\sphinxhyphen{}03 04:00:00}}, and then subtracts
one hour to yield: \sphinxcode{\sphinxupquote{2010\sphinxhyphen{}12\sphinxhyphen{}03 03:00:00}}.

Diagram of the ‘startof’ operator for timespec \sphinxcode{\sphinxupquote{\sphinxhyphen{}1q startof}},
given the date \sphinxcode{\sphinxupquote{2010\sphinxhyphen{}05\sphinxhyphen{}01 00:00}}.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
        R P   C
        v v   v
 \PYGZhy{}\PYGZhy{}\PYGZhy{}.\PYGZhy{}\PYGZhy{}\PYGZhy{}.\PYGZhy{}\PYGZhy{}\PYGZhy{}.\PYGZhy{}\PYGZhy{}\PYGZhy{}.\PYGZhy{}\PYGZhy{}\PYGZhy{}.\PYGZhy{}\PYGZhy{}\PYGZhy{} Dec \PYG{l+m}{2010}
 \PYGZca{}   \PYGZca{}   \PYGZca{}   \PYGZca{}   \PYGZca{}   \PYGZca{}
 Jul Oct Jan Apr Jul Oct
\PYG{l+m}{2009}    \PYG{l+m}{2010}

. \PYG{o}{=} quarter separator
\PYG{n+nv}{C} \PYG{o}{=} current quarter
\PYG{n+nv}{P} \PYG{o}{=} previous quarter
\PYG{n+nv}{R} \PYG{o}{=} Resultant \PYG{n+nb}{time} \PYG{o}{(}\PYG{l+m}{2010}\PYGZhy{}01\PYGZhy{}01 \PYG{l+m}{00}:00:00\PYG{o}{)}
\end{sphinxVerbatim}


\section{OPTIONS}
\label{\detokenize{mariadb-parted:options}}\begin{optionlist}{3cm}
\item [\sphinxhyphen{}\sphinxhyphen{}help, \sphinxhyphen{}h]  
This help.
\item [\sphinxhyphen{}\sphinxhyphen{}dryrun, \sphinxhyphen{}n]  
Report on actions that would be taken. Works best with the \sphinxcode{\sphinxupquote{Pdb\_DEBUG}} environment variable set to true.

See also: ENVIRONMENT
\item [\sphinxhyphen{}\sphinxhyphen{}logfile, \sphinxhyphen{}L]  
Path to a file for logging, or, \sphinxcode{\sphinxupquote{syslog:\textless{}facility\textgreater{}}}
Where \sphinxcode{\sphinxupquote{\textless{}facility\textgreater{}}} is a pre\sphinxhyphen{}defined logging facility for this machine.

See also: syslog(3), syslogd(8), syslog.conf(5)
\item [\sphinxhyphen{}\sphinxhyphen{}email\sphinxhyphen{}to, \sphinxhyphen{}E]  
Where to send emails.

This tool can send emails on failure, and whenever it adds, drops, or archive partitions.
Ordinarily, it will only send emails on failure.
\end{optionlist}
\index{mariadb\sphinxhyphen{}parted command line option@\spxentry{mariadb\sphinxhyphen{}parted command line option}!\sphinxhyphen{}\sphinxhyphen{}email\sphinxhyphen{}activity@\spxentry{\sphinxhyphen{}\sphinxhyphen{}email\sphinxhyphen{}activity}}\index{\sphinxhyphen{}\sphinxhyphen{}email\sphinxhyphen{}activity@\spxentry{\sphinxhyphen{}\sphinxhyphen{}email\sphinxhyphen{}activity}!mariadb\sphinxhyphen{}parted command line option@\spxentry{mariadb\sphinxhyphen{}parted command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-parted:cmdoption-mariadb-parted-email-activity}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}email\sphinxhyphen{}activity}}\sphinxcode{\sphinxupquote{}}}
If this flag is present, then this will make the tool also email
whenver it adds, drops, or archives a partition.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}parted command line option@\spxentry{mariadb\sphinxhyphen{}parted command line option}!\sphinxhyphen{}\sphinxhyphen{}use\sphinxhyphen{}hours@\spxentry{\sphinxhyphen{}\sphinxhyphen{}use\sphinxhyphen{}hours}}\index{\sphinxhyphen{}\sphinxhyphen{}use\sphinxhyphen{}hours@\spxentry{\sphinxhyphen{}\sphinxhyphen{}use\sphinxhyphen{}hours}!mariadb\sphinxhyphen{}parted command line option@\spxentry{mariadb\sphinxhyphen{}parted command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-parted:cmdoption-mariadb-parted-use-hours}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}use\sphinxhyphen{}hours}}\sphinxcode{\sphinxupquote{}}}
If this flag is present, then partitions will be checked on the hour and not on the day.
Useful when you need to partition by hour.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}parted command line option@\spxentry{mariadb\sphinxhyphen{}parted command line option}!\sphinxhyphen{}\sphinxhyphen{}partcol\sphinxhyphen{}integer@\spxentry{\sphinxhyphen{}\sphinxhyphen{}partcol\sphinxhyphen{}integer}}\index{\sphinxhyphen{}\sphinxhyphen{}partcol\sphinxhyphen{}integer@\spxentry{\sphinxhyphen{}\sphinxhyphen{}partcol\sphinxhyphen{}integer}!mariadb\sphinxhyphen{}parted command line option@\spxentry{mariadb\sphinxhyphen{}parted command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-parted:cmdoption-mariadb-parted-partcol-integer}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}partcol\sphinxhyphen{}integer}}\sphinxcode{\sphinxupquote{}}}
If this flag is present, then the tool will assume there is no partitioning function
defined, e.g. if you are storing your date into an integer column

\end{fulllineitems}

\begin{optionlist}{3cm}
\item [\sphinxhyphen{}\sphinxhyphen{}prefix, \sphinxhyphen{}P]  
Prefix for partition names. Partitions are always named like: \textless{}prefix\textgreater{}N.
Where N is a number. Default is ‘p’, which was observed to be the most common prefix.
\item [\sphinxhyphen{}\sphinxhyphen{}interval, \sphinxhyphen{}i]  
type: string one of: d w m y

Specifies the size of the each partition for the \textendash{}add action.
‘d’ is day, ‘w’ is week, ‘m’ is month, and ‘y’ is year.
\end{optionlist}
\index{mariadb\sphinxhyphen{}parted command line option@\spxentry{mariadb\sphinxhyphen{}parted command line option}!\sphinxhyphen{}\sphinxhyphen{}limit@\spxentry{\sphinxhyphen{}\sphinxhyphen{}limit}}\index{\sphinxhyphen{}\sphinxhyphen{}limit@\spxentry{\sphinxhyphen{}\sphinxhyphen{}limit}!mariadb\sphinxhyphen{}parted command line option@\spxentry{mariadb\sphinxhyphen{}parted command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-parted:cmdoption-mariadb-parted-limit}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}limit}}\sphinxcode{\sphinxupquote{}}}
Specifies a limit to the number of partitions to add, drop, or archive.
By default this is unlimited (0), so, for testing one usually wishes to set
this to 1.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}parted command line option@\spxentry{mariadb\sphinxhyphen{}parted command line option}!\sphinxhyphen{}\sphinxhyphen{}archive@\spxentry{\sphinxhyphen{}\sphinxhyphen{}archive}}\index{\sphinxhyphen{}\sphinxhyphen{}archive@\spxentry{\sphinxhyphen{}\sphinxhyphen{}archive}!mariadb\sphinxhyphen{}parted command line option@\spxentry{mariadb\sphinxhyphen{}parted command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-parted:cmdoption-mariadb-parted-archive}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}archive}}\sphinxcode{\sphinxupquote{}}}
type: boolean

mysqldump partitions to files \sphinxstylestrong{in the current directory} named like \textless{}host\textgreater{}.\textless{}schema\textgreater{}.\textless{}table\textgreater{}.\textless{}partition\_name\textgreater{}.sql

There is not currently a way to archive without dropping a partition.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}parted command line option@\spxentry{mariadb\sphinxhyphen{}parted command line option}!\sphinxhyphen{}\sphinxhyphen{}archive\sphinxhyphen{}path@\spxentry{\sphinxhyphen{}\sphinxhyphen{}archive\sphinxhyphen{}path}}\index{\sphinxhyphen{}\sphinxhyphen{}archive\sphinxhyphen{}path@\spxentry{\sphinxhyphen{}\sphinxhyphen{}archive\sphinxhyphen{}path}!mariadb\sphinxhyphen{}parted command line option@\spxentry{mariadb\sphinxhyphen{}parted command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-parted:cmdoption-mariadb-parted-archive-path}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}archive\sphinxhyphen{}path}}\sphinxcode{\sphinxupquote{}}}
What directory to place the SQL dumps of partition data in.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}parted command line option@\spxentry{mariadb\sphinxhyphen{}parted command line option}!\sphinxhyphen{}\sphinxhyphen{}archive\sphinxhyphen{}database@\spxentry{\sphinxhyphen{}\sphinxhyphen{}archive\sphinxhyphen{}database}}\index{\sphinxhyphen{}\sphinxhyphen{}archive\sphinxhyphen{}database@\spxentry{\sphinxhyphen{}\sphinxhyphen{}archive\sphinxhyphen{}database}!mariadb\sphinxhyphen{}parted command line option@\spxentry{mariadb\sphinxhyphen{}parted command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-parted:cmdoption-mariadb-parted-archive-database}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}archive\sphinxhyphen{}database}}\sphinxcode{\sphinxupquote{}}}
What database to place the archived partitions in.

\end{fulllineitems}



\section{ACTIONS}
\label{\detokenize{mariadb-parted:actions}}\index{mariadb\sphinxhyphen{}parted command line option@\spxentry{mariadb\sphinxhyphen{}parted command line option}!\sphinxhyphen{}\sphinxhyphen{}add@\spxentry{\sphinxhyphen{}\sphinxhyphen{}add}}\index{\sphinxhyphen{}\sphinxhyphen{}add@\spxentry{\sphinxhyphen{}\sphinxhyphen{}add}!mariadb\sphinxhyphen{}parted command line option@\spxentry{mariadb\sphinxhyphen{}parted command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-parted:cmdoption-mariadb-parted-add}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}add}}\sphinxcode{\sphinxupquote{}}}
Adds partitions till there are at least TIMESPEC \textendash{}interval sized future buckets.

The adding of partitions is not done blindly. This will only add new partitions
if there are fewer than TIMESPEC future partitions. For example:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
Given: \PYGZhy{}\PYGZhy{}interval d, today is: \PYG{l+m}{2011}\PYGZhy{}01\PYGZhy{}15, TIMESPEC is: +1w,
       last partition \PYG{o}{(}p5\PYG{o}{)} is \PYG{k}{for} \PYG{l+m}{2011}\PYGZhy{}01\PYGZhy{}16\PYG{p}{;}

Result:
  Parted will add \PYG{l+m}{6} partitions to make the last partition \PYG{l+m}{2011}\PYGZhy{}01\PYGZhy{}22 \PYG{o}{(}p11\PYG{o}{)}.

Before:
 \PYG{p}{|}\PYGZhy{}\PYGZhy{}\PYGZhy{}+\PYG{p}{|}
p0  p5

After:
 \PYG{p}{|}\PYGZhy{}\PYGZhy{}\PYGZhy{}+\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYG{p}{|}
p0  p5    p11
\end{sphinxVerbatim}

You can think of \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}add}} as specifying a required minimum safety zone.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}parted command line option@\spxentry{mariadb\sphinxhyphen{}parted command line option}!\sphinxhyphen{}\sphinxhyphen{}drop@\spxentry{\sphinxhyphen{}\sphinxhyphen{}drop}}\index{\sphinxhyphen{}\sphinxhyphen{}drop@\spxentry{\sphinxhyphen{}\sphinxhyphen{}drop}!mariadb\sphinxhyphen{}parted command line option@\spxentry{mariadb\sphinxhyphen{}parted command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-parted:cmdoption-mariadb-parted-drop}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}drop}}\sphinxcode{\sphinxupquote{}}}
Drops partitions strictly older than TIMESPEC.
The partitions are not renumbered to start with p0 again.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
Given: today is: \PYG{l+m}{2011}\PYGZhy{}01\PYGZhy{}15, TIMESPEC is: \PYGZhy{}1w,
       first partition \PYG{o}{(}p0\PYG{o}{)} is \PYG{k}{for} \PYG{l+m}{2011}\PYGZhy{}01\PYGZhy{}06

Result: \PYG{l+m}{2} partitions will be dropped.

Before: \PYG{p}{|}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}+\PYGZhy{}\PYGZhy{}\PYG{p}{|}
        \PYG{l+m}{0}     \PYG{l+m}{6}  \PYG{l+m}{9}
After : \PYG{p}{|}\PYGZhy{}\PYGZhy{}\PYGZhy{}+\PYGZhy{}\PYGZhy{}\PYG{p}{|}
        \PYG{l+m}{2}   \PYG{l+m}{6}  \PYG{l+m}{9}
\end{sphinxVerbatim}

\end{fulllineitems}



\section{ENVIRONMENT}
\label{\detokenize{mariadb-parted:environment}}
Due to legacy reasons, this tool respond to the environment variable \sphinxcode{\sphinxupquote{Pdb\_DEBUG}}
instead of PTDEBUG. This variable, when set to true, enables additional (very
verbose) output from the tool.


\section{SYSTEM REQUIREMENTS}
\label{\detokenize{mariadb-parted:system-requirements}}
You need Perl, DBI, DBD::mysql, and some core packages that ought to be
installed in any reasonably new version of Perl.


\section{ABOUT THIS MARIADB TOOL}
\label{\detokenize{mariadb-parted:about-this-mariadb-tool}}
This tool is part of MariaDB client tools. This MariaDB Tool was forked from
PalominoDB’s pdb\sphinxhyphen{}parted in 2019.


\section{COPYRIGHT, LICENSE, AND WARRANTY}
\label{\detokenize{mariadb-parted:copyright-license-and-warranty}}
This program is copyright 2019\sphinxhyphen{}2021 MariaDB Corporation and/or its affiliates,
2009\sphinxhyphen{}2013 PalominoDB, Inc.

THIS PROGRAM IS PROVIDED “AS IS” AND WITHOUT ANY EXPRESS OR IMPLIED
WARRANTIES, INCLUDING, WITHOUT LIMITATION, THE IMPLIED WARRANTIES OF
MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.

This program is free software; you can redistribute it and/or modify it under
the terms of the GNU General Public License as published by the Free Software
Foundation, version 2; OR the Perl Artistic License.  On UNIX and similar
systems, you can issue \textasciigrave{}man perlgpl’ or \textasciigrave{}man perlartistic’ to read these
licenses.

You should have received a copy of the GNU General Public License along with
this program; if not, write to the Free Software Foundation, Inc., 59 Temple
Place, Suite 330, Boston, MA  02111\sphinxhyphen{}1307  USA.


\section{VERSION}
\label{\detokenize{mariadb-parted:version}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}parted}} 6.0.0rc


\chapter{\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest}}}
\label{\detokenize{mariadb-query-digest:mariadb-query-digest}}\label{\detokenize{mariadb-query-digest::doc}}

\section{NAME}
\label{\detokenize{mariadb-query-digest:name}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest}} \sphinxhyphen{} Analyze MariaDB queries from logs, processlist, and tcpdump.


\section{SYNOPSIS}
\label{\detokenize{mariadb-query-digest:synopsis}}

\subsection{Usage}
\label{\detokenize{mariadb-query-digest:usage}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{mariadb}\PYG{o}{\PYGZhy{}}\PYG{n}{query}\PYG{o}{\PYGZhy{}}\PYG{n}{digest} \PYG{p}{[}\PYG{n}{OPTIONS}\PYG{p}{]} \PYG{p}{[}\PYG{n}{FILES}\PYG{p}{]} \PYG{p}{[}\PYG{n}{DSN}\PYG{p}{]}
\end{sphinxVerbatim}

\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest}} analyzes MariaDB queries from slow, general, and binary log
files.  It can also analyze queries from \sphinxcode{\sphinxupquote{SHOW PROCESSLIST}} and MariaDB
protocol data from tcpdump.  By default, queries are grouped by fingerprint
and reported in descending order of query time (i.e. the slowest queries
first).  If no \sphinxcode{\sphinxupquote{FILES}} are given, the tool reads \sphinxcode{\sphinxupquote{STDIN}}.  The optional
\sphinxcode{\sphinxupquote{DSN}} is used for certain options like {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-since}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}since}}}}} and {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-until}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}until}}}}}.

Report the slowest queries from \sphinxcode{\sphinxupquote{slow.log}}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
mariadb\PYGZhy{}query\PYGZhy{}digest slow.log
\end{sphinxVerbatim}

Report the slowest queries from the processlist on host1:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
mariadb\PYGZhy{}query\PYGZhy{}digest \PYGZhy{}\PYGZhy{}processlist \PYG{n+nv}{h}\PYG{o}{=}host1
\end{sphinxVerbatim}

Capture MariaDB protocol data with tcppdump, then report the slowest queries:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
tcpdump \PYGZhy{}s \PYG{l+m}{65535} \PYGZhy{}x \PYGZhy{}nn \PYGZhy{}q \PYGZhy{}tttt \PYGZhy{}i any \PYGZhy{}c \PYG{l+m}{1000} port \PYG{l+m}{3306} \PYGZgt{} mariadb.tcp.txt

mariadb\PYGZhy{}query\PYGZhy{}digest \PYGZhy{}\PYGZhy{}type tcpdump mariadb.tcp.txt
\end{sphinxVerbatim}

Save query data from \sphinxcode{\sphinxupquote{slow.log}} to host2 for later review and trend analysis:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
mariadb\PYGZhy{}query\PYGZhy{}digest \PYGZhy{}\PYGZhy{}review \PYG{n+nv}{h}\PYG{o}{=}host2 \PYGZhy{}\PYGZhy{}no\PYGZhy{}report slow.log
\end{sphinxVerbatim}


\section{RISKS}
\label{\detokenize{mariadb-query-digest:risks}}
MariaDB Tools is mature, proven in the real world, and well tested,
but all database tools can pose a risk to the system and the database
server.  Before using this tool, please:
\begin{itemize}
\item {} 
Read the tool’s documentation

\item {} 
Review the tool’s known “BUGS”

\item {} 
Test the tool on a non\sphinxhyphen{}production server

\item {} 
Backup your production server and verify the backups

\end{itemize}


\section{DESCRIPTION}
\label{\detokenize{mariadb-query-digest:description}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest}} is a sophisticated but easy to use tool for analyzing
MariaDB queries.  It can analyze queries from MariaDB slow, general, and binary
logs. (Binary logs must first be converted to text, see {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-type}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}type}}}}}).
It can also use \sphinxcode{\sphinxupquote{SHOW PROCESSLIST}} and MariaDB protocol data from tcpdump.
By default, the tool reports which queries are the slowest, and therefore
the most important to optimize.  More complex and custom\sphinxhyphen{}tailored reports
can be created by using options like {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-group-by}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}group\sphinxhyphen{}by}}}}}, {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-filter}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}filter}}}}}, and
{\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-embedded-attributes}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}embedded\sphinxhyphen{}attributes}}}}}.

Query analysis is a best\sphinxhyphen{}practice that should be done frequently.  To
make this easier, \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest}} has two features: query review
({\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-review}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}review}}}}}) and query history ({\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-history}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}history}}}}}).  When the {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-review}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}review}}}}}
option is used, all unique queries are saved to a database.  When the
tool is ran again with {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-review}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}review}}}}}, queries marked as reviewed in
the database are not printed in the report.  This highlights new queries
that need to be reviewed.  When the {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-history}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}history}}}}} option is used,
query metrics (query time, lock time, etc.) for each unique query are
saved to database.  Each time the tool is ran with {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-history}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}history}}}}}, the
more historical data is saved which can be used to trend and analyze
query performance over time.


\section{ATTRIBUTES}
\label{\detokenize{mariadb-query-digest:attributes}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest}} works on events, which are a collection of key\sphinxhyphen{}value pairs
called attributes.  You’ll recognize most of the attributes right away:
\sphinxcode{\sphinxupquote{Query\_time}}, \sphinxcode{\sphinxupquote{Lock\_time}}, and so on.  You can just look at a slow log
and see them.  However, there are some that don’t exist in the slow log,
and slow logs may actually include different kinds of attributes depending
upon the MariaDB Server version.

See “ATTRIBUTES REFERENCE” near the end of this documentation for a list
of common and {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-type}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}type}}}}} specific attributes.  A familiarity with these
attributes is necessary for working with {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-filter}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}filter}}}}},
{\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-ignore-attributes}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}attributes}}}}}, and other attribute\sphinxhyphen{}related options.

With creative use of {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-filter}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}filter}}}}}, you can create new attributes derived
from existing attributes.  For example, to create an attribute called
\sphinxcode{\sphinxupquote{Row\_ratio}} for examining the ratio of \sphinxcode{\sphinxupquote{Rows\_sent}} to \sphinxcode{\sphinxupquote{Rows\_examined}},
specify a filter like:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZhy{}\PYGZhy{}filter \PYG{l+s+s1}{\PYGZsq{}(\PYGZdl{}event\PYGZhy{}\PYGZgt{}\PYGZob{}Row\PYGZus{}ratio\PYGZcb{} = \PYGZdl{}event\PYGZhy{}\PYGZgt{}\PYGZob{}Rows\PYGZus{}sent\PYGZcb{} / (\PYGZdl{}event\PYGZhy{}\PYGZgt{}\PYGZob{}Rows\PYGZus{}examined\PYGZcb{})) \PYGZam{}\PYGZam{} 1\PYGZsq{}}
\end{sphinxVerbatim}

The \sphinxcode{\sphinxupquote{\&\& 1}} trick is needed to create a valid one\sphinxhyphen{}line syntax that is always
true, even if the assignment happens to evaluate false.  The new attribute will
automatically appears in the output:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Row ratio        1.00    0.00      1    0.50      1    0.71    0.50}
\end{sphinxVerbatim}

Attributes created this way can be specified for {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-order-by}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}order\sphinxhyphen{}by}}}}} or any
option that requires an attribute.


\section{OUTPUT}
\label{\detokenize{mariadb-query-digest:output}}
The default {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-output}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}output}}}}} is a query analysis report.  The \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}report}}
option controls whether or not this report is printed.  Sometimes you may
want to parse all the queries but suppress the report, for example when using
{\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-review}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}review}}}}} or {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-history}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}history}}}}}.

There is one paragraph for each class of query analyzed.  A “class” of queries
all have the same value for the {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-group-by}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}group\sphinxhyphen{}by}}}}} attribute which is
\sphinxcode{\sphinxupquote{fingerprint}} by default.  (See “ATTRIBUTES”.)  A fingerprint is an
abstracted version of the query text with literals removed, whitespace
collapsed, and so forth.  The report is formatted so it’s easy to paste into
emails without wrapping, and all non\sphinxhyphen{}query lines begin with a comment, so you
can save it to a .sql file and open it in your favorite syntax\sphinxhyphen{}highlighting
text editor.  There is a response\sphinxhyphen{}time profile at the beginning.

The output described here is controlled by {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-report-format}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}report\sphinxhyphen{}format}}}}}.
That option allows you to specify what to print and in what order.
The default output in the default order is described here.

The report, by default, begins with a paragraph about the entire analysis run
The information is very similar to what you’ll see for each class of queries in
the log, but it doesn’t have some information that would be too expensive to
keep globally for the analysis.  It also has some statistics about the code’s
execution itself, such as the CPU and memory usage, the local date and time
of the run, and a list of input file read/parsed.

Following this is the response\sphinxhyphen{}time profile over the events.  This is a
highly summarized view of the unique events in the detailed query report
that follows.  It contains the following columns:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
Column        \PYG{n+nv}{Meaning}
\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}  \PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}
Rank          The query\PYG{l+s+s1}{\PYGZsq{}s rank within the entire set of queries analyzed}
\PYG{l+s+s1}{Query ID      The query\PYGZsq{}}s fingerprint
Response \PYG{n+nb}{time} The total response time, and percentage of overall total
Calls         The number of \PYG{n+nb}{times} this query was executed
R/Call        The mean response \PYG{n+nb}{time} per execution
V/M           The Variance\PYGZhy{}to\PYGZhy{}mean ratio of response \PYG{n+nb}{time}
Item          The distilled query
\end{sphinxVerbatim}

A final line whose rank is shown as MISC contains aggregate statistics on the
queries that were not included in the report, due to options such as
{\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-limit}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}limit}}}}} and {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-outliers}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}outliers}}}}}.  For details on the variance\sphinxhyphen{}to\sphinxhyphen{}mean ratio,
please see \sphinxurl{http://en.wikipedia.org/wiki/Index\_of\_dispersion}.

Next, the detailed query report is printed.  Each query appears in a paragraph.
Here is a sample, slightly reformatted so ‘perldoc’ will not wrap lines in a
terminal.  The following will all be one paragraph, but we’ll break it up for
commentary.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Query 2: 0.01 QPS, 0.02x conc, ID 0xFDEA8D2993C9CAF3 at byte 160665}
\end{sphinxVerbatim}

This line identifies the sequential number of the query in the sort order
specified by {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-order-by}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}order\sphinxhyphen{}by}}}}}.  Then there’s the queries per second, and the
approximate concurrency for this query (calculated as a function of the timespan
and total Query\_time).  Next there’s a query ID.  This ID is a hex version of
the query’s checksum in the database, if you’re using {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-review}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}review}}}}}.  You can
select the reviewed query’s details from the database with a query like \sphinxcode{\sphinxupquote{SELECT
.... WHERE checksum=0xFDEA8D2993C9CAF3}}.

If you are investigating the report and want to print out every sample of a
particular query, then the following {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-filter}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}filter}}}}} may be helpful:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
mariadb\PYGZhy{}query\PYGZhy{}digest slow.log           \PYG{l+s+se}{\PYGZbs{}}
   \PYGZhy{}\PYGZhy{}no\PYGZhy{}report                     \PYG{l+s+se}{\PYGZbs{}}
   \PYGZhy{}\PYGZhy{}output slowlog                \PYG{l+s+se}{\PYGZbs{}}
   \PYGZhy{}\PYGZhy{}filter \PYG{l+s+s1}{\PYGZsq{}\PYGZdl{}event\PYGZhy{}\PYGZgt{}\PYGZob{}fingerprint\PYGZcb{} \PYGZbs{}}
\PYG{l+s+s1}{        \PYGZam{}\PYGZam{} make\PYGZus{}checksum(\PYGZdl{}event\PYGZhy{}\PYGZgt{}\PYGZob{}fingerprint\PYGZcb{}) eq \PYGZdq{}FDEA8D2993C9CAF3\PYGZdq{}\PYGZsq{}}
\end{sphinxVerbatim}

Notice that you must remove the \sphinxcode{\sphinxupquote{0x}} prefix from the checksum.

Finally, in case you want to find a sample of the query in the log file, there’s
the byte offset where you can look.  (This is not always accurate, due to some
anomalies in the slow log format, but it’s usually right.)  The position
refers to the worst sample, which we’ll see more about below.

Next is the table of metrics about this class of queries.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{}           pct   total    min    max     avg     95\PYGZpc{}  stddev  median}
\PYG{c+c1}{\PYGZsh{} Count       0       2}
\PYG{c+c1}{\PYGZsh{} Exec time  13   1105s   552s   554s    553s    554s      2s    553s}
\PYG{c+c1}{\PYGZsh{} Lock time   0   216us   99us  117us   108us   117us    12us   108us}
\PYG{c+c1}{\PYGZsh{} Rows sent  20   6.26M  3.13M  3.13M   3.13M   3.13M   12.73   3.13M}
\PYG{c+c1}{\PYGZsh{} Rows exam   0   6.26M  3.13M  3.13M   3.13M   3.13M   12.73   3.13M}
\end{sphinxVerbatim}

The first line is column headers for the table.  The percentage is the percent
of the total for the whole analysis run, and the total is the actual value of
the specified metric.  For example, in this case we can see that the query
executed 2 times, which is 13\% of the total number of queries in the file.  The
min, max and avg columns are self\sphinxhyphen{}explanatory.  The 95\% column shows the 95th
percentile; 95\% of the values are less than or equal to this value.  The
standard deviation shows you how tightly grouped the values are.  The standard
deviation and median are both calculated from the 95th percentile, discarding
the extremely large values.

The stddev, median and 95th percentile statistics are approximate.  Exact
statistics require keeping every value seen, sorting, and doing some
calculations on them.  This uses a lot of memory.  To avoid this, we keep 1000
buckets, each of them 5\% bigger than the one before, ranging from .000001 up to
a very big number.  When we see a value we increment the bucket into which it
falls.  Thus we have fixed memory per class of queries.  The drawback is the
imprecision, which typically falls in the 5 percent range.

Next we have statistics on the users, databases and time range for the query.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Users       1   user1}
\PYG{c+c1}{\PYGZsh{} Databases   2     db1(1), db2(1)}
\PYG{c+c1}{\PYGZsh{} Time range 2008\PYGZhy{}11\PYGZhy{}26 04:55:18 to 2008\PYGZhy{}11\PYGZhy{}27 00:15:15}
\end{sphinxVerbatim}

The users and databases are shown as a count of distinct values, followed by the
values.  If there’s only one, it’s shown alone; if there are many, we show each
of the most frequent ones, followed by the number of times it appears.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Query\PYGZus{}time distribution}
\PYG{c+c1}{\PYGZsh{}   1us}
\PYG{c+c1}{\PYGZsh{}  10us}
\PYG{c+c1}{\PYGZsh{} 100us}
\PYG{c+c1}{\PYGZsh{}   1ms}
\PYG{c+c1}{\PYGZsh{}  10ms  \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{} 100ms  \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{}    1s  \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{}  10s+}
\end{sphinxVerbatim}

The execution times show a logarithmic chart of time clustering.  Each query
goes into one of the “buckets” and is counted up.  The buckets are powers of
ten.  The first bucket is all values in the “single microsecond range” \textendash{} that
is, less than 10us.  The second is “tens of microseconds,” which is from 10us
up to (but not including) 100us; and so on.  The charted attribute can be
changed by specifying {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-report-histogram}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}report\sphinxhyphen{}histogram}}}}} but is limited to time\sphinxhyphen{}based
attributes.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Tables}
\PYG{c+c1}{\PYGZsh{}    SHOW TABLE STATUS LIKE \PYGZsq{}table1\PYGZsq{}\PYGZbs{}G}
\PYG{c+c1}{\PYGZsh{}    SHOW CREATE TABLE `table1`\PYGZbs{}G}
\PYG{c+c1}{\PYGZsh{} EXPLAIN}
SELECT * FROM table1\PYG{l+s+se}{\PYGZbs{}G}
\end{sphinxVerbatim}

This section is a convenience: if you’re trying to optimize the queries you see
in the slow log, you probably want to examine the table structure and size.
These are copy\sphinxhyphen{}and\sphinxhyphen{}paste\sphinxhyphen{}ready commands to do that.

Finally, we see a sample of the queries in this class of query.  This is not a
random sample.  It is the query that performed the worst, according to the sort
order given by {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-order-by}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}order\sphinxhyphen{}by}}}}}.  You will normally see a commented \sphinxcode{\sphinxupquote{\# EXPLAIN}}
line just before it, so you can copy\sphinxhyphen{}paste the query to examine its EXPLAIN
plan. But for non\sphinxhyphen{}SELECT queries that isn’t possible to do, so the tool tries to
transform the query into a roughly equivalent SELECT query, and adds that below.

If you want to find this sample event in the log, use the offset mentioned
above, and something like the following:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
tail \PYGZhy{}c +\PYGZlt{}offset\PYGZgt{} /path/to/file \PYG{p}{|} head
\end{sphinxVerbatim}

See also {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-report-format}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}report\sphinxhyphen{}format}}}}}.


\section{QUERY REVIEW}
\label{\detokenize{mariadb-query-digest:query-review}}
A query {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-review}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}review}}}}} is the process of storing all the query fingerprints
analyzed.  This has several benefits:
\begin{itemize}
\item {} 
You can add metadata to classes of queries, such as marking them for follow\sphinxhyphen{}up,
adding notes to queries, or marking them with an issue ID for your issue
tracking system.

\item {} 
You can refer to the stored values on subsequent runs so you’ll know whether
you’ve seen a query before.  This can help you cut down on duplicated work.

\item {} 
You can store historical data such as the row count, query times, and generally
anything you can see in the report.

\end{itemize}

To use this feature, you run \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest}} with the {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-review}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}review}}}}} option.  It
will store the fingerprints and other information into the table you specify.
Next time you run it with the same option, it will do the following:
\begin{itemize}
\item {} 
It won’t show you queries you’ve already reviewed.  A query is considered to be
already reviewed if you’ve set a value for the \sphinxcode{\sphinxupquote{reviewed\_by}} column.  (If you
want to see queries you’ve already reviewed, use the {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-report-all}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}report\sphinxhyphen{}all}}}}} option.)

\item {} 
Queries that you’ve reviewed, and don’t appear in the output, will cause gaps in
the query number sequence in the first line of each paragraph.  And the value
you’ve specified for {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-limit}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}limit}}}}} will still be honored.  So if you’ve reviewed all
queries in the top 10 and you ask for the top 10, you won’t see anything in the
output.

\item {} 
If you want to see the queries you’ve already reviewed, you can specify
{\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-report-all}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}report\sphinxhyphen{}all}}}}}.  Then you’ll see the normal analysis output, but you’ll
also see the information from the review table, just below the execution time
graph.  For example,

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Review information}
\PYG{c+c1}{\PYGZsh{}      comments: really bad IN() subquery, fix soon!}
\PYG{c+c1}{\PYGZsh{}    first\PYGZus{}seen: 2008\PYGZhy{}12\PYGZhy{}01 11:48:57}
\PYG{c+c1}{\PYGZsh{}   jira\PYGZus{}ticket: 1933}
\PYG{c+c1}{\PYGZsh{}     last\PYGZus{}seen: 2008\PYGZhy{}12\PYGZhy{}18 11:49:07}
\PYG{c+c1}{\PYGZsh{}      priority: high}
\PYG{c+c1}{\PYGZsh{}   reviewed\PYGZus{}by: xaprb}
\PYG{c+c1}{\PYGZsh{}   reviewed\PYGZus{}on: 2008\PYGZhy{}12\PYGZhy{}18 15:03:11}
\end{sphinxVerbatim}

This metadata is useful because, as you analyze your queries, you get
your comments integrated right into the report.

\end{itemize}


\section{FINGERPRINTS}
\label{\detokenize{mariadb-query-digest:fingerprints}}
A query fingerprint is the abstracted form of a query, which makes it possible
to group similar queries together.  Abstracting a query removes literal values,
normalizes whitespace, and so on.  For example, consider these two queries:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
SELECT name, password FROM user WHERE \PYG{n+nv}{id}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}12823\PYGZsq{}}\PYG{p}{;}
\PYG{k}{select} name,   password from user
   where \PYG{n+nv}{id}\PYG{o}{=}\PYG{l+m}{5}\PYG{p}{;}
\end{sphinxVerbatim}

Both of those queries will fingerprint to

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{select} name, password from user where \PYG{n+nv}{id}\PYG{o}{=}?
\end{sphinxVerbatim}

Once the query’s fingerprint is known, we can then talk about a query as though
it represents all similar queries.

What \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest}} does is analogous to a GROUP BY statement in SQL.  (But
note that “multiple columns” doesn’t define a multi\sphinxhyphen{}column grouping; it defines
multiple reports!) If your command\sphinxhyphen{}line looks like this,

\begin{sphinxVerbatim}[commandchars=\\\{\}]
mariadb\PYGZhy{}query\PYGZhy{}digest               \PYG{l+s+se}{\PYGZbs{}}
    \PYGZhy{}\PYGZhy{}group\PYGZhy{}by fingerprint    \PYG{l+s+se}{\PYGZbs{}}
    \PYGZhy{}\PYGZhy{}order\PYGZhy{}by Query\PYGZus{}time:sum \PYG{l+s+se}{\PYGZbs{}}
    \PYGZhy{}\PYGZhy{}limit \PYG{l+m}{10}                \PYG{l+s+se}{\PYGZbs{}}
    slow.log
\end{sphinxVerbatim}

The corresponding pseudo\sphinxhyphen{}SQL looks like this:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
SELECT WORST\PYG{o}{(}query BY Query\PYGZus{}time\PYG{o}{)}, SUM\PYG{o}{(}Query\PYGZus{}time\PYG{o}{)}, ...
FROM /path/to/slow.log
GROUP BY FINGERPRINT\PYG{o}{(}query\PYG{o}{)}
ORDER BY SUM\PYG{o}{(}Query\PYGZus{}time\PYG{o}{)} DESC
LIMIT \PYG{l+m}{10}
\end{sphinxVerbatim}

You can also use the value \sphinxcode{\sphinxupquote{distill}}, which is a kind of super\sphinxhyphen{}fingerprint.
See {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-group-by}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}group\sphinxhyphen{}by}}}}} for more.

Query fingerprinting accommodates many special cases, which have proven
necessary in the real world.  For example, an \sphinxcode{\sphinxupquote{IN}} list with 5 literals
is really equivalent to one with 4 literals, so lists of literals are
collapsed to a single one.  If you find something that is not fingerprinted
properly, please submit a bug report with a reproducible test case.

Here is a list of transformations during fingerprinting, which might not
be exhaustive:
\begin{itemize}
\item {} 
Group all SELECT queries from mariadb\sphinxhyphen{}dump together, even if they are against
different tables.  The same applies to all queries from pt\sphinxhyphen{}table\sphinxhyphen{}checksum.

\item {} 
Shorten multi\sphinxhyphen{}value INSERT statements to a single VALUES() list.

\item {} 
Strip comments.

\item {} 
Abstract the databases in USE statements, so all USE statements are grouped
together.

\item {} 
Replace all literals, such as quoted strings.  For efficiency, the code that
replaces literal numbers is somewhat non\sphinxhyphen{}selective, and might replace some
things as numbers when they really are not.  Hexadecimal literals are also
replaced.  NULL is treated as a literal.  Numbers embedded in identifiers are
also replaced, so tables named similarly will be fingerprinted to the same
values (e.g. users\_2009 and users\_2010 will fingerprint identically).

\item {} 
Collapse all whitespace into a single space.

\item {} 
Lowercase the entire query.

\item {} 
Replace all literals inside of IN() and VALUES() lists with a single
placeholder, regardless of cardinality.

\item {} 
Collapse multiple identical UNION queries into a single one.

\end{itemize}


\section{OPTIONS}
\label{\detokenize{mariadb-query-digest:options}}
This tool accepts additional command\sphinxhyphen{}line arguments.  Refer to the
“SYNOPSIS” and usage information for details.
\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass}}\index{\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-ask-pass}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass}}\sphinxcode{\sphinxupquote{}}}
Prompt for a password when connecting to MariaDB.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}attribute\sphinxhyphen{}aliases@\spxentry{\sphinxhyphen{}\sphinxhyphen{}attribute\sphinxhyphen{}aliases}}\index{\sphinxhyphen{}\sphinxhyphen{}attribute\sphinxhyphen{}aliases@\spxentry{\sphinxhyphen{}\sphinxhyphen{}attribute\sphinxhyphen{}aliases}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-attribute-aliases}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}attribute\sphinxhyphen{}aliases}}\sphinxcode{\sphinxupquote{}}}
type: array; default: db|Schema

List of attribute|alias,etc.

Certain attributes have multiple names, like db and Schema.  If an event does
not have the primary attribute, \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest}} looks for an alias attribute.
If it finds an alias, it creates the primary attribute with the alias
attribute’s value and removes the alias attribute.

If the event has the primary attribute, all alias attributes are deleted.

This helps simplify event attributes so that, for example, there will not
be report lines for both db and Schema.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}attribute\sphinxhyphen{}value\sphinxhyphen{}limit@\spxentry{\sphinxhyphen{}\sphinxhyphen{}attribute\sphinxhyphen{}value\sphinxhyphen{}limit}}\index{\sphinxhyphen{}\sphinxhyphen{}attribute\sphinxhyphen{}value\sphinxhyphen{}limit@\spxentry{\sphinxhyphen{}\sphinxhyphen{}attribute\sphinxhyphen{}value\sphinxhyphen{}limit}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-attribute-value-limit}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}attribute\sphinxhyphen{}value\sphinxhyphen{}limit}}\sphinxcode{\sphinxupquote{}}}
type: int; default: 0

A sanity limit for attribute values.

This option deals with bugs in slow logging functionality that causes large
values for attributes.  If the attribute’s value is bigger than this, the
last\sphinxhyphen{}seen value for that class of query is used instead.
Disabled by default.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}charset@\spxentry{\sphinxhyphen{}\sphinxhyphen{}charset}}\index{\sphinxhyphen{}\sphinxhyphen{}charset@\spxentry{\sphinxhyphen{}\sphinxhyphen{}charset}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-charset}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}charset}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}A; type: string

Default character set.  If the value is utf8, sets Perl’s binmode on
STDOUT to utf8, passes the mysql\_enable\_utf8 option to DBD::mysql, and
runs SET NAMES UTF8 after connecting to MariaDB.  Any other value sets
binmode on STDOUT without the utf8 layer, and runs SET NAMES after
connecting to MariaDB.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}config@\spxentry{\sphinxhyphen{}\sphinxhyphen{}config}}\index{\sphinxhyphen{}\sphinxhyphen{}config@\spxentry{\sphinxhyphen{}\sphinxhyphen{}config}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-config}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}config}}\sphinxcode{\sphinxupquote{}}}
type: Array

Read this comma\sphinxhyphen{}separated list of config files; if specified, this must be the
first option on the command line.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}{[}no{]}continue\sphinxhyphen{}on\sphinxhyphen{}error@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}continue\sphinxhyphen{}on\sphinxhyphen{}error}}\index{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}continue\sphinxhyphen{}on\sphinxhyphen{}error@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}continue\sphinxhyphen{}on\sphinxhyphen{}error}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-0}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}}}\sphinxcode{\sphinxupquote{{[}no{]}continue\sphinxhyphen{}on\sphinxhyphen{}error}}}
default: yes

Continue parsing even if there is an error.  The tool will not continue
forever: it stops once any process causes 100 errors, in which case there
is probably a bug in the tool or the input is invalid.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}{[}no{]}create\sphinxhyphen{}history\sphinxhyphen{}table@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}create\sphinxhyphen{}history\sphinxhyphen{}table}}\index{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}create\sphinxhyphen{}history\sphinxhyphen{}table@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}create\sphinxhyphen{}history\sphinxhyphen{}table}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-1}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}}}\sphinxcode{\sphinxupquote{{[}no{]}create\sphinxhyphen{}history\sphinxhyphen{}table}}}
default: yes

Create the {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-history}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}history}}}}} table if it does not exist.

This option causes the table specified by {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-history}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}history}}}}} to be created
with the default structure shown in the documentation for {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-history}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}history}}}}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}{[}no{]}create\sphinxhyphen{}review\sphinxhyphen{}table@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}create\sphinxhyphen{}review\sphinxhyphen{}table}}\index{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}create\sphinxhyphen{}review\sphinxhyphen{}table@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}create\sphinxhyphen{}review\sphinxhyphen{}table}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-2}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}}}\sphinxcode{\sphinxupquote{{[}no{]}create\sphinxhyphen{}review\sphinxhyphen{}table}}}
default: yes

Create the {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-review}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}review}}}}} table if it does not exist.

This option causes the table specified by {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-review}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}review}}}}} to be created
with the default structure shown in the documentation for {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-review}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}review}}}}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}daemonize@\spxentry{\sphinxhyphen{}\sphinxhyphen{}daemonize}}\index{\sphinxhyphen{}\sphinxhyphen{}daemonize@\spxentry{\sphinxhyphen{}\sphinxhyphen{}daemonize}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-daemonize}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}daemonize}}\sphinxcode{\sphinxupquote{}}}
Fork to the background and detach from the shell.  POSIX
operating systems only.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}database@\spxentry{\sphinxhyphen{}\sphinxhyphen{}database}}\index{\sphinxhyphen{}\sphinxhyphen{}database@\spxentry{\sphinxhyphen{}\sphinxhyphen{}database}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-database}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}database}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}D; type: string

Connect to this database.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}defaults\sphinxhyphen{}file@\spxentry{\sphinxhyphen{}\sphinxhyphen{}defaults\sphinxhyphen{}file}}\index{\sphinxhyphen{}\sphinxhyphen{}defaults\sphinxhyphen{}file@\spxentry{\sphinxhyphen{}\sphinxhyphen{}defaults\sphinxhyphen{}file}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-defaults-file}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}defaults\sphinxhyphen{}file}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}F; type: string

Only read mariadb options from the given file.  You must give an absolute pathname.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}embedded\sphinxhyphen{}attributes@\spxentry{\sphinxhyphen{}\sphinxhyphen{}embedded\sphinxhyphen{}attributes}}\index{\sphinxhyphen{}\sphinxhyphen{}embedded\sphinxhyphen{}attributes@\spxentry{\sphinxhyphen{}\sphinxhyphen{}embedded\sphinxhyphen{}attributes}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-embedded-attributes}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}embedded\sphinxhyphen{}attributes}}\sphinxcode{\sphinxupquote{}}}
type: array

Two Perl regex patterns to capture pseudo\sphinxhyphen{}attributes embedded in queries.

Embedded attributes might be special attribute\sphinxhyphen{}value pairs that you’ve hidden
in comments.  The first regex should match the entire set of attributes (in
case there are multiple).  The second regex should match and capture
attribute\sphinxhyphen{}value pairs from the first regex.

For example, suppose your query looks like the following:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
SELECT * from users \PYGZhy{}\PYGZhy{} file: /login.php, line: \PYG{l+m}{493}\PYG{p}{;}
\end{sphinxVerbatim}

You might run \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest}} with the following option:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
:program:\PYG{l+s+sb}{`}mariadb\PYGZhy{}query\PYGZhy{}digest\PYG{l+s+sb}{`} \PYGZhy{}\PYGZhy{}embedded\PYGZhy{}attributes \PYG{l+s+s1}{\PYGZsq{} \PYGZhy{}\PYGZhy{} .*\PYGZsq{}},\PYG{l+s+s1}{\PYGZsq{}(\PYGZbs{}w+): ([\PYGZca{}\PYGZbs{},]+)\PYGZsq{}}
\end{sphinxVerbatim}

The first regular expression captures the whole comment:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{l+s+s2}{\PYGZdq{} \PYGZhy{}\PYGZhy{} file: /login.php, line: 493;\PYGZdq{}}
\end{sphinxVerbatim}

The second one splits it into attribute\sphinxhyphen{}value pairs and adds them to the event:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
ATTRIBUTE  \PYG{n+nv}{VALUE}
\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}  \PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}
file       /login.php
line       \PYG{l+m}{493}
\end{sphinxVerbatim}

\sphinxstylestrong{NOTE}: All commas in the regex patterns must be escaped with otherwise
the pattern will break.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}expected\sphinxhyphen{}range@\spxentry{\sphinxhyphen{}\sphinxhyphen{}expected\sphinxhyphen{}range}}\index{\sphinxhyphen{}\sphinxhyphen{}expected\sphinxhyphen{}range@\spxentry{\sphinxhyphen{}\sphinxhyphen{}expected\sphinxhyphen{}range}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-expected-range}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}expected\sphinxhyphen{}range}}\sphinxcode{\sphinxupquote{}}}
type: array; default: 5,10

Explain items when there are more or fewer than expected.

Defines the number of items expected to be seen in the report given by
\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}report}}, as controlled by {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-limit}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}limit}}}}} and {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-outliers}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}outliers}}}}}.  If
there  are more or fewer items in the report, each one will explain why it was
included.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}explain@\spxentry{\sphinxhyphen{}\sphinxhyphen{}explain}}\index{\sphinxhyphen{}\sphinxhyphen{}explain@\spxentry{\sphinxhyphen{}\sphinxhyphen{}explain}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-explain}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}explain}}\sphinxcode{\sphinxupquote{}}}
type: DSN

Run EXPLAIN for the sample query with this DSN and print results.

This works only when {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-group-by}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}group\sphinxhyphen{}by}}}}} includes fingerprint.  It causes
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest}} to run EXPLAIN and include the output into the report.  For
safety, queries that appear to have a subquery that EXPLAIN will execute won’t
be EXPLAINed.  Those are typically “derived table” queries of the form

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{select} ... from \PYG{o}{(} \PYG{k}{select} .... \PYG{o}{)} der\PYG{p}{;}
\end{sphinxVerbatim}

The EXPLAIN results are printed as a full vertical format in the event report,
which appears at the end of each event report in vertical style
(\sphinxcode{\sphinxupquote{\textbackslash{}G}}) just like MariaDB prints it.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}filter@\spxentry{\sphinxhyphen{}\sphinxhyphen{}filter}}\index{\sphinxhyphen{}\sphinxhyphen{}filter@\spxentry{\sphinxhyphen{}\sphinxhyphen{}filter}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-filter}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}filter}}\sphinxcode{\sphinxupquote{}}}
type: string

Discard events for which this Perl code doesn’t return true.

This option is a string of Perl code or a file containing Perl code that gets
compiled into a subroutine with one argument: \$event.  This is a hashref.
If the given value is a readable file, then \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest}} reads the entire
file and uses its contents as the code.  The file should not contain
a shebang (\#!/usr/bin/perl) line.

If the code returns true, the chain of callbacks continues; otherwise it ends.
The code is the last statement in the subroutine other than \sphinxcode{\sphinxupquote{return \$event}}.
The subroutine template is:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
sub \PYG{o}{\PYGZob{}} \PYG{n+nv}{\PYGZdl{}event} \PYG{o}{=} shift\PYG{p}{;} filter \PYG{o}{\PYGZam{}\PYGZam{}} \PYG{k}{return} \PYG{n+nv}{\PYGZdl{}event}\PYG{p}{;} \PYG{o}{\PYGZcb{}}
\end{sphinxVerbatim}

Filters given on the command line are wrapped inside parentheses like like
\sphinxcode{\sphinxupquote{( filter )}}.  For complex, multi\sphinxhyphen{}line filters, you must put the code inside
a file so it will not be wrapped inside parentheses.  Either way, the filter
must produce syntactically valid code given the template.  For example, an
if\sphinxhyphen{}else branch given on the command line would not be valid:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZhy{}\PYGZhy{}filter \PYG{l+s+s1}{\PYGZsq{}if () \PYGZob{} \PYGZcb{} else \PYGZob{} \PYGZcb{}\PYGZsq{}}  \PYG{c+c1}{\PYGZsh{} WRONG}
\end{sphinxVerbatim}

Since it’s given on the command line, the if\sphinxhyphen{}else branch would be wrapped inside
parentheses which is not syntactically valid.  So to accomplish something more
complex like this would require putting the code in a file, for example
filter.txt:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
my \PYG{n+nv}{\PYGZdl{}event\PYGZus{}ok}\PYG{p}{;} \PYG{k}{if} \PYG{o}{(}...\PYG{o}{)} \PYG{o}{\PYGZob{}} \PYG{n+nv}{\PYGZdl{}event\PYGZus{}ok}\PYG{o}{=}\PYG{l+m}{1}\PYG{p}{;} \PYG{o}{\PYGZcb{}} \PYG{k}{else} \PYG{o}{\PYGZob{}} \PYG{n+nv}{\PYGZdl{}event\PYGZus{}ok}\PYG{o}{=}\PYG{l+m}{0}\PYG{p}{;} \PYG{o}{\PYGZcb{}} \PYG{n+nv}{\PYGZdl{}event\PYGZus{}ok}
\end{sphinxVerbatim}

Then specify \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}filter filter.txt}} to read the code from filter.txt.

If the filter code won’t compile, \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest}} will die with an error.
If the filter code does compile, an error may still occur at runtime if the
code tries to do something wrong (like pattern match an undefined value).
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest}} does not provide any safeguards so code carefully!

An example filter that discards everything but SELECT statements:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZhy{}\PYGZhy{}filter \PYG{l+s+s1}{\PYGZsq{}\PYGZdl{}event\PYGZhy{}\PYGZgt{}\PYGZob{}arg\PYGZcb{} =\PYGZti{} m/\PYGZca{}select/i\PYGZsq{}}
\end{sphinxVerbatim}

This is compiled into a subroutine like the following:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
sub \PYG{o}{\PYGZob{}} \PYG{n+nv}{\PYGZdl{}event} \PYG{o}{=} shift\PYG{p}{;} \PYG{o}{(} \PYG{n+nv}{\PYGZdl{}event}\PYGZhy{}\PYGZgt{}\PYG{o}{\PYGZob{}}arg\PYG{o}{\PYGZcb{}} \PYG{o}{=}\PYGZti{} m/\PYGZca{}select/i \PYG{o}{)} \PYG{o}{\PYGZam{}\PYGZam{}} \PYG{k}{return} \PYG{n+nv}{\PYGZdl{}event}\PYG{p}{;} \PYG{o}{\PYGZcb{}}
\end{sphinxVerbatim}

It is permissible for the code to have side effects (to alter \sphinxcode{\sphinxupquote{\$event}}).

See “ATTRIBUTES REFERENCE” for a list of common and {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-type}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}type}}}}} specific
attributes.

Here are more examples of filter code:

Host/IP matches domain.com
\begin{quote}

\textendash{}filter ‘(\$event\sphinxhyphen{}\textgreater{}\{host\} || \$event\sphinxhyphen{}\textgreater{}\{ip\} || “”) =\textasciitilde{} m/domain.com/’

Sometimes MariaDB logs the host where the IP is expected.  Therefore, we
check both.
\end{quote}

User matches john
\begin{quote}

\textendash{}filter ‘(\$event\sphinxhyphen{}\textgreater{}\{user\} || “”) =\textasciitilde{} m/john/’
\end{quote}

More than 1 warning
\begin{quote}

\textendash{}filter ‘(\$event\sphinxhyphen{}\textgreater{}\{Warning\_count\} || 0) \textgreater{} 1’
\end{quote}

Query does full table scan or full join
\begin{quote}

\textendash{}filter ‘((\$event\sphinxhyphen{}\textgreater{}\{Full\_scan\} || “”) eq “Yes”) || ((\$event\sphinxhyphen{}\textgreater{}\{Full\_join\} || “”) eq “Yes”)’
\end{quote}

Query was not served from query cache
\begin{quote}

\textendash{}filter ‘(\$event\sphinxhyphen{}\textgreater{}\{QC\_Hit\} || “”) eq “No”’
\end{quote}

Query is 1 MB or larger
\begin{quote}

\textendash{}filter ‘\$event\sphinxhyphen{}\textgreater{}\{bytes\} \textgreater{}= 1\_048\_576’
\end{quote}

Since {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-filter}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}filter}}}}} allows you to alter \sphinxcode{\sphinxupquote{\$event}}, you can use it to do other
things, like create new attributes.  See “ATTRIBUTES” for an example.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}group\sphinxhyphen{}by@\spxentry{\sphinxhyphen{}\sphinxhyphen{}group\sphinxhyphen{}by}}\index{\sphinxhyphen{}\sphinxhyphen{}group\sphinxhyphen{}by@\spxentry{\sphinxhyphen{}\sphinxhyphen{}group\sphinxhyphen{}by}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-group-by}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}group\sphinxhyphen{}by}}\sphinxcode{\sphinxupquote{}}}
type: Array; default: fingerprint

Which attribute of the events to group by.

In general, you can group queries into classes based on any attribute of the
query, such as \sphinxcode{\sphinxupquote{user}} or \sphinxcode{\sphinxupquote{db}}, which will by default show you which users
and which databases get the most \sphinxcode{\sphinxupquote{Query\_time}}.  The default attribute,
\sphinxcode{\sphinxupquote{fingerprint}}, groups similar, abstracted queries into classes; see below
and see also “FINGERPRINTS”.

A report is printed for each {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-group-by}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}group\sphinxhyphen{}by}}}}} value (unless \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}report}} is
given).  Therefore, \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}group\sphinxhyphen{}by user,db}} means “report on queries with the
same user and report on queries with the same db”; it does not mean “report
on queries with the same user and db.”  See also “OUTPUT”.

Every value must have a corresponding value in the same position in
{\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-order-by}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}order\sphinxhyphen{}by}}}}}.  However, adding values to {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-group-by}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}group\sphinxhyphen{}by}}}}} will automatically
add values to {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-order-by}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}order\sphinxhyphen{}by}}}}}, for your convenience.

There are several magical values that cause some extra data mining to happen
before the grouping takes place:

fingerprint
\begin{quote}

This causes events to be fingerprinted to abstract queries into
a canonical form, which is then used to group events together into a class.
See “FINGERPRINTS” for more about fingerprinting.
\end{quote}

tables
\begin{quote}

This causes events to be inspected for what appear to be tables, and
then aggregated by that.  Note that a query that contains two or more tables
will be counted as many times as there are tables; so a join against two tables
will count the Query\_time against both tables.
\end{quote}

distill
\begin{quote}

This is a sort of super\sphinxhyphen{}fingerprint that collapses queries down
into a suggestion of what they do, such as \sphinxcode{\sphinxupquote{INSERT SELECT table1 table2}}.
\end{quote}

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}help@\spxentry{\sphinxhyphen{}\sphinxhyphen{}help}}\index{\sphinxhyphen{}\sphinxhyphen{}help@\spxentry{\sphinxhyphen{}\sphinxhyphen{}help}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-help}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}help}}\sphinxcode{\sphinxupquote{}}}
Show help and exit.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}history@\spxentry{\sphinxhyphen{}\sphinxhyphen{}history}}\index{\sphinxhyphen{}\sphinxhyphen{}history@\spxentry{\sphinxhyphen{}\sphinxhyphen{}history}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-history}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}history}}\sphinxcode{\sphinxupquote{}}}
type: DSN

Save metrics for each query class in the given table.  \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest}} saves
query metrics (query time, lock time, etc.) to this table so you can see how
query classes change over time.

The default table is \sphinxcode{\sphinxupquote{mariadb\_tools.query\_history}}.  Specify database
(D) and table (t) DSN options to override the default.  The database and
table are automatically created unless \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}create\sphinxhyphen{}history\sphinxhyphen{}table}}
is specified (see \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}create\sphinxhyphen{}history\sphinxhyphen{}table}}).

\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest}} inspects the columns in the table.  The table must have at
least the following columns:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{CREATE} \PYG{k}{TABLE} \PYG{n}{query\PYGZus{}review\PYGZus{}history} \PYG{p}{(}
  \PYG{n}{checksum}     \PYG{n+nb}{CHAR}\PYG{p}{(}\PYG{l+m+mi}{32}\PYG{p}{)} \PYG{k}{NOT} \PYG{k}{NULL}\PYG{p}{,}
  \PYG{n}{sample}       \PYG{n}{LONGTEXT} \PYG{k}{NOT} \PYG{k}{NULL}
\PYG{p}{)}\PYG{p}{;}
\end{sphinxVerbatim}

Any columns not mentioned above are inspected to see if they follow a certain
naming convention.  The column is special if the name ends with an underscore
followed by any of these values:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
pct\PYG{p}{|}avg\PYG{p}{|}cnt\PYG{p}{|}sum\PYG{p}{|}min\PYG{p}{|}max\PYG{p}{|}pct\PYGZus{}95\PYG{p}{|}stddev\PYG{p}{|}median\PYG{p}{|}rank
\end{sphinxVerbatim}

If the column ends with one of those values, then the prefix is interpreted as
the event attribute to store in that column, and the suffix is interpreted as
the metric to be stored.  For example, a column named \sphinxcode{\sphinxupquote{Query\_time\_min}} will be
used to store the minimum \sphinxcode{\sphinxupquote{Query\_time}} for the class of events.

The table should also have a primary key, but that is up to you, depending on
how you want to store the historical data.  We suggest adding ts\_min and ts\_max
columns and making them part of the primary key along with the checksum.  But
you could also just add a ts\_min column and make it a DATE type, so you’d get
one row per class of queries per day.

The following table definition is used for \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}create\sphinxhyphen{}history\sphinxhyphen{}table}}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{CREATE} \PYG{k}{TABLE} \PYG{k}{IF} \PYG{k}{NOT} \PYG{k}{EXISTS} \PYG{n}{query\PYGZus{}history} \PYG{p}{(}
  \PYG{n}{checksum}             \PYG{n+nb}{CHAR}\PYG{p}{(}\PYG{l+m+mi}{32}\PYG{p}{)} \PYG{k}{NOT} \PYG{k}{NULL}\PYG{p}{,}
  \PYG{n}{sample}               \PYG{n}{LONGTEXT} \PYG{k}{NOT} \PYG{k}{NULL}\PYG{p}{,}
  \PYG{n}{ts\PYGZus{}min}               \PYG{n}{DATETIME}\PYG{p}{,}
  \PYG{n}{ts\PYGZus{}max}               \PYG{n}{DATETIME}\PYG{p}{,}
  \PYG{n}{ts\PYGZus{}cnt}               \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Query\PYGZus{}time\PYGZus{}sum}       \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Query\PYGZus{}time\PYGZus{}min}       \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Query\PYGZus{}time\PYGZus{}max}       \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Query\PYGZus{}time\PYGZus{}pct\PYGZus{}95}    \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Query\PYGZus{}time\PYGZus{}stddev}    \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Query\PYGZus{}time\PYGZus{}median}    \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Lock\PYGZus{}time\PYGZus{}sum}        \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Lock\PYGZus{}time\PYGZus{}min}        \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Lock\PYGZus{}time\PYGZus{}max}        \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Lock\PYGZus{}time\PYGZus{}pct\PYGZus{}95}     \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Lock\PYGZus{}time\PYGZus{}stddev}     \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Lock\PYGZus{}time\PYGZus{}median}     \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Rows\PYGZus{}sent\PYGZus{}sum}        \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Rows\PYGZus{}sent\PYGZus{}min}        \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Rows\PYGZus{}sent\PYGZus{}max}        \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Rows\PYGZus{}sent\PYGZus{}pct\PYGZus{}95}     \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Rows\PYGZus{}sent\PYGZus{}stddev}     \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Rows\PYGZus{}sent\PYGZus{}median}     \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Rows\PYGZus{}examined\PYGZus{}sum}    \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Rows\PYGZus{}examined\PYGZus{}min}    \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Rows\PYGZus{}examined\PYGZus{}max}    \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Rows\PYGZus{}examined\PYGZus{}pct\PYGZus{}95} \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Rows\PYGZus{}examined\PYGZus{}stddev} \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Rows\PYGZus{}examined\PYGZus{}median} \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{c+c1}{\PYGZhy{}\PYGZhy{} extended slowlog attributes}
  \PYG{n}{Rows\PYGZus{}affected\PYGZus{}sum}             \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Rows\PYGZus{}affected\PYGZus{}min}             \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Rows\PYGZus{}affected\PYGZus{}max}             \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Rows\PYGZus{}affected\PYGZus{}pct\PYGZus{}95}          \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Rows\PYGZus{}affected\PYGZus{}stddev}          \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Rows\PYGZus{}affected\PYGZus{}median}          \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Rows\PYGZus{}read\PYGZus{}sum}                 \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Rows\PYGZus{}read\PYGZus{}min}                 \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Rows\PYGZus{}read\PYGZus{}max}                 \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Rows\PYGZus{}read\PYGZus{}pct\PYGZus{}95}              \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Rows\PYGZus{}read\PYGZus{}stddev}              \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Rows\PYGZus{}read\PYGZus{}median}              \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Merge\PYGZus{}passes\PYGZus{}sum}              \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Merge\PYGZus{}passes\PYGZus{}min}              \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Merge\PYGZus{}passes\PYGZus{}max}              \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Merge\PYGZus{}passes\PYGZus{}pct\PYGZus{}95}           \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Merge\PYGZus{}passes\PYGZus{}stddev}           \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Merge\PYGZus{}passes\PYGZus{}median}           \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{InnoDB\PYGZus{}IO\PYGZus{}r\PYGZus{}ops\PYGZus{}min}           \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{InnoDB\PYGZus{}IO\PYGZus{}r\PYGZus{}ops\PYGZus{}max}           \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{InnoDB\PYGZus{}IO\PYGZus{}r\PYGZus{}ops\PYGZus{}pct\PYGZus{}95}        \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{InnoDB\PYGZus{}IO\PYGZus{}r\PYGZus{}ops\PYGZus{}stddev}        \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{InnoDB\PYGZus{}IO\PYGZus{}r\PYGZus{}ops\PYGZus{}median}        \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{InnoDB\PYGZus{}IO\PYGZus{}r\PYGZus{}bytes\PYGZus{}min}         \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{InnoDB\PYGZus{}IO\PYGZus{}r\PYGZus{}bytes\PYGZus{}max}         \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{InnoDB\PYGZus{}IO\PYGZus{}r\PYGZus{}bytes\PYGZus{}pct\PYGZus{}95}      \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{InnoDB\PYGZus{}IO\PYGZus{}r\PYGZus{}bytes\PYGZus{}stddev}      \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{InnoDB\PYGZus{}IO\PYGZus{}r\PYGZus{}bytes\PYGZus{}median}      \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{InnoDB\PYGZus{}IO\PYGZus{}r\PYGZus{}wait\PYGZus{}min}          \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{InnoDB\PYGZus{}IO\PYGZus{}r\PYGZus{}wait\PYGZus{}max}          \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{InnoDB\PYGZus{}IO\PYGZus{}r\PYGZus{}wait\PYGZus{}pct\PYGZus{}95}       \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{InnoDB\PYGZus{}IO\PYGZus{}r\PYGZus{}wait\PYGZus{}stddev}       \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{InnoDB\PYGZus{}IO\PYGZus{}r\PYGZus{}wait\PYGZus{}median}       \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{InnoDB\PYGZus{}rec\PYGZus{}lock\PYGZus{}wait\PYGZus{}min}      \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{InnoDB\PYGZus{}rec\PYGZus{}lock\PYGZus{}wait\PYGZus{}max}      \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{InnoDB\PYGZus{}rec\PYGZus{}lock\PYGZus{}wait\PYGZus{}pct\PYGZus{}95}   \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{InnoDB\PYGZus{}rec\PYGZus{}lock\PYGZus{}wait\PYGZus{}stddev}   \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{InnoDB\PYGZus{}rec\PYGZus{}lock\PYGZus{}wait\PYGZus{}median}   \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{InnoDB\PYGZus{}queue\PYGZus{}wait\PYGZus{}min}         \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{InnoDB\PYGZus{}queue\PYGZus{}wait\PYGZus{}max}         \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{InnoDB\PYGZus{}queue\PYGZus{}wait\PYGZus{}pct\PYGZus{}95}      \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{InnoDB\PYGZus{}queue\PYGZus{}wait\PYGZus{}stddev}      \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{InnoDB\PYGZus{}queue\PYGZus{}wait\PYGZus{}median}      \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{InnoDB\PYGZus{}pages\PYGZus{}distinct\PYGZus{}min}     \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{InnoDB\PYGZus{}pages\PYGZus{}distinct\PYGZus{}max}     \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{InnoDB\PYGZus{}pages\PYGZus{}distinct\PYGZus{}pct\PYGZus{}95}  \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{InnoDB\PYGZus{}pages\PYGZus{}distinct\PYGZus{}stddev}  \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{InnoDB\PYGZus{}pages\PYGZus{}distinct\PYGZus{}median}  \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{c+c1}{\PYGZhy{}\PYGZhy{} Boolean (Yes/No) attributes.  Only the cnt and sum are needed}
  \PYG{c+c1}{\PYGZhy{}\PYGZhy{} for these.  cnt is how many times is attribute was recorded,}
  \PYG{c+c1}{\PYGZhy{}\PYGZhy{} and sum is how many of those times the value was Yes.  So}
  \PYG{c+c1}{\PYGZhy{}\PYGZhy{} sum/cnt * 100 equals the percentage of recorded times that}
  \PYG{c+c1}{\PYGZhy{}\PYGZhy{} the value was Yes.}
  \PYG{n}{QC\PYGZus{}Hit\PYGZus{}cnt}          \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{QC\PYGZus{}Hit\PYGZus{}sum}          \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Full\PYGZus{}scan\PYGZus{}cnt}       \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Full\PYGZus{}scan\PYGZus{}sum}       \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Full\PYGZus{}join\PYGZus{}cnt}       \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Full\PYGZus{}join\PYGZus{}sum}       \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Tmp\PYGZus{}table\PYGZus{}cnt}       \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Tmp\PYGZus{}table\PYGZus{}sum}       \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Tmp\PYGZus{}table\PYGZus{}on\PYGZus{}disk\PYGZus{}cnt} \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Tmp\PYGZus{}table\PYGZus{}on\PYGZus{}disk\PYGZus{}sum} \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Filesort\PYGZus{}cnt}          \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Filesort\PYGZus{}sum}          \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Filesort\PYGZus{}on\PYGZus{}disk\PYGZus{}cnt}  \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{n}{Filesort\PYGZus{}on\PYGZus{}disk\PYGZus{}sum}  \PYG{n+nb}{FLOAT}\PYG{p}{,}
  \PYG{k}{PRIMARY} \PYG{k}{KEY}\PYG{p}{(}\PYG{n}{checksum}\PYG{p}{,} \PYG{n}{ts\PYGZus{}min}\PYG{p}{,} \PYG{n}{ts\PYGZus{}max}\PYG{p}{)}
\PYG{p}{)}\PYG{p}{;}
\end{sphinxVerbatim}

Note that we store the count (cnt) for the ts attribute only; it will be
redundant to store this for other attributes.

Starting from MariaDB Toolkit 3.0.11, the checksum function has been updated to use 32 chars in the MD5 sum.
This causes the checksum field in the history table will have a different value than in the previous versions of the tool.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}host@\spxentry{\sphinxhyphen{}\sphinxhyphen{}host}}\index{\sphinxhyphen{}\sphinxhyphen{}host@\spxentry{\sphinxhyphen{}\sphinxhyphen{}host}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-host}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}host}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}h; type: string

Connect to host.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}attributes@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}attributes}}\index{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}attributes@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}attributes}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-ignore-attributes}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}ignore\sphinxhyphen{}attributes}}\sphinxcode{\sphinxupquote{}}}
type: array; default: arg, cmd, insert\_id, ip, port, Thread\_id, timestamp, exptime, flags, key, res, val, server\_id, offset, end\_log\_pos, Xid

Do not aggregate these attributes.  Some attributes are not query metrics
but metadata which doesn’t need to be (or can’t be) aggregated.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}inherit\sphinxhyphen{}attributes@\spxentry{\sphinxhyphen{}\sphinxhyphen{}inherit\sphinxhyphen{}attributes}}\index{\sphinxhyphen{}\sphinxhyphen{}inherit\sphinxhyphen{}attributes@\spxentry{\sphinxhyphen{}\sphinxhyphen{}inherit\sphinxhyphen{}attributes}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-inherit-attributes}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}inherit\sphinxhyphen{}attributes}}\sphinxcode{\sphinxupquote{}}}
type: array; default: db,ts

If missing, inherit these attributes from the last event that had them.

This option sets which attributes are inherited or carried forward to events
which do not have them.  For example, if one event has the db attribute equal
to “foo”, but the next event doesn’t have the db attribute, then it inherits
“foo” for its db attribute.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}interval@\spxentry{\sphinxhyphen{}\sphinxhyphen{}interval}}\index{\sphinxhyphen{}\sphinxhyphen{}interval@\spxentry{\sphinxhyphen{}\sphinxhyphen{}interval}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-interval}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}interval}}\sphinxcode{\sphinxupquote{}}}
type: float; default: .1

How frequently to poll the processlist, in seconds.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}iterations@\spxentry{\sphinxhyphen{}\sphinxhyphen{}iterations}}\index{\sphinxhyphen{}\sphinxhyphen{}iterations@\spxentry{\sphinxhyphen{}\sphinxhyphen{}iterations}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-iterations}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}iterations}}\sphinxcode{\sphinxupquote{}}}
type: int; default: 1

How many times to iterate through the collect\sphinxhyphen{}and\sphinxhyphen{}report cycle.  If 0, iterate
to infinity.  Each iteration runs for {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-run-time}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time}}}}} amount of time.  An
iteration is usually determined by an amount of time and a report is printed
when that amount of time elapses.  With {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-run-time-mode}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time\sphinxhyphen{}mode}}}}} \sphinxcode{\sphinxupquote{interval}},
an interval is instead determined by the interval time you specify with
{\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-run-time}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time}}}}}.  See {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-run-time}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time}}}}} and {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-run-time-mode}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time\sphinxhyphen{}mode}}}}} for more
information.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}limit@\spxentry{\sphinxhyphen{}\sphinxhyphen{}limit}}\index{\sphinxhyphen{}\sphinxhyphen{}limit@\spxentry{\sphinxhyphen{}\sphinxhyphen{}limit}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-limit}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}limit}}\sphinxcode{\sphinxupquote{}}}
type: Array; default: 95\%:20

Limit output to the given percentage or count.

If the argument is an integer, report only the top N worst queries.  If the
argument is an integer followed by the \sphinxcode{\sphinxupquote{\%}} sign, report that percentage of the
worst queries.  If the percentage is followed by a colon and another integer,
report the top percentage or the number specified by that integer, whichever
comes first.

The value is actually a comma\sphinxhyphen{}separated array of values, one for each item in
{\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-group-by}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}group\sphinxhyphen{}by}}}}}.  If you don’t specify a value for any of those items, the
default is the top 95\%.

See also {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-outliers}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}outliers}}}}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}log@\spxentry{\sphinxhyphen{}\sphinxhyphen{}log}}\index{\sphinxhyphen{}\sphinxhyphen{}log@\spxentry{\sphinxhyphen{}\sphinxhyphen{}log}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-log}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}log}}\sphinxcode{\sphinxupquote{}}}
type: string

Print all output to this file when daemonized.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}hostname\sphinxhyphen{}length@\spxentry{\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}hostname\sphinxhyphen{}length}}\index{\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}hostname\sphinxhyphen{}length@\spxentry{\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}hostname\sphinxhyphen{}length}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-max-hostname-length}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}hostname\sphinxhyphen{}length}}\sphinxcode{\sphinxupquote{}}}
type: int; default: 10

Trim host names in reports to this length. 0=Do not trim host names.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}line\sphinxhyphen{}length@\spxentry{\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}line\sphinxhyphen{}length}}\index{\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}line\sphinxhyphen{}length@\spxentry{\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}line\sphinxhyphen{}length}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-max-line-length}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}line\sphinxhyphen{}length}}\sphinxcode{\sphinxupquote{}}}
type: int; default: 74

Trim lines to this length. 0=Do not trim lines.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}order\sphinxhyphen{}by@\spxentry{\sphinxhyphen{}\sphinxhyphen{}order\sphinxhyphen{}by}}\index{\sphinxhyphen{}\sphinxhyphen{}order\sphinxhyphen{}by@\spxentry{\sphinxhyphen{}\sphinxhyphen{}order\sphinxhyphen{}by}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-order-by}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}order\sphinxhyphen{}by}}\sphinxcode{\sphinxupquote{}}}
type: Array; default: Query\_time:sum

Sort events by this attribute and aggregate function.

This is a comma\sphinxhyphen{}separated list of order\sphinxhyphen{}by expressions, one for each
{\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-group-by}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}group\sphinxhyphen{}by}}}}} attribute.  The default \sphinxcode{\sphinxupquote{Query\_time:sum}} is used for
{\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-group-by}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}group\sphinxhyphen{}by}}}}} attributes without explicitly given {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-order-by}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}order\sphinxhyphen{}by}}}}} attributes
(that is, if you specify more {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-group-by}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}group\sphinxhyphen{}by}}}}} attributes than corresponding
{\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-order-by}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}order\sphinxhyphen{}by}}}}} attributes).  The syntax is \sphinxcode{\sphinxupquote{attribute:aggregate}}.  See
“ATTRIBUTES” for valid attributes.  Valid aggregates are:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
Aggregate \PYG{n+nv}{Meaning}
\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=} \PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}
sum       Sum/total attribute value
min       Minimum attribute value
max       Maximum attribute value
cnt       Frequency/count of the query
\end{sphinxVerbatim}

For example, the default \sphinxcode{\sphinxupquote{Query\_time:sum}} means that queries in the
query analysis report will be ordered (sorted) by their total query execution
time (“Exec time”).  \sphinxcode{\sphinxupquote{Query\_time:max}} orders the queries by their
maximum query execution time, so the query with the single largest
\sphinxcode{\sphinxupquote{Query\_time}} will be list first.  \sphinxcode{\sphinxupquote{cnt}} refers more to the frequency
of the query as a whole, how often it appears; “Count” is its corresponding
line in the query analysis report.  So any attribute and \sphinxcode{\sphinxupquote{cnt}} should yield
the same report wherein queries are sorted by the number of times they
appear.

When parsing general logs ({\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-type}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}type}}}}} \sphinxcode{\sphinxupquote{genlog}}), the default {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-order-by}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}order\sphinxhyphen{}by}}}}}
becomes \sphinxcode{\sphinxupquote{Query\_time:cnt}}.  General logs do not report query times so only
the \sphinxcode{\sphinxupquote{cnt}} aggregate makes sense because all query times are zero.

If you specify an attribute that doesn’t exist in the events, then
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest}} falls back to the default \sphinxcode{\sphinxupquote{Query\_time:sum}} and prints a notice
at the beginning of the report for each query class.  You can create attributes
with {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-filter}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}filter}}}}} and order by them; see “ATTRIBUTES” for an example.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}outliers@\spxentry{\sphinxhyphen{}\sphinxhyphen{}outliers}}\index{\sphinxhyphen{}\sphinxhyphen{}outliers@\spxentry{\sphinxhyphen{}\sphinxhyphen{}outliers}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-outliers}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}outliers}}\sphinxcode{\sphinxupquote{}}}
type: array; default: Query\_time:1:10

Report outliers by attribute:percentile:count.

The syntax of this option is a comma\sphinxhyphen{}separated list of colon\sphinxhyphen{}delimited strings.
The first field is the attribute by which an outlier is defined.  The second is
a number that is compared to the attribute’s 95th percentile.  The third is
optional, and is compared to the attribute’s cnt aggregate.  Queries that pass
this specification are added to the report, regardless of any limits you
specified in {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-limit}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}limit}}}}}.

For example, to report queries whose 95th percentile Query\_time is at least 60
seconds and which are seen at least 5 times, use the following argument:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZhy{}\PYGZhy{}outliers Query\PYGZus{}time:60:5
\end{sphinxVerbatim}

You can specify an \textendash{}outliers option for each value in {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-group-by}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}group\sphinxhyphen{}by}}}}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}output@\spxentry{\sphinxhyphen{}\sphinxhyphen{}output}}\index{\sphinxhyphen{}\sphinxhyphen{}output@\spxentry{\sphinxhyphen{}\sphinxhyphen{}output}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-output}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}output}}\sphinxcode{\sphinxupquote{}}}
type: string; default: report

How to format and print the query analysis results.  Accepted values are:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
VALUE          \PYG{n+nv}{FORMAT}
\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}        \PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}
report         Standard query analysis report
slowlog        MariaDB slow log
json           JSON, on array per query class
json\PYGZhy{}anon      JSON without example queries
secure\PYGZhy{}slowlog JSON without example queries
\end{sphinxVerbatim}

The entire \sphinxcode{\sphinxupquote{report}} output can be disabled by specifying \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}report}}
(see \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}report}}), and its sections can be disabled or rearranged
by specifying {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-report-format}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}report\sphinxhyphen{}format}}}}}.

\sphinxcode{\sphinxupquote{json}} output was introduced in 2.2.1 and is still in development,
so the data structure may change in future versions.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}password@\spxentry{\sphinxhyphen{}\sphinxhyphen{}password}}\index{\sphinxhyphen{}\sphinxhyphen{}password@\spxentry{\sphinxhyphen{}\sphinxhyphen{}password}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-password}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}password}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}p; type: string

Password to use when connecting.
If password contains commas they must be escaped with a backslash: “exam,ple”

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}pid@\spxentry{\sphinxhyphen{}\sphinxhyphen{}pid}}\index{\sphinxhyphen{}\sphinxhyphen{}pid@\spxentry{\sphinxhyphen{}\sphinxhyphen{}pid}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-pid}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}pid}}\sphinxcode{\sphinxupquote{}}}
type: string

Create the given PID file.  The tool won’t start if the PID file already
exists and the PID it contains is different than the current PID.  However,
if the PID file exists and the PID it contains is no longer running, the
tool will overwrite the PID file with the current PID.  The PID file is
removed automatically when the tool exits.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}port@\spxentry{\sphinxhyphen{}\sphinxhyphen{}port}}\index{\sphinxhyphen{}\sphinxhyphen{}port@\spxentry{\sphinxhyphen{}\sphinxhyphen{}port}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-port}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}port}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}P; type: int

Port number to use for connection.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}preserve\sphinxhyphen{}embedded\sphinxhyphen{}numbers@\spxentry{\sphinxhyphen{}\sphinxhyphen{}preserve\sphinxhyphen{}embedded\sphinxhyphen{}numbers}}\index{\sphinxhyphen{}\sphinxhyphen{}preserve\sphinxhyphen{}embedded\sphinxhyphen{}numbers@\spxentry{\sphinxhyphen{}\sphinxhyphen{}preserve\sphinxhyphen{}embedded\sphinxhyphen{}numbers}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-preserve-embedded-numbers}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}preserve\sphinxhyphen{}embedded\sphinxhyphen{}numbers}}\sphinxcode{\sphinxupquote{}}}
Preserve numbers in database/table names when fingerprinting queries.
The standar fingeprint method replaces numbers in db/tables names, making
a query like ‘SELECT * FROM db1.table2’ to be figerprinted as ‘SELECT * FROM db?.table?’.
This option changes that behaviour and the fingerprint will become
‘SELECT * FROM db1.table2’.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}processlist@\spxentry{\sphinxhyphen{}\sphinxhyphen{}processlist}}\index{\sphinxhyphen{}\sphinxhyphen{}processlist@\spxentry{\sphinxhyphen{}\sphinxhyphen{}processlist}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-processlist}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}processlist}}\sphinxcode{\sphinxupquote{}}}
type: DSN

Poll this DSN’s processlist for queries, with {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-interval}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}interval}}}}} sleep between.

If the connection fails, \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest}} tries to reopen it once per second.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}progress@\spxentry{\sphinxhyphen{}\sphinxhyphen{}progress}}\index{\sphinxhyphen{}\sphinxhyphen{}progress@\spxentry{\sphinxhyphen{}\sphinxhyphen{}progress}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-progress}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}progress}}\sphinxcode{\sphinxupquote{}}}
type: array; default: time,30

Print progress reports to STDERR.  The value is a comma\sphinxhyphen{}separated list with two
parts.  The first part can be percentage, time, or iterations; the second part
specifies how often an update should be printed, in percentage, seconds, or
number of iterations.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}read\sphinxhyphen{}timeout@\spxentry{\sphinxhyphen{}\sphinxhyphen{}read\sphinxhyphen{}timeout}}\index{\sphinxhyphen{}\sphinxhyphen{}read\sphinxhyphen{}timeout@\spxentry{\sphinxhyphen{}\sphinxhyphen{}read\sphinxhyphen{}timeout}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-read-timeout}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}read\sphinxhyphen{}timeout}}\sphinxcode{\sphinxupquote{}}}
type: time; default: 0

Wait this long for an event from the input; 0 to wait forever.

This option sets the maximum time to wait for an event from the input.  It
applies to all types of input except {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-processlist}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}processlist}}}}}.  If an
event is not received after the specified time, the script stops reading the
input and prints its reports.  If {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-iterations}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}iterations}}}}} is 0 or greater than
1, the next iteration will begin, else the script will exit.

This option requires the Perl POSIX module.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}{[}no{]}report@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}report}}\index{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}report@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}report}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-3}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}}}\sphinxcode{\sphinxupquote{{[}no{]}report}}}
default: yes

Print query analysis reports for each {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-group-by}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}group\sphinxhyphen{}by}}}}} attribute.  This is
the standard slow log analysis functionality.  See “OUTPUT” for the
description of what this does and what the results look like.

If you don’t need a report (for example, when using {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-review}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}review}}}}} or
{\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-history}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}history}}}}}), it is best to specify \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}report}} because this allows
the tool to skip some expensive operations.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}report\sphinxhyphen{}all@\spxentry{\sphinxhyphen{}\sphinxhyphen{}report\sphinxhyphen{}all}}\index{\sphinxhyphen{}\sphinxhyphen{}report\sphinxhyphen{}all@\spxentry{\sphinxhyphen{}\sphinxhyphen{}report\sphinxhyphen{}all}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-report-all}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}report\sphinxhyphen{}all}}\sphinxcode{\sphinxupquote{}}}
Report all queries, even ones that have been reviewed.  This only affects
the \sphinxcode{\sphinxupquote{report}} {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-output}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}output}}}}} when using {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-review}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}review}}}}}.  Otherwise, all
queries are always printed.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}report\sphinxhyphen{}format@\spxentry{\sphinxhyphen{}\sphinxhyphen{}report\sphinxhyphen{}format}}\index{\sphinxhyphen{}\sphinxhyphen{}report\sphinxhyphen{}format@\spxentry{\sphinxhyphen{}\sphinxhyphen{}report\sphinxhyphen{}format}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-report-format}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}report\sphinxhyphen{}format}}\sphinxcode{\sphinxupquote{}}}
type: Array; default: rusage,date,hostname,files,header,profile,query\_report,prepared

Print these sections of the query analysis report.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
SECTION      \PYG{n+nv}{PRINTS}
\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=} \PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}
rusage       CPU \PYG{n+nb}{times} and memory usage reported by ps
date         Current \PYG{n+nb}{local} date and \PYG{n+nb}{time}
hostname     Hostname of machine on which :program:\PYG{l+s+sb}{`}mariadb\PYGZhy{}query\PYGZhy{}digest\PYG{l+s+sb}{`} was run
files        Input files read/parse
header       Summary of the entire analysis run
profile      Compact table of queries \PYG{k}{for} an overview of the report
query\PYGZus{}report Detailed information about each unique query
prepared     Prepared statements
\end{sphinxVerbatim}

The sections are printed in the order specified.  The rusage, date, files and
header sections are grouped together if specified together; other sections are
separated by blank lines.

See “OUTPUT” for more information on the various parts of the query report.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}report\sphinxhyphen{}histogram@\spxentry{\sphinxhyphen{}\sphinxhyphen{}report\sphinxhyphen{}histogram}}\index{\sphinxhyphen{}\sphinxhyphen{}report\sphinxhyphen{}histogram@\spxentry{\sphinxhyphen{}\sphinxhyphen{}report\sphinxhyphen{}histogram}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-report-histogram}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}report\sphinxhyphen{}histogram}}\sphinxcode{\sphinxupquote{}}}
type: string; default: Query\_time

Chart the distribution of this attribute’s values.

The distribution chart is limited to time\sphinxhyphen{}based attributes, so charting
\sphinxcode{\sphinxupquote{Rows\_examined}}, for example, will produce a useless chart.  Charts look
like:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Query\PYGZus{}time distribution}
\PYG{c+c1}{\PYGZsh{}   1us}
\PYG{c+c1}{\PYGZsh{}  10us}
\PYG{c+c1}{\PYGZsh{} 100us}
\PYG{c+c1}{\PYGZsh{}   1ms}
\PYG{c+c1}{\PYGZsh{}  10ms  \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{} 100ms  \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{}    1s  \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{}  10s+}
\end{sphinxVerbatim}

See “OUTPUT” for more information.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}resume@\spxentry{\sphinxhyphen{}\sphinxhyphen{}resume}}\index{\sphinxhyphen{}\sphinxhyphen{}resume@\spxentry{\sphinxhyphen{}\sphinxhyphen{}resume}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-resume}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}resume}}\sphinxcode{\sphinxupquote{}}}
type: string

If specified, the tool writes the last file offset, if there is one,
to the given filename. When ran again with the same value for this option,
the tool reads the last file offset from the file, seeks to that position
in the log, and resumes parsing events from that point onward.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}review@\spxentry{\sphinxhyphen{}\sphinxhyphen{}review}}\index{\sphinxhyphen{}\sphinxhyphen{}review@\spxentry{\sphinxhyphen{}\sphinxhyphen{}review}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-review}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}review}}\sphinxcode{\sphinxupquote{}}}
type: DSN

Save query classes for later review, and don’t report already reviewed classes.

The default table is \sphinxcode{\sphinxupquote{mariadb\_tools.query\_review}}.  Specify database
(D) and table (t) DSN options to override the default.  The database and
table are automatically created unless \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}create\sphinxhyphen{}review\sphinxhyphen{}table}}
is specified (see \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}create\sphinxhyphen{}review\sphinxhyphen{}table}}).

If the table was created manually, it must have at least the following columns.
You can add more columns for your own special purposes, but they won’t be used
by \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest}}.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{CREATE} \PYG{k}{TABLE} \PYG{k}{IF} \PYG{k}{NOT} \PYG{k}{EXISTS} \PYG{n}{query\PYGZus{}review} \PYG{p}{(}
   \PYG{n}{checksum}     \PYG{n+nb}{CHAR}\PYG{p}{(}\PYG{l+m+mi}{32}\PYG{p}{)} \PYG{k}{NOT} \PYG{k}{NULL} \PYG{k}{PRIMARY} \PYG{k}{KEY}\PYG{p}{,}
   \PYG{n}{fingerprint}  \PYG{n+nb}{TEXT} \PYG{k}{NOT} \PYG{k}{NULL}\PYG{p}{,}
   \PYG{n}{sample}       \PYG{n+nb}{TEXT} \PYG{k}{NOT} \PYG{k}{NULL}\PYG{p}{,}
   \PYG{n}{first\PYGZus{}seen}   \PYG{n}{DATETIME}\PYG{p}{,}
   \PYG{n}{last\PYGZus{}seen}    \PYG{n}{DATETIME}\PYG{p}{,}
   \PYG{n}{reviewed\PYGZus{}by}  \PYG{n+nb}{VARCHAR}\PYG{p}{(}\PYG{l+m+mi}{20}\PYG{p}{)}\PYG{p}{,}
   \PYG{n}{reviewed\PYGZus{}on}  \PYG{n}{DATETIME}\PYG{p}{,}
   \PYG{n}{comments}     \PYG{n+nb}{TEXT}
\PYG{p}{)}
\end{sphinxVerbatim}

The columns are:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
COLUMN       \PYG{n+nv}{MEANING}
\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}  \PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}
checksum     A \PYG{l+m}{64}\PYGZhy{}bit checksum of the query fingerprint
fingerprint  The abstracted version of the query\PYG{p}{;} its primary key
sample       The query text of a sample of the class of queries
first\PYGZus{}seen   The smallest timestamp of this class of queries
last\PYGZus{}seen    The largest timestamp of this class of queries
reviewed\PYGZus{}by  Initially NULL\PYG{p}{;} \PYG{k}{if} set, query is skipped thereafter
reviewed\PYGZus{}on  Initially NULL\PYG{p}{;} not assigned any special meaning
comments     Initially NULL\PYG{p}{;} not assigned any special meaning
\end{sphinxVerbatim}

Note that the \sphinxcode{\sphinxupquote{fingerprint}} column is the true primary key for a class of
queries.  The \sphinxcode{\sphinxupquote{checksum}} is just a cryptographic hash of this value, which
provides a shorter value that is very likely to also be unique.

After parsing and aggregating events, your table should contain a row for each
fingerprint.  This option depends on \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}group\sphinxhyphen{}by fingerprint}} (which is the
default).  It will not work otherwise.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time@\spxentry{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time}}\index{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time@\spxentry{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-run-time}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time}}\sphinxcode{\sphinxupquote{}}}
type: time

How long to run for each {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-iterations}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}iterations}}}}}.  The default is to run forever
(you can interrupt with CTRL\sphinxhyphen{}C).  Because {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-iterations}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}iterations}}}}} defaults to 1,
if you only specify {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-run-time}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time}}}}}, \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest}} runs for that amount of
time and then exits.  The two options are specified together to do
collect\sphinxhyphen{}and\sphinxhyphen{}report cycles.  For example, specifying {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-iterations}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}iterations}}}}} \sphinxcode{\sphinxupquote{4}}
{\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-run-time}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time}}}}} \sphinxcode{\sphinxupquote{15m}} with a continuous input (like STDIN or
{\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-processlist}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}processlist}}}}}) will cause \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest}} to run for 1 hour
(15 minutes x 4), reporting four times, once at each 15 minute interval.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time\sphinxhyphen{}mode@\spxentry{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time\sphinxhyphen{}mode}}\index{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time\sphinxhyphen{}mode@\spxentry{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time\sphinxhyphen{}mode}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-run-time-mode}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time\sphinxhyphen{}mode}}\sphinxcode{\sphinxupquote{}}}
type: string; default: clock

Set what the value of {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-run-time}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time}}}}} operates on.  Following are the possible
values for this option:

clock
\begin{quote}

{\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-run-time}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time}}}}} specifies an amount of real clock time during which the tool
should run for each {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-iterations}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}iterations}}}}}.
\end{quote}

event
\begin{quote}

{\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-run-time}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time}}}}} specifies an amount of log time.  Log time is determined by
timestamps in the log.  The first timestamp seen is remembered, and each
timestamp after that is compared to the first to determine how much log time
has passed.  For example, if the first timestamp seen is \sphinxcode{\sphinxupquote{12:00:00}} and the
next is \sphinxcode{\sphinxupquote{12:01:30}}, that is 1 minute and 30 seconds of log time.  The tool
will read events until the log time is greater than or equal to the specified
{\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-run-time}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time}}}}} value.

Since timestamps in logs are not always printed, or not always printed
frequently, this mode varies in accuracy.
\end{quote}

interval
\begin{quote}

{\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-run-time}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time}}}}} specifies interval boundaries of log time into which events
are divided and reports are generated.  This mode is different from the
others because it doesn’t specify how long to run.  The value of
{\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-run-time}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time}}}}} must be an interval that divides evenly into minutes, hours
or days.  For example, \sphinxcode{\sphinxupquote{5m}} divides evenly into hours (60/5=12, so 12
5 minutes intervals per hour) but \sphinxcode{\sphinxupquote{7m}} does not (60/7=8.6).

Specifying \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time\sphinxhyphen{}mode interval \sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time 30m \sphinxhyphen{}\sphinxhyphen{}iterations 0}} is
similar to specifying \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time\sphinxhyphen{}mode clock \sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time 30m \sphinxhyphen{}\sphinxhyphen{}iterations 0}}.
In the latter case, \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest}} will run forever, producing reports every
30 minutes, but this only works effectively with  continuous inputs like
STDIN and the processlist.  For fixed inputs, like log files, the former
example produces multiple reports by dividing the log into 30 minutes
intervals based on timestamps.

Intervals are calculated from the zeroth second/minute/hour in which a
timestamp occurs, not from whatever time it specifies.  For example,
with 30 minute intervals and a timestamp of \sphinxcode{\sphinxupquote{12:10:30}}, the interval
is \sphinxstyleemphasis{not} \sphinxcode{\sphinxupquote{12:10:30}} to \sphinxcode{\sphinxupquote{12:40:30}}, it is \sphinxcode{\sphinxupquote{12:00:00}} to \sphinxcode{\sphinxupquote{12:29:59}}.
Or, with 1 hour intervals, it is \sphinxcode{\sphinxupquote{12:00:00}} to \sphinxcode{\sphinxupquote{12:59:59}}.
When a new timestamp exceeds the interval, a report is printed, and the
next interval is recalculated based on the new timestamp.

Since {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-iterations}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}iterations}}}}} is 1 by default, you probably want to specify
a new value else \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest}} will only get and report on the first
interval from the log since 1 interval = 1 iteration.  If you want to
get and report every interval in a log, specify {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-iterations}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}iterations}}}}} \sphinxcode{\sphinxupquote{0}}.
\end{quote}

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}sample@\spxentry{\sphinxhyphen{}\sphinxhyphen{}sample}}\index{\sphinxhyphen{}\sphinxhyphen{}sample@\spxentry{\sphinxhyphen{}\sphinxhyphen{}sample}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-sample}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}sample}}\sphinxcode{\sphinxupquote{}}}
type: int

Filter out all but the first N occurrences of each query.  The queries are
filtered on the first value in {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-group-by}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}group\sphinxhyphen{}by}}}}}, so by default, this will filter
by query fingerprint.  For example, \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}sample 2}} will permit two sample queries
for each fingerprint.  Useful in conjunction with \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}output slowlog}} to print
the queries.  You probably want to set \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}report}} to avoid the overhead of
aggregating and reporting if you’re just using this to print out samples of
queries.  A complete example:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
:program:\PYG{l+s+sb}{`}mariadb\PYGZhy{}query\PYGZhy{}digest\PYG{l+s+sb}{`} \PYGZhy{}\PYGZhy{}sample \PYG{l+m}{2} \PYGZhy{}\PYGZhy{}no\PYGZhy{}report \PYGZhy{}\PYGZhy{}output slowlog slow.log
\end{sphinxVerbatim}

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}user@\spxentry{\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}user}}\index{\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}user@\spxentry{\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}user}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-slave-user}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}user}}\sphinxcode{\sphinxupquote{}}}
type: string

Sets the user to be used to connect to the slaves.
This parameter allows you to have a different user with less privileges on the
slaves but that user must exist on all slaves.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}password@\spxentry{\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}password}}\index{\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}password@\spxentry{\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}password}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-slave-password}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}password}}\sphinxcode{\sphinxupquote{}}}
type: string

Sets the password to be used to connect to the slaves.
It can be used with \textendash{}slave\sphinxhyphen{}user and the password for the user must be the same
on all slaves.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}set\sphinxhyphen{}vars@\spxentry{\sphinxhyphen{}\sphinxhyphen{}set\sphinxhyphen{}vars}}\index{\sphinxhyphen{}\sphinxhyphen{}set\sphinxhyphen{}vars@\spxentry{\sphinxhyphen{}\sphinxhyphen{}set\sphinxhyphen{}vars}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-set-vars}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}set\sphinxhyphen{}vars}}\sphinxcode{\sphinxupquote{}}}
type: Array

Set the MariaDB variables in this comma\sphinxhyphen{}separated list of \sphinxcode{\sphinxupquote{variable=value}} pairs.

By default, the tool sets:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nv}{wait\PYGZus{}timeout}\PYG{o}{=}\PYG{l+m}{10000}
\end{sphinxVerbatim}

Variables specified on the command line override these defaults.  For
example, specifying \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}set\sphinxhyphen{}vars wait\_timeout=500}} overrides the defaultvalue of \sphinxcode{\sphinxupquote{10000}}.

The tool prints a warning and continues if a variable cannot be set.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}show\sphinxhyphen{}all@\spxentry{\sphinxhyphen{}\sphinxhyphen{}show\sphinxhyphen{}all}}\index{\sphinxhyphen{}\sphinxhyphen{}show\sphinxhyphen{}all@\spxentry{\sphinxhyphen{}\sphinxhyphen{}show\sphinxhyphen{}all}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-show-all}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}show\sphinxhyphen{}all}}\sphinxcode{\sphinxupquote{}}}
type: Hash

Show all values for these attributes.

By default \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest}} only shows as many of an attribute’s value that
fit on a single line.  This option allows you to specify attributes for which
all values will be shown (line width is ignored).  This only works for
attributes with string values like user, host, db, etc.  Multiple attributes
can be specified, comma\sphinxhyphen{}separated.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}since@\spxentry{\sphinxhyphen{}\sphinxhyphen{}since}}\index{\sphinxhyphen{}\sphinxhyphen{}since@\spxentry{\sphinxhyphen{}\sphinxhyphen{}since}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-since}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}since}}\sphinxcode{\sphinxupquote{}}}
type: string

Parse only queries newer than this value (parse queries since this date).

This option allows you to ignore queries older than a certain value and parse
only those queries which are more recent than the value.  The value can be
several types:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
* Simple \PYG{n+nb}{time} value N with optional suffix: N\PYG{o}{[}shmd\PYG{o}{]}, where
  \PYG{n+nv}{s}\PYG{o}{=}seconds, \PYG{n+nv}{h}\PYG{o}{=}hours, \PYG{n+nv}{m}\PYG{o}{=}minutes, \PYG{n+nv}{d}\PYG{o}{=}days \PYG{o}{(}default s \PYG{k}{if} no suffix
  given\PYG{o}{)}\PYG{p}{;} this is like saying \PYG{l+s+s2}{\PYGZdq{}since N[shmd] ago\PYGZdq{}}
* Full date with optional hours:minutes:seconds:
  YYYY\PYGZhy{}MM\PYGZhy{}DD \PYG{o}{[}HH:MM:SS\PYG{o}{]}
* Short, MariaDB\PYGZhy{}style date:
  YYMMDD \PYG{o}{[}HH:MM:SS\PYG{o}{]}
* Any \PYG{n+nb}{time} expression evaluated by MariaDB:
  CURRENT\PYGZus{}DATE \PYGZhy{} INTERVAL \PYG{l+m}{7} DAY
\end{sphinxVerbatim}

If you give a MariaDB time expression, and you have not also specified a DSN
for {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-explain}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}explain}}}}}, {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-processlist}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}processlist}}}}}, or {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-review}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}review}}}}}, then you must specify
a DSN on the command line so that \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest}} can connect to MariaDB to
evaluate the expression.

The MariaDB time expression is wrapped inside a query like
“SELECT UNIX\_TIMESTAMP(\textless{}expression\textgreater{})”, so be sure that the expression is
valid inside this query.  For example, do not use UNIX\_TIMESTAMP() because
UNIX\_TIMESTAMP(UNIX\_TIMESTAMP()) returns 0.

Events are assumed to be in chronological: older events at the beginning of
the log and newer events at the end of the log.  {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-since}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}since}}}}} is strict: it
ignores all queries until one is found that is new enough.  Therefore, if
the query events are not consistently timestamped, some may be ignored which
are actually new enough.

See also {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-until}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}until}}}}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}socket@\spxentry{\sphinxhyphen{}\sphinxhyphen{}socket}}\index{\sphinxhyphen{}\sphinxhyphen{}socket@\spxentry{\sphinxhyphen{}\sphinxhyphen{}socket}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-socket}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}socket}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}S; type: string

Socket file to use for connection.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}timeline@\spxentry{\sphinxhyphen{}\sphinxhyphen{}timeline}}\index{\sphinxhyphen{}\sphinxhyphen{}timeline@\spxentry{\sphinxhyphen{}\sphinxhyphen{}timeline}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-timeline}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}timeline}}\sphinxcode{\sphinxupquote{}}}
Show a timeline of events.

This option makes \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest}} print another kind of report: a timeline of
the events.  Each query is still grouped and aggregate into classes according to
{\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-group-by}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}group\sphinxhyphen{}by}}}}}, but then they are printed in chronological order.  The timeline
report prints out the timestamp, interval, count and value of each classes.

If all you want is the timeline report, then specify \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}report}} to
suppress the default query analysis report.  Otherwise, the timeline report
will be printed at the end before the response\sphinxhyphen{}time profile
(see {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-report-format}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}report\sphinxhyphen{}format}}}}} and “OUTPUT”).

For example, this:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
:program:\PYG{l+s+sb}{`}mariadb\PYGZhy{}query\PYGZhy{}digest\PYG{l+s+sb}{`} /path/to/log \PYGZhy{}\PYGZhy{}group\PYGZhy{}by distill \PYGZhy{}\PYGZhy{}timeline
\end{sphinxVerbatim}

will print something like:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{} distill report}
\PYG{c+c1}{\PYGZsh{} \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{} 2009\PYGZhy{}07\PYGZhy{}25 11:19:27 1+00:00:01   2 SELECT foo}
\PYG{c+c1}{\PYGZsh{} 2009\PYGZhy{}07\PYGZhy{}27 11:19:30      00:01   2 SELECT bar}
\PYG{c+c1}{\PYGZsh{} 2009\PYGZhy{}07\PYGZhy{}27 11:30:00 1+06:30:00   2 SELECT foo}
\end{sphinxVerbatim}

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}type@\spxentry{\sphinxhyphen{}\sphinxhyphen{}type}}\index{\sphinxhyphen{}\sphinxhyphen{}type@\spxentry{\sphinxhyphen{}\sphinxhyphen{}type}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-type}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}type}}\sphinxcode{\sphinxupquote{}}}
type: Array; default: slowlog

The type of input to parse.  The permitted types are

binlog
\begin{quote}

Parse a binary log file that has first been converted to text using mariadb\sphinxhyphen{}binlog.

For example:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
mariadb\PYGZhy{}binlog mariadb\PYGZhy{}bin.000441 \PYGZgt{} mariadb\PYGZhy{}bin.000441.txt

:program:\PYG{l+s+sb}{`}mariadb\PYGZhy{}query\PYGZhy{}digest\PYG{l+s+sb}{`} \PYGZhy{}\PYGZhy{}type binlog mariadb\PYGZhy{}bin.000441.txt
\end{sphinxVerbatim}
\end{quote}

genlog
\begin{quote}

Parse a MariaDB general log file.  General logs lack a lot of “ATTRIBUTES”,
notably \sphinxcode{\sphinxupquote{Query\_time}}.  The default {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-order-by}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}order\sphinxhyphen{}by}}}}} for general logs
changes to \sphinxcode{\sphinxupquote{Query\_time:cnt}}.
\end{quote}

slowlog
\begin{quote}

Parse a log file in any variation of MariaDB slow log format.
\end{quote}

tcpdump
\begin{quote}

Inspect network packets and decode the MariaDB client protocol, extracting queries
and responses from it.

\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest}} does not actually watch the network (i.e. it does NOT “sniff
packets”).  Instead, it’s just parsing the output of tcpdump.  You are
responsible for generating this output; \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest}} does not do it for you.
Then you send this to \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest}} as you would any log file: as files on the
command line or to STDIN.

The parser expects the input to be formatted with the following options: \sphinxcode{\sphinxupquote{\sphinxhyphen{}x \sphinxhyphen{}n
\sphinxhyphen{}q \sphinxhyphen{}tttt}}.  For example, if you want to capture output from your local machine,
you can do something like the following (the port must come last on FreeBSD):

\begin{sphinxVerbatim}[commandchars=\\\{\}]
tcpdump \PYGZhy{}s \PYG{l+m}{65535} \PYGZhy{}x \PYGZhy{}nn \PYGZhy{}q \PYGZhy{}tttt \PYGZhy{}i any \PYGZhy{}c \PYG{l+m}{1000} port \PYG{l+m}{3306} \PYG{l+s+se}{\PYGZbs{}}
  \PYGZgt{} mariadb.tcp.txt
:program:\PYG{l+s+sb}{`}mariadb\PYGZhy{}query\PYGZhy{}digest\PYG{l+s+sb}{`} \PYGZhy{}\PYGZhy{}type tcpdump mariadb.tcp.txt
\end{sphinxVerbatim}

The other tcpdump parameters, such as \sphinxhyphen{}s, \sphinxhyphen{}c, and \sphinxhyphen{}i, are up to you.  Just make
sure the output looks like this (there is a line break in the first line to
avoid man\sphinxhyphen{}page problems):

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{l+m}{2009}\PYGZhy{}04\PYGZhy{}12 \PYG{l+m}{09}:50:16.804849 IP \PYG{l+m}{127}.0.0.1.42167
       \PYGZgt{} \PYG{l+m}{127}.0.0.1.3306: tcp \PYG{l+m}{37}
    0x0000:  \PYG{l+m}{4508} \PYG{l+m}{0059} 6eb2 \PYG{l+m}{4000} \PYG{l+m}{4006} cde2 7f00 \PYG{l+m}{0001}
    0x0010:  ....
\end{sphinxVerbatim}

Remember tcpdump has a handy \sphinxhyphen{}c option to stop after it captures some number of
packets!  That’s very useful for testing your tcpdump command.  Note that
tcpdump can’t capture traffic on a Unix socket.  Read
\sphinxurl{http://bugs.mysql.com/bug.php?id=31577} if you’re confused about this.

Devananda Van Der Veen explained on the MySQL Performance Blog how to capture
traffic without dropping packets on busy servers.  Dropped packets cause
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest}} to miss the response to a request, then see the response to a
later request and assign the wrong execution time to the query.  You can change
the filter to something like the following to help capture a subset of the
queries.  (See \sphinxurl{http://www.mysqlperformanceblog.com/?p=6092} for details.)

\begin{sphinxVerbatim}[commandchars=\\\{\}]
tcpdump \PYGZhy{}i any \PYGZhy{}s \PYG{l+m}{65535} \PYGZhy{}x \PYGZhy{}n \PYGZhy{}q \PYGZhy{}tttt \PYG{l+s+se}{\PYGZbs{}}
   \PYG{l+s+s1}{\PYGZsq{}port 3306 and tcp[1] \PYGZam{} 7 == 2 and tcp[3] \PYGZam{} 7 == 2\PYGZsq{}}
\end{sphinxVerbatim}

All MariaDB servers running on port 3306 are automatically detected in the
tcpdump output.  Therefore, if the tcpdump out contains packets from
multiple servers on port 3306 (for example, 10.0.0.1:3306, 10.0.0.2:3306,
etc.), all packets/queries from all these servers will be analyzed
together as if they were one server.

If you’re analyzing traffic for a MariaDB server that is not running on port
3306, see {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-watch-server}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}watch\sphinxhyphen{}server}}}}}.

Also note that \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest}} may fail to report the database for queries
when parsing tcpdump output.  The database is discovered only in the initial
connect events for a new client or when \textless{}USE db\textgreater{} is executed.  If the tcpdump
output contains neither of these, then \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest}} cannot discover the
database.

Server\sphinxhyphen{}side prepared statements are supported.  SSL\sphinxhyphen{}encrypted traffic cannot be
inspected and decoded.
\end{quote}

rawlog
\begin{quote}

Raw logs are not MariaDB logs but simple text files with one SQL statement
per line, like:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
SELECT c FROM t WHERE \PYG{n+nv}{id}\PYG{o}{=}\PYG{l+m}{1}
/* Hello, world! */ SELECT * FROM t2 LIMIT \PYG{l+m}{1}
INSERT INTO t \PYG{o}{(}a, b\PYG{o}{)} VALUES \PYG{o}{(}\PYG{l+s+s1}{\PYGZsq{}foo\PYGZsq{}}, \PYG{l+s+s1}{\PYGZsq{}bar\PYGZsq{}}\PYG{o}{)}
INSERT INTO t SELECT * FROM monkeys
\end{sphinxVerbatim}

Since raw logs do not have any metrics, many options and features of
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest}} do not work with them.

One use case for raw logs is ranking queries by count when the only
information available is a list of queries, from polling \sphinxcode{\sphinxupquote{SHOW PROCESSLIST}}
for example.
\end{quote}

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}until@\spxentry{\sphinxhyphen{}\sphinxhyphen{}until}}\index{\sphinxhyphen{}\sphinxhyphen{}until@\spxentry{\sphinxhyphen{}\sphinxhyphen{}until}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-until}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}until}}\sphinxcode{\sphinxupquote{}}}
type: string

Parse only queries older than this value (parse queries until this date).

This option allows you to ignore queries newer than a certain value and parse
only those queries which are older than the value.  The value can be one of
the same types listed for {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-since}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}since}}}}}.

Unlike {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-since}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}since}}}}}, {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-until}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}until}}}}} is not strict: all queries are parsed until
one has a timestamp that is equal to or greater than {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-until}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}until}}}}}.  Then
all subsequent queries are ignored.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}user@\spxentry{\sphinxhyphen{}\sphinxhyphen{}user}}\index{\sphinxhyphen{}\sphinxhyphen{}user@\spxentry{\sphinxhyphen{}\sphinxhyphen{}user}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-user}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}user}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}u; type: string

User for login if not current user.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}variations@\spxentry{\sphinxhyphen{}\sphinxhyphen{}variations}}\index{\sphinxhyphen{}\sphinxhyphen{}variations@\spxentry{\sphinxhyphen{}\sphinxhyphen{}variations}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-variations}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}variations}}\sphinxcode{\sphinxupquote{}}}
type: Array

Report the number of variations in these attributes’ values.

Variations show how many distinct values an attribute had within a class.
The usual value for this option is \sphinxcode{\sphinxupquote{arg}} which shows how many distinct queries
were in the class.  This can be useful to determine a query’s cacheability.

Distinct values are determined by CRC32 checksums of the attributes’ values.
These checksums are reported in the query report for attributes specified by
this option, like:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} arg crc      109 (1/25\PYGZpc{}), 144 (1/25\PYGZpc{})... 2 more}
\end{sphinxVerbatim}

In that class there were 4 distinct queries.  The checksums of the first two
variations are shown, and each one occurred once (or, 25\% of the time).

The counts of distinct variations is approximate because only 1,000 variations
are saved.  The mod (\%) 1000 of the full CRC32 checksum is saved, so some
distinct checksums are treated as equal.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}version@\spxentry{\sphinxhyphen{}\sphinxhyphen{}version}}\index{\sphinxhyphen{}\sphinxhyphen{}version@\spxentry{\sphinxhyphen{}\sphinxhyphen{}version}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-version}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}version}}\sphinxcode{\sphinxupquote{}}}
Show version and exit.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}{[}no{]}vertical\sphinxhyphen{}format@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}vertical\sphinxhyphen{}format}}\index{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}vertical\sphinxhyphen{}format@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}vertical\sphinxhyphen{}format}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-4}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}}}\sphinxcode{\sphinxupquote{{[}no{]}vertical\sphinxhyphen{}format}}}
default: yes

Output a trailing “G” in the reported SQL queries.

This makes the mariadb client display the result using vertical format.
Non\sphinxhyphen{}native MariaDB clients like phpMyAdmin do not support this.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}!\sphinxhyphen{}\sphinxhyphen{}watch\sphinxhyphen{}server@\spxentry{\sphinxhyphen{}\sphinxhyphen{}watch\sphinxhyphen{}server}}\index{\sphinxhyphen{}\sphinxhyphen{}watch\sphinxhyphen{}server@\spxentry{\sphinxhyphen{}\sphinxhyphen{}watch\sphinxhyphen{}server}!mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option@\spxentry{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-watch-server}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}watch\sphinxhyphen{}server}}\sphinxcode{\sphinxupquote{}}}
type: string

This option tells \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest}} which server IP address and port (like
“10.0.0.1:3306”) to watch when parsing tcpdump (for {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-type}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}type}}}}} tcpdump);
all other servers are ignored.  If you don’t specify it,
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest}} watches all servers by looking for any IP address using port
3306 or “mariadb”.  If you’re watching a server with a non\sphinxhyphen{}standard port, this
won’t work, so you must specify the IP address and port to watch.

If you want to watch a mix of servers, some running on standard port 3306
and some running on non\sphinxhyphen{}standard ports, you need to create separate
tcpdump outputs for the non\sphinxhyphen{}standard port servers and then specify this
option for each.  At present \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest}} cannot auto\sphinxhyphen{}detect servers on
port 3306 and also be told to watch a server on a non\sphinxhyphen{}standard port.

\end{fulllineitems}



\section{DSN OPTIONS}
\label{\detokenize{mariadb-query-digest:dsn-options}}
These DSN options are used to create a DSN.  Each option is given like
\sphinxcode{\sphinxupquote{option=value}}.  The options are case\sphinxhyphen{}sensitive, so P and p are not the
same option.  There cannot be whitespace before or after the \sphinxcode{\sphinxupquote{=}} and
if the value contains whitespace it must be quoted.  DSN options are
comma\sphinxhyphen{}separated.  See the mariadb\sphinxhyphen{}tools manpage for full details.
\begin{itemize}
\item {} 
A

\end{itemize}
\begin{quote}

dsn: charset; copy: yes

Default character set.
\end{quote}
\begin{itemize}
\item {} 
D

\end{itemize}
\begin{quote}

dsn: database; copy: yes

Default database to use when connecting to MariaDB.
\end{quote}
\begin{itemize}
\item {} 
F

\end{itemize}
\begin{quote}

dsn: mysql\_read\_default\_file; copy: yes

Only read default options from the given file.
\end{quote}
\begin{itemize}
\item {} 
h

\end{itemize}
\begin{quote}

dsn: host; copy: yes

Connect to host.
\end{quote}
\begin{itemize}
\item {} 
p

\end{itemize}
\begin{quote}

dsn: password; copy: yes

Password to use when connecting.
If password contains commas they must be escaped with a backslash: “exam,ple”
\end{quote}
\begin{itemize}
\item {} 
P

\end{itemize}
\begin{quote}

dsn: port; copy: yes

Port number to use for connection.
\end{quote}
\begin{itemize}
\item {} 
S

\end{itemize}
\begin{quote}

dsn: mysql\_socket; copy: yes

Socket file to use for connection.
\end{quote}
\begin{itemize}
\item {} 
t

\end{itemize}
\begin{quote}

The {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-review}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}review}}}}} or {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-history}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}history}}}}} table.
\end{quote}
\begin{itemize}
\item {} 
u

\end{itemize}
\begin{quote}

dsn: user; copy: yes

User for login if not current user.
\end{quote}


\section{ENVIRONMENT}
\label{\detokenize{mariadb-query-digest:environment}}
The environment variable \sphinxcode{\sphinxupquote{PTDEBUG}} enables verbose debugging output to STDERR.
To enable debugging and capture all output to a file, run the tool like:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nv}{PTDEBUG}\PYG{o}{=}\PYG{l+m}{1} mariadb\PYGZhy{}query\PYGZhy{}digest ... \PYGZgt{} FILE \PYG{l+m}{2}\PYGZgt{}\PYG{p}{\PYGZam{}}\PYG{l+m}{1}
\end{sphinxVerbatim}

Be careful: debugging output is voluminous and can generate several megabytes
of output.


\section{SYSTEM REQUIREMENTS}
\label{\detokenize{mariadb-query-digest:system-requirements}}
You need Perl, DBI, DBD::mysql, and some core packages that ought to be
installed in any reasonably new version of Perl.


\section{ATTRIBUTES REFERENCE}
\label{\detokenize{mariadb-query-digest:attributes-reference}}
Events may have the following attributes.  If writing a {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-filter}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}filter}}}}},
be sure to check that an attribute is defined in each event before
using it, else the filter code may crash the tool with a
“use of uninitialized value” error.

You can dump event attributes for any input like:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdl{} mariadb\PYGZhy{}query\PYGZhy{}digest                  \PYG{l+s+se}{\PYGZbs{}}
    slow.log                       \PYG{l+s+se}{\PYGZbs{}}
    \PYGZhy{}\PYGZhy{}filter \PYG{l+s+s1}{\PYGZsq{}print Dumper \PYGZdl{}event\PYGZsq{}} \PYG{l+s+se}{\PYGZbs{}}
    \PYGZhy{}\PYGZhy{}no\PYGZhy{}report                    \PYG{l+s+se}{\PYGZbs{}}
    \PYGZhy{}\PYGZhy{}sample \PYG{l+m}{1}
\end{sphinxVerbatim}

That will produce a lot of output with “attribute =\textgreater{} value” pairs like:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nv}{\PYGZdl{}VAR1} \PYG{o}{=} \PYG{o}{\PYGZob{}}
  \PYG{n+nv}{Query\PYGZus{}time} \PYG{o}{=}\PYGZgt{} \PYG{l+s+s1}{\PYGZsq{}0.033384\PYGZsq{}},
  \PYG{n+nv}{Rows\PYGZus{}examined} \PYG{o}{=}\PYGZgt{} \PYG{l+s+s1}{\PYGZsq{}0\PYGZsq{}},
  \PYG{n+nv}{Rows\PYGZus{}sent} \PYG{o}{=}\PYGZgt{} \PYG{l+s+s1}{\PYGZsq{}0\PYGZsq{}},
  \PYG{n+nv}{Thread\PYGZus{}id} \PYG{o}{=}\PYGZgt{} \PYG{l+s+s1}{\PYGZsq{}10\PYGZsq{}},
  \PYG{n+nv}{Tmp\PYGZus{}table} \PYG{o}{=}\PYGZgt{} \PYG{l+s+s1}{\PYGZsq{}No\PYGZsq{}},
  \PYG{n+nv}{Tmp\PYGZus{}table\PYGZus{}on\PYGZus{}disk} \PYG{o}{=}\PYGZgt{} \PYG{l+s+s1}{\PYGZsq{}No\PYGZsq{}},
  \PYG{n+nv}{arg} \PYG{o}{=}\PYGZgt{} \PYG{l+s+s1}{\PYGZsq{}SELECT col FROM tbl WHERE id=5\PYGZsq{}},
  \PYG{n+nv}{bytes} \PYG{o}{=}\PYGZgt{} \PYG{l+m}{103},
  \PYG{n+nv}{cmd} \PYG{o}{=}\PYGZgt{} \PYG{l+s+s1}{\PYGZsq{}Query\PYGZsq{}},
  \PYG{n+nv}{db} \PYG{o}{=}\PYGZgt{} \PYG{l+s+s1}{\PYGZsq{}db1\PYGZsq{}},
  \PYG{n+nv}{fingerprint} \PYG{o}{=}\PYGZgt{} \PYG{l+s+s1}{\PYGZsq{}select col from tbl where id=?\PYGZsq{}},
  \PYG{n+nv}{host} \PYG{o}{=}\PYGZgt{} \PYG{l+s+s1}{\PYGZsq{}\PYGZsq{}},
  \PYG{n+nv}{pos\PYGZus{}in\PYGZus{}log} \PYG{o}{=}\PYGZgt{} \PYG{l+m}{1334},
  \PYG{n+nv}{ts} \PYG{o}{=}\PYGZgt{} \PYG{l+s+s1}{\PYGZsq{}071218 11:48:27\PYGZsq{}},
  \PYG{n+nv}{user} \PYG{o}{=}\PYGZgt{} \PYG{l+s+s1}{\PYGZsq{}[SQL\PYGZus{}SLAVE]\PYGZsq{}}
\PYG{o}{\PYGZcb{}}\PYG{p}{;}
\end{sphinxVerbatim}


\section{COMMON}
\label{\detokenize{mariadb-query-digest:common}}
These attribute are common to all input {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-type}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}type}}}}} and {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-processlist}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}processlist}}}}},
except where noted.

arg
\begin{quote}

The query text, or the command for admin commands like \sphinxcode{\sphinxupquote{Ping}}.
\end{quote}

bytes
\begin{quote}

The byte length of the \sphinxcode{\sphinxupquote{arg}}.
\end{quote}

cmd
\begin{quote}

“Query” or “Admin”.
\end{quote}

db
\begin{quote}

The current database.  The value comes from USE database statements.
By default, \sphinxcode{\sphinxupquote{Schema}} is an alias which is automatically
changed to \sphinxcode{\sphinxupquote{db}}; see {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-attribute-aliases}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}attribute\sphinxhyphen{}aliases}}}}}.
\end{quote}

fingerprint
\begin{quote}

An abstracted form of the query.  See “FINGERPRINTS”.
\end{quote}

host
\begin{quote}

Client host which executed the query.
\end{quote}

pos\_in\_log
\begin{quote}

The byte offset of the event in the log or tcpdump,
except for {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-processlist}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}processlist}}}}}.
\end{quote}

Query\_time
\begin{quote}

The total time the query took, including lock time.
\end{quote}

ts
\begin{quote}

The timestamp of when the query ended.
\end{quote}


\section{SLOW, GENERAL, AND BINARY LOGS}
\label{\detokenize{mariadb-query-digest:slow-general-and-binary-logs}}
Events have all available attributes from the log file.  Therefore, you only
need to look at the log file to see which events are available, but remember:
not all events have the same attributes.


\section{TCPDUMP}
\label{\detokenize{mariadb-query-digest:tcpdump}}
These attributes are available when parsing {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-type}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}type}}}}} tcpdump.

Error\_no
\begin{quote}

The MariaDB error number if the query caused an error.
\end{quote}

ip
\begin{quote}

The client’s IP address.  Certain log files may also contain this attribute.
\end{quote}

No\_good\_index\_used
\begin{quote}

Yes or No if no good index existed for the query (flag set by server).
\end{quote}

No\_index\_used
\begin{quote}

Yes or No if the query did not use any index (flag set by server).
\end{quote}

port
\begin{quote}

The client’s port number.
\end{quote}

Warning\_count
\begin{quote}

The number of warnings, as otherwise shown by \sphinxcode{\sphinxupquote{SHOW WARNINGS}}.
\end{quote}


\section{PROCESSLIST}
\label{\detokenize{mariadb-query-digest:processlist}}
If using {\hyperref[\detokenize{mariadb-query-digest:cmdoption-mariadb-query-digest-processlist}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}processlist}}}}}, an \sphinxcode{\sphinxupquote{id}} attribute is available for
the process ID, in addition to the common attributes.


\section{AUTHORS}
\label{\detokenize{mariadb-query-digest:authors}}
Cole Busby, Baron Schwartz, Daniel Nichter, and Brian Fraser


\section{ABOUT THIS MARIADB TOOL}
\label{\detokenize{mariadb-query-digest:about-this-mariadb-tool}}
This tool is part of MariaDB client tools. This MariaDB Tool was forked from
Percona Toolkit’s pt\sphinxhyphen{}query\sphinxhyphen{}digest in November, 2019.  Percona Toolkit was
forked from two projects in June, 2011: Maatkit and Aspersa.  Those projects
were created by Baron Schwartz and primarily developed by him and Daniel
Nichter.


\section{COPYRIGHT, LICENSE, AND WARRANTY}
\label{\detokenize{mariadb-query-digest:copyright-license-and-warranty}}
This program is copyright 2019\sphinxhyphen{}2021 MariaDB Corporation and/or its affiliates,
2011\sphinxhyphen{}2018 Percona LLC and/or its affiliates, 2010\sphinxhyphen{}2011 Baron Schwartz.

THIS PROGRAM IS PROVIDED “AS IS” AND WITHOUT ANY EXPRESS OR IMPLIED
WARRANTIES, INCLUDING, WITHOUT LIMITATION, THE IMPLIED WARRANTIES OF
MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.

This program is free software; you can redistribute it and/or modify it under
the terms of the GNU General Public License as published by the Free Software
Foundation, version 2; OR the Perl Artistic License.  On UNIX and similar
systems, you can issue \textasciigrave{}man perlgpl’ or \textasciigrave{}man perlartistic’ to read these
licenses.

You should have received a copy of the GNU General Public License along with
this program; if not, write to the Free Software Foundation, Inc., 59 Temple
Place, Suite 330, Boston, MA  02111\sphinxhyphen{}1307  USA.


\section{VERSION}
\label{\detokenize{mariadb-query-digest:version}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}query\sphinxhyphen{}digest}} 6.0.0rc


\chapter{\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change}}}
\label{\detokenize{mariadb-schema-change:mariadb-schema-change}}\label{\detokenize{mariadb-schema-change::doc}}

\section{NAME}
\label{\detokenize{mariadb-schema-change:name}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change}} \sphinxhyphen{} ALTER tables without locking them.


\section{SYNOPSIS}
\label{\detokenize{mariadb-schema-change:synopsis}}

\subsection{Usage}
\label{\detokenize{mariadb-schema-change:usage}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{mariadb}\PYG{o}{\PYGZhy{}}\PYG{n}{schema}\PYG{o}{\PYGZhy{}}\PYG{n}{change} \PYG{p}{[}\PYG{n}{OPTIONS}\PYG{p}{]} \PYG{n}{DSN}
\end{sphinxVerbatim}

\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change}} alters a table’s structure without blocking reads or
writes.  Specify the database and table in the DSN. Do not use this tool before
reading its documentation and checking your backups carefully.

Add a column to sakila.actor:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
mariadb\PYGZhy{}schema\PYGZhy{}change \PYGZhy{}\PYGZhy{}alter \PYG{l+s+s2}{\PYGZdq{}ADD COLUMN c1 INT\PYGZdq{}} \PYG{n+nv}{D}\PYG{o}{=}sakila,t\PYG{o}{=}actor
\end{sphinxVerbatim}

Change sakila.actor to InnoDB, effectively performing OPTIMIZE TABLE in a
non\sphinxhyphen{}blocking fashion because it is already an InnoDB table:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
mariadb\PYGZhy{}schema\PYGZhy{}change \PYGZhy{}\PYGZhy{}alter \PYG{l+s+s2}{\PYGZdq{}ENGINE=InnoDB\PYGZdq{}} \PYG{n+nv}{D}\PYG{o}{=}sakila,t\PYG{o}{=}actor
\end{sphinxVerbatim}


\section{RISKS}
\label{\detokenize{mariadb-schema-change:risks}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change}} is mature, proven in the real world, and well tested,
but all database tools can pose a risk to the system and the database
server.  Before using this tool, please:
\begin{itemize}
\item {} 
Read the tool’s documentation

\item {} 
Review the tool’s known “BUGS”

\item {} 
Test the tool on a non\sphinxhyphen{}production server

\item {} 
Backup your production server and verify the backups

\end{itemize}


\section{DESCRIPTION}
\label{\detokenize{mariadb-schema-change:description}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change}} emulates the way that MariaDB alters tables internally,
but it works on a copy of the table you wish to alter. This means that the
original table is not locked, and clients may continue to read and change data
in it.

\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change}} works by creating an empty copy of the table to alter,
modifying it as desired, and then copying rows from the original table into the
new table. When the copy is complete, it moves away the original table and
replaces it with the new one.  By default, it also drops the original table.

The data copy process is performed in small chunks of data, which are varied to
attempt to make them execute in a specific amount of time (see
{\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-chunk-time}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}chunk\sphinxhyphen{}time}}}}}).  This process is very similar to how other tools, such as
pt\sphinxhyphen{}table\sphinxhyphen{}checksum, work.  Any modifications to data in the original tables
during the copy will be reflected in the new table, because the tool creates
triggers on the original table to update the corresponding rows in the new
table.  The use of triggers means that the tool will not work if any triggers
are already defined on the table.

When the tool finishes copying data into the new table, it uses an atomic
\sphinxcode{\sphinxupquote{RENAME TABLE}} operation to simultaneously rename the original and new tables.
After this is complete, the tool drops the original table.

Foreign keys complicate the tool’s operation and introduce additional risk.  The
technique of atomically renaming the original and new tables does not work when
foreign keys refer to the table. The tool must update foreign keys to refer to
the new table after the schema change is complete. The tool supports two methods
for accomplishing this. You can read more about this in the documentation for
{\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-alter-foreign-keys-method}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}alter\sphinxhyphen{}foreign\sphinxhyphen{}keys\sphinxhyphen{}method}}}}}.

Foreign keys also cause some side effects. The final table will have the same
foreign keys and indexes as the original table (unless you specify differently
in your ALTER statement), but the names of the objects may be changed slightly
to avoid object name collisions in MariaDB and InnoDB.

For safety, the tool does not modify the table unless you specify the
{\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-execute}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}execute}}}}} option, which is not enabled by default.  The tool supports a
variety of other measures to prevent unwanted load or other problems, including
automatically detecting replicas, connecting to them, and using the following
safety checks:
\begin{itemize}
\item {} 
In most cases the tool will refuse to operate unless a PRIMARY KEY or UNIQUE INDEX is
present in the table. See {\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-alter}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}alter}}}}} for details.

\item {} 
The tool refuses to operate if it detects replication filters. See
\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}check\sphinxhyphen{}replication\sphinxhyphen{}filters}} for details.

\item {} 
The tool pauses the data copy operation if it observes any replicas that are
delayed in replication. See {\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-max-lag}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}lag}}}}} for details.

\item {} 
The tool pauses or aborts its operation if it detects too much load on the
server. See {\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-max-load}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}load}}}}} and {\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-critical-load}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}critical\sphinxhyphen{}load}}}}} for details.

\item {} 
The tool sets \sphinxcode{\sphinxupquote{innodb\_lock\_wait\_timeout=1}} and (for MariaDB 5.5 and newer)
\sphinxcode{\sphinxupquote{lock\_wait\_timeout=60}} so that it is more likely to be the victim of any
lock contention, and less likely to disrupt other transactions.  These
values can be changed by specifying {\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-set-vars}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}set\sphinxhyphen{}vars}}}}}.

\item {} 
The tool refuses to alter the table if foreign key constraints reference it,
unless you specify {\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-alter-foreign-keys-method}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}alter\sphinxhyphen{}foreign\sphinxhyphen{}keys\sphinxhyphen{}method}}}}}.

\item {} 
The tool cannot alter MyISAM tables on “Galera” nodes.

\end{itemize}


\section{MariaDB Galera Cluster}
\label{\detokenize{mariadb-schema-change:mariadb-galera-cluster}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change}} works with Galera Cluster 5.5.28
and newer, but there are two limitations: only InnoDB tables can be altered,
and \sphinxcode{\sphinxupquote{wsrep\_OSU\_method}} must be set to \sphinxcode{\sphinxupquote{TOI}} (total order isolation).
The tool exits with an error if the host is a cluster node and the table
is MyISAM or is being converted to MyISAM (\sphinxcode{\sphinxupquote{ENGINE=MyISAM}}), or if
\sphinxcode{\sphinxupquote{wsrep\_OSU\_method}} is not \sphinxcode{\sphinxupquote{TOI}}.  There is no way to disable these checks.

The tools ignores MariaDB 10.2+ \sphinxcode{\sphinxupquote{GENERATED}} columns since the value for those columns
is generated according to the expresion used to compute column values.


\section{OUTPUT}
\label{\detokenize{mariadb-schema-change:output}}
The tool prints information about its activities to STDOUT so that you can see
what it is doing.  During the data copy phase, it prints {\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-progress}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}progress}}}}}
reports to STDERR.  You can get additional information by specifying
{\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-print}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}print}}}}}.

If {\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-statistics}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}statistics}}}}} is specified, a report of various internal event counts
is printed at the end, like:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Event  Count}
\PYG{c+c1}{\PYGZsh{} ====== =====}
\PYG{c+c1}{\PYGZsh{} INSERT     1}
\end{sphinxVerbatim}


\section{OPTIONS}
\label{\detokenize{mariadb-schema-change:options}}
{\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-dry-run}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dry\sphinxhyphen{}run}}}}} and {\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-execute}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}execute}}}}} are mutually exclusive.

This tool accepts additional command\sphinxhyphen{}line arguments.  Refer to the
“SYNOPSIS” and usage information for details.
\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}alter@\spxentry{\sphinxhyphen{}\sphinxhyphen{}alter}}\index{\sphinxhyphen{}\sphinxhyphen{}alter@\spxentry{\sphinxhyphen{}\sphinxhyphen{}alter}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-alter}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}alter}}\sphinxcode{\sphinxupquote{}}}
type: string

The schema modification, without the ALTER TABLE keywords. You can perform
multiple modifications to the table by specifying them with commas. Please refer
to the MariaDB manual for the syntax of ALTER TABLE.

The following limitations apply which, if attempted, will cause the tool
to fail in unpredictable ways:
\begin{itemize}
\item {} 
In almost all cases a PRIMARY KEY or UNIQUE INDEX needs to be present in the table.
This is necessary because the tool creates a DELETE trigger to keep the new table
updated while the process is running.

A notable exception is when a PRIMARY KEY or UNIQUE INDEX is being created from
\sphinxstylestrong{existing columns} as part of the ALTER clause; in that case it will use these
column(s) for the DELETE trigger.

\item {} 
The \sphinxcode{\sphinxupquote{RENAME}} clause cannot be used to rename the table.

\item {} 
Columns cannot be renamed by dropping and re\sphinxhyphen{}adding with the new name.
The tool will not copy the original column’s data to the new column.

\item {} 
If you add a column without a default value and make it NOT NULL, the tool
will fail, as it will not try to guess a default value for you; You must
specify the default.

\item {} 
\sphinxcode{\sphinxupquote{DROP FOREIGN KEY constraint\_name}} requires specifying \sphinxcode{\sphinxupquote{\_constraint\_name}}
rather than the real \sphinxcode{\sphinxupquote{constraint\_name}}.  Due to a limitation in MariaDB,
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change}} adds a leading underscore to foreign key constraint
names when creating the new table.  For example, to drop this constraint:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
CONSTRAINT \PYG{l+s+sb}{`}fk\PYGZus{}foo\PYG{l+s+sb}{`} FOREIGN KEY \PYG{o}{(}\PYG{l+s+sb}{`}foo\PYGZus{}id\PYG{l+s+sb}{`}\PYG{o}{)} REFERENCES \PYG{l+s+sb}{`}bar\PYG{l+s+sb}{`} \PYG{o}{(}\PYG{l+s+sb}{`}foo\PYGZus{}id\PYG{l+s+sb}{`}\PYG{o}{)}
\end{sphinxVerbatim}

You must specify \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}alter "DROP FOREIGN KEY \_fk\_foo"}}.

\item {} 
The tool does not use \sphinxcode{\sphinxupquote{LOCK IN SHARE MODE}} with MariaDB 5.0 because it can
cause a slave error which breaks replication:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
Query caused different errors on master and slave. Error on master:
\PYG{l+s+s1}{\PYGZsq{}Deadlock found when trying to get lock; try restarting transaction\PYGZsq{}} \PYG{o}{(}\PYG{l+m}{1213}\PYG{o}{)},
Error on slave: \PYG{l+s+s1}{\PYGZsq{}no error\PYGZsq{}} \PYG{o}{(}\PYG{l+m}{0}\PYG{o}{)}. Default database: \PYG{l+s+s1}{\PYGZsq{}pt\PYGZus{}osc\PYGZsq{}}.
Query: \PYG{l+s+s1}{\PYGZsq{}INSERT INTO pt\PYGZus{}osc.t (id, c) VALUES (\PYGZsq{}}\PYG{l+m}{730}\PYG{l+s+s1}{\PYGZsq{}, \PYGZsq{}}new row\PYG{l+s+s1}{\PYGZsq{})\PYGZsq{}}
\end{sphinxVerbatim}

The error happens when converting a MyISAM table to InnoDB because MyISAM
is non\sphinxhyphen{}transactional but InnoDB is transactional.  MariaDB 5.1 and newer
handle this case correctly, but testing reproduces the error 5\% of the time
with MariaDB 5.0.

This is a MariaDB bug, similar to \sphinxurl{http://bugs.mysql.com/bug.php?id=45694},
but there is no fix or workaround in MariaDB 5.0.  Without \sphinxcode{\sphinxupquote{LOCK IN SHARE MODE}},
tests pass 100\% of the time, so the risk of data loss or breaking replication
should be negligible.

\sphinxstylestrong{Be sure to verify the new table if using MariaDB 5.0 and converting
from MyISAM to InnoDB!}

\end{itemize}

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}alter\sphinxhyphen{}foreign\sphinxhyphen{}keys\sphinxhyphen{}method@\spxentry{\sphinxhyphen{}\sphinxhyphen{}alter\sphinxhyphen{}foreign\sphinxhyphen{}keys\sphinxhyphen{}method}}\index{\sphinxhyphen{}\sphinxhyphen{}alter\sphinxhyphen{}foreign\sphinxhyphen{}keys\sphinxhyphen{}method@\spxentry{\sphinxhyphen{}\sphinxhyphen{}alter\sphinxhyphen{}foreign\sphinxhyphen{}keys\sphinxhyphen{}method}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-alter-foreign-keys-method}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}alter\sphinxhyphen{}foreign\sphinxhyphen{}keys\sphinxhyphen{}method}}\sphinxcode{\sphinxupquote{}}}
type: string

How to modify foreign keys so they reference the new table.  Foreign keys that
reference the table to be altered must be treated specially to ensure that they
continue to reference the correct table. When the tool renames the original
table to let the new one take its place, the foreign keys “follow” the renamed
table, and must be changed to reference the new table instead.

The tool supports two techniques to achieve this. It automatically finds “child
tables” that reference the table to be altered.

auto
\begin{quote}

Automatically determine which method is best.  The tool uses
\sphinxcode{\sphinxupquote{rebuild\_constraints}} if possible (see the description of that method for
details), and if not, then it uses \sphinxcode{\sphinxupquote{drop\_swap}}.
\end{quote}

rebuild\_constraints
\begin{quote}

This method uses \sphinxcode{\sphinxupquote{ALTER TABLE}} to drop and re\sphinxhyphen{}add foreign key constraints that
reference the new table.  This is the preferred technique, unless one or more of
the “child” tables is so large that the \sphinxcode{\sphinxupquote{ALTER}} would take too long.  The tool
determines that by comparing the number of rows in the child table to the rate
at which the tool is able to copy rows from the old table to the new table. If
the tool estimates that the child table can be altered in less time than the
{\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-chunk-time}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}chunk\sphinxhyphen{}time}}}}}, then it will use this technique.  For purposes of estimating
the time required to alter the child table, the tool multiplies the row\sphinxhyphen{}copying
rate by {\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-chunk-size-limit}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}chunk\sphinxhyphen{}size\sphinxhyphen{}limit}}}}}, because MariaDB’s \sphinxcode{\sphinxupquote{ALTER TABLE}} is typically
much faster than the external process of copying rows.

Due to a limitation in MariaDB, foreign keys will not have the same names after
the ALTER that they did prior to it. The tool has to rename the foreign key
when it redefines it, which adds a leading underscore to the name. In some
cases, MariaDB also automatically renames indexes required for the foreign key.
\end{quote}

drop\_swap
\begin{quote}

Disable foreign key checks (FOREIGN\_KEY\_CHECKS=0), then drop the original table
before renaming the new table into its place. This is different from the normal
method of swapping the old and new table, which uses an atomic \sphinxcode{\sphinxupquote{RENAME}} that is
undetectable to client applications.

This method is faster and does not block, but it is riskier for two reasons.
First, for a short time between dropping the original table and renaming the
temporary table, the table to be altered simply does not exist, and queries
against it will result in an error.  Secondly, if there is an error and the new
table cannot be renamed into the place of the old one, then it is too late to
abort, because the old table is gone permanently.

This method forces \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}swap\sphinxhyphen{}tables}} and \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}drop\sphinxhyphen{}old\sphinxhyphen{}table}}.
\end{quote}

none
\begin{quote}

This method is like \sphinxcode{\sphinxupquote{drop\_swap}} without the “swap”.  Any foreign keys that
referenced the original table will now reference a nonexistent table. This will
typically cause foreign key violations that are visible in \sphinxcode{\sphinxupquote{SHOW ENGINE INNODB
STATUS}}, similar to the following:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
Trying to add to index \PYG{l+s+sb}{`}idx\PYGZus{}fk\PYGZus{}staff\PYGZus{}id\PYG{l+s+sb}{`} tuple:
DATA TUPLE: \PYG{l+m}{2} fields\PYG{p}{;}
\PYG{l+m}{0}: len \PYG{l+m}{1}\PYG{p}{;} hex \PYG{l+m}{05}\PYG{p}{;} asc  \PYG{p}{;}\PYG{p}{;}
\PYG{l+m}{1}: len \PYG{l+m}{4}\PYG{p}{;} hex \PYG{l+m}{80000001}\PYG{p}{;} asc     \PYG{p}{;}\PYG{p}{;}
But the parent table \PYG{l+s+sb}{`}sakila\PYG{l+s+sb}{`}.\PYG{l+s+sb}{`}staff\PYGZus{}old\PYG{l+s+sb}{`}
or its .ibd file does not currently exist!
\end{sphinxVerbatim}

This is because the original table (in this case, sakila.staff) was renamed to
sakila.staff\_old and then dropped. This method of handling foreign key
constraints is provided so that the database administrator can disable the
tool’s built\sphinxhyphen{}in functionality if desired.
\end{quote}

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}{[}no{]}analyze\sphinxhyphen{}before\sphinxhyphen{}swap@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}analyze\sphinxhyphen{}before\sphinxhyphen{}swap}}\index{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}analyze\sphinxhyphen{}before\sphinxhyphen{}swap@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}analyze\sphinxhyphen{}before\sphinxhyphen{}swap}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-0}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}}}\sphinxcode{\sphinxupquote{{[}no{]}analyze\sphinxhyphen{}before\sphinxhyphen{}swap}}}
default: yes

Execute ANALYZE TABLE on the new table before swapping with the old one.
By default, this happens only when running MariaDB 5.6 and newer, and
\sphinxcode{\sphinxupquote{innodb\_stats\_persistent}} is enabled. Specify the option explicitly to enable
or disable it regardless of MariaDB version and \sphinxcode{\sphinxupquote{innodb\_stats\_persistent}}.

This circumvents a potentially serious issue related to InnoDB optimizer
statistics. If the table being alerted is busy and the tool completes quickly,
the new table will not have optimizer statistics after being swapped. This can
cause fast, index\sphinxhyphen{}using queries to do full table scans until optimizer
statistics are updated (usually after 10 seconds). If the table is large and
the server very busy, this can cause an outage.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass}}\index{\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-ask-pass}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass}}\sphinxcode{\sphinxupquote{}}}
Prompt for a password when connecting to MariaDB.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}channel@\spxentry{\sphinxhyphen{}\sphinxhyphen{}channel}}\index{\sphinxhyphen{}\sphinxhyphen{}channel@\spxentry{\sphinxhyphen{}\sphinxhyphen{}channel}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-channel}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}channel}}\sphinxcode{\sphinxupquote{}}}
type: string

Channel name used when connected to a server using replication channels.
Suppose you have two masters, master\_a at port 12345, master\_b at port 1236 and
a slave connected to both masters using channels chan\_master\_a and chan\_master\_b.
If you want to run pt\sphinxhyphen{}table\sphinxhyphen{}sync to synchronize the slave against master\_a, pt\sphinxhyphen{}table\sphinxhyphen{}sync
won’t be able to determine what’s the correct master since SHOW SLAVE STATUS
will return 2 rows. In this case, you can use \textendash{}channel=chan\_master\_a to specify
the channel name to use in the SHOW SLAVE STATUS command.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}charset@\spxentry{\sphinxhyphen{}\sphinxhyphen{}charset}}\index{\sphinxhyphen{}\sphinxhyphen{}charset@\spxentry{\sphinxhyphen{}\sphinxhyphen{}charset}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-charset}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}charset}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}A; type: string

Default character set.  If the value is utf8, sets Perl’s binmode on
STDOUT to utf8, passes the mysql\_enable\_utf8 option to DBD::mysql, and runs SET
NAMES UTF8 after connecting to MariaDB.  Any other value sets binmode on STDOUT
without the utf8 layer, and runs SET NAMES after connecting to MariaDB.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}{[}no{]}check\sphinxhyphen{}alter@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}check\sphinxhyphen{}alter}}\index{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}check\sphinxhyphen{}alter@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}check\sphinxhyphen{}alter}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-1}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}}}\sphinxcode{\sphinxupquote{{[}no{]}check\sphinxhyphen{}alter}}}
default: yes

Parses the {\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-alter}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}alter}}}}} specified and tries to warn of possible unintended
behavior. Currently, it checks for:

Column renames
\begin{quote}

In previous versions of the tool, renaming a column with
\sphinxcode{\sphinxupquote{CHANGE COLUMN name new\_name}} would lead to that column’s data being lost.
The tool now parses the alter statement and tries to catch these cases, so
the renamed columns should have the same data as the originals. However, the
code that does this is not a full\sphinxhyphen{}blown SQL parser, so you should first
run the tool with {\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-dry-run}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dry\sphinxhyphen{}run}}}}} and {\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-print}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}print}}}}} and verify that it detects
the renamed columns correctly.
\end{quote}

DROP PRIMARY KEY
\begin{quote}

If {\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-alter}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}alter}}}}} contain \sphinxcode{\sphinxupquote{DROP PRIMARY KEY}} (case\sphinxhyphen{} and space\sphinxhyphen{}insensitive),
a warning is printed and the tool exits unless {\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-dry-run}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dry\sphinxhyphen{}run}}}}} is specified.
Altering the primary key can be dangerous, but the tool can handle it.
The tool’s triggers, particularly the DELETE trigger, are most affected by
altering the primary key because the tool prefers to use the primary key
for its triggers.  You should first run the tool with {\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-dry-run}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dry\sphinxhyphen{}run}}}}} and
{\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-print}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}print}}}}} and verify that the triggers are correct.
\end{quote}

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}{[}no{]}check\sphinxhyphen{}foreign\sphinxhyphen{}keys@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}check\sphinxhyphen{}foreign\sphinxhyphen{}keys}}\index{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}check\sphinxhyphen{}foreign\sphinxhyphen{}keys@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}check\sphinxhyphen{}foreign\sphinxhyphen{}keys}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-2}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}}}\sphinxcode{\sphinxupquote{{[}no{]}check\sphinxhyphen{}foreign\sphinxhyphen{}keys}}}
default: yes

Check for self\sphinxhyphen{}referencing foreign keys. Currently self referencing FKs are
not full supported, so, to prevent errors, this program won’t run if the table
has self\sphinxhyphen{}referencing foreign keys. Use this parameter to disable self\sphinxhyphen{}referencing
FK checks.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}check\sphinxhyphen{}interval@\spxentry{\sphinxhyphen{}\sphinxhyphen{}check\sphinxhyphen{}interval}}\index{\sphinxhyphen{}\sphinxhyphen{}check\sphinxhyphen{}interval@\spxentry{\sphinxhyphen{}\sphinxhyphen{}check\sphinxhyphen{}interval}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-check-interval}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}check\sphinxhyphen{}interval}}\sphinxcode{\sphinxupquote{}}}
type: time; default: 1

Sleep time between checks for {\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-max-lag}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}lag}}}}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}{[}no{]}check\sphinxhyphen{}plan@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}check\sphinxhyphen{}plan}}\index{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}check\sphinxhyphen{}plan@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}check\sphinxhyphen{}plan}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-3}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}}}\sphinxcode{\sphinxupquote{{[}no{]}check\sphinxhyphen{}plan}}}
default: yes

Check query execution plans for safety. By default, this option causes
the tool to run EXPLAIN before running queries that are meant to access
a small amount of data, but which could access many rows if MariaDB chooses a bad
execution plan. These include the queries to determine chunk boundaries and the
chunk queries themselves. If it appears that MariaDB will use a bad query
execution plan, the tool will skip the chunk of the table.

The tool uses several heuristics to determine whether an execution plan is bad.
The first is whether EXPLAIN reports that MariaDB intends to use the desired index
to access the rows. If MariaDB chooses a different index, the tool considers the
query unsafe.

The tool also checks how much of the index MariaDB reports that it will use for
the query. The EXPLAIN output shows this in the key\_len column. The tool
remembers the largest key\_len seen, and skips chunks where MariaDB reports that it
will use a smaller prefix of the index. This heuristic can be understood as
skipping chunks that have a worse execution plan than other chunks.

The tool prints a warning the first time a chunk is skipped due to
a bad execution plan in each table. Subsequent chunks are skipped silently,
although you can see the count of skipped chunks in the SKIPPED column in
the tool’s output.

This option adds some setup work to each table and chunk. Although the work is
not intrusive for MariaDB, it results in more round\sphinxhyphen{}trips to the server, which
consumes time. Making chunks too small will cause the overhead to become
relatively larger. It is therefore recommended that you not make chunks too
small, because the tool may take a very long time to complete if you do.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}{[}no{]}check\sphinxhyphen{}replication\sphinxhyphen{}filters@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}check\sphinxhyphen{}replication\sphinxhyphen{}filters}}\index{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}check\sphinxhyphen{}replication\sphinxhyphen{}filters@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}check\sphinxhyphen{}replication\sphinxhyphen{}filters}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-4}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}}}\sphinxcode{\sphinxupquote{{[}no{]}check\sphinxhyphen{}replication\sphinxhyphen{}filters}}}
default: yes

Abort if any replication filter is set on any server.  The tool looks for
server options that filter replication, such as binlog\_ignore\_db and
replicate\_do\_db.  If it finds any such filters, it aborts with an error.

If the replicas are configured with any filtering options, you should be careful
not to modify any databases or tables that exist on the master and not the
replicas, because it could cause replication to fail.  For more information on
replication rules, see \sphinxurl{http://dev.mysql.com/doc/en/replication-rules.html}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}check\sphinxhyphen{}slave\sphinxhyphen{}lag@\spxentry{\sphinxhyphen{}\sphinxhyphen{}check\sphinxhyphen{}slave\sphinxhyphen{}lag}}\index{\sphinxhyphen{}\sphinxhyphen{}check\sphinxhyphen{}slave\sphinxhyphen{}lag@\spxentry{\sphinxhyphen{}\sphinxhyphen{}check\sphinxhyphen{}slave\sphinxhyphen{}lag}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-check-slave-lag}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}check\sphinxhyphen{}slave\sphinxhyphen{}lag}}\sphinxcode{\sphinxupquote{}}}
type: string

Pause the data copy until this replica’s lag is less than {\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-max-lag}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}lag}}}}}.  The
value is a DSN that inherits properties from the the connection options
({\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-port}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}port}}}}}, {\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-user}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}user}}}}}, etc.).  This option overrides the normal behavior of
finding and continually monitoring replication lag on ALL connected replicas.
If you don’t want to monitor ALL replicas, but you want more than just one
replica to be monitored, then use the DSN option to the {\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-recursion-method}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}recursion\sphinxhyphen{}method}}}}}
option instead of this option.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}chunk\sphinxhyphen{}index@\spxentry{\sphinxhyphen{}\sphinxhyphen{}chunk\sphinxhyphen{}index}}\index{\sphinxhyphen{}\sphinxhyphen{}chunk\sphinxhyphen{}index@\spxentry{\sphinxhyphen{}\sphinxhyphen{}chunk\sphinxhyphen{}index}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-chunk-index}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}chunk\sphinxhyphen{}index}}\sphinxcode{\sphinxupquote{}}}
type: string

Prefer this index for chunking tables.  By default, the tool chooses the most
appropriate index for chunking.  This option lets you specify the index that you
prefer.  If the index doesn’t exist, then the tool will fall back to its default
behavior of choosing an index.  The tool adds the index to the SQL statements in
a \sphinxcode{\sphinxupquote{FORCE INDEX}} clause.  Be careful when using this option; a poor choice of
index could cause bad performance.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}chunk\sphinxhyphen{}index\sphinxhyphen{}columns@\spxentry{\sphinxhyphen{}\sphinxhyphen{}chunk\sphinxhyphen{}index\sphinxhyphen{}columns}}\index{\sphinxhyphen{}\sphinxhyphen{}chunk\sphinxhyphen{}index\sphinxhyphen{}columns@\spxentry{\sphinxhyphen{}\sphinxhyphen{}chunk\sphinxhyphen{}index\sphinxhyphen{}columns}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-chunk-index-columns}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}chunk\sphinxhyphen{}index\sphinxhyphen{}columns}}\sphinxcode{\sphinxupquote{}}}
type: int

Use only this many left\sphinxhyphen{}most columns of a {\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-chunk-index}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}chunk\sphinxhyphen{}index}}}}}.  This works
only for compound indexes, and is useful in cases where a bug in the MariaDB
query optimizer (planner) causes it to scan a large range of rows instead
of using the index to locate starting and ending points precisely.  This
problem sometimes occurs on indexes with many columns, such as 4 or more.
If this happens, the tool might print a warning related to the
\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}check\sphinxhyphen{}plan}} option.  Instructing the tool to use only the first
N columns of the index is a workaround for the bug in some cases.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}chunk\sphinxhyphen{}size@\spxentry{\sphinxhyphen{}\sphinxhyphen{}chunk\sphinxhyphen{}size}}\index{\sphinxhyphen{}\sphinxhyphen{}chunk\sphinxhyphen{}size@\spxentry{\sphinxhyphen{}\sphinxhyphen{}chunk\sphinxhyphen{}size}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-chunk-size}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}chunk\sphinxhyphen{}size}}\sphinxcode{\sphinxupquote{}}}
type: size; default: 1000

Number of rows to select for each chunk copied.  Allowable suffixes are
k, M, G.

This option can override the default behavior, which is to adjust chunk size
dynamically to try to make chunks run in exactly {\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-chunk-time}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}chunk\sphinxhyphen{}time}}}}} seconds.
When this option isn’t set explicitly, its default value is used as a starting
point, but after that, the tool ignores this option’s value.  If you set this
option explicitly, however, then it disables the dynamic adjustment behavior and
tries to make all chunks exactly the specified number of rows.

There is a subtlety: if the chunk index is not unique, then it’s possible that
chunks will be larger than desired. For example, if a table is chunked by an
index that contains 10,000 of a given value, there is no way to write a WHERE
clause that matches only 1,000 of the values, and that chunk will be at least
10,000 rows large.  Such a chunk will probably be skipped because of
{\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-chunk-size-limit}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}chunk\sphinxhyphen{}size\sphinxhyphen{}limit}}}}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}chunk\sphinxhyphen{}size\sphinxhyphen{}limit@\spxentry{\sphinxhyphen{}\sphinxhyphen{}chunk\sphinxhyphen{}size\sphinxhyphen{}limit}}\index{\sphinxhyphen{}\sphinxhyphen{}chunk\sphinxhyphen{}size\sphinxhyphen{}limit@\spxentry{\sphinxhyphen{}\sphinxhyphen{}chunk\sphinxhyphen{}size\sphinxhyphen{}limit}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-chunk-size-limit}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}chunk\sphinxhyphen{}size\sphinxhyphen{}limit}}\sphinxcode{\sphinxupquote{}}}
type: float; default: 4.0

Do not copy chunks this much larger than the desired chunk size.

When a table has no unique indexes, chunk sizes can be inaccurate.  This option
specifies a maximum tolerable limit to the inaccuracy.  The tool uses \textless{}EXPLAIN\textgreater{}
to estimate how many rows are in the chunk.  If that estimate exceeds the
desired chunk size times the limit, then the tool skips the chunk.

The minimum value for this option is 1, which means that no chunk can be larger
than {\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-chunk-size}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}chunk\sphinxhyphen{}size}}}}}.  You probably don’t want to specify 1, because rows
reported by EXPLAIN are estimates, which can be different from the real number
of rows in the chunk.  You can disable oversized chunk checking by specifying a
value of 0.

The tool also uses this option to determine how to handle foreign keys that
reference the table to be altered. See {\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-alter-foreign-keys-method}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}alter\sphinxhyphen{}foreign\sphinxhyphen{}keys\sphinxhyphen{}method}}}}} for
details.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}chunk\sphinxhyphen{}time@\spxentry{\sphinxhyphen{}\sphinxhyphen{}chunk\sphinxhyphen{}time}}\index{\sphinxhyphen{}\sphinxhyphen{}chunk\sphinxhyphen{}time@\spxentry{\sphinxhyphen{}\sphinxhyphen{}chunk\sphinxhyphen{}time}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-chunk-time}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}chunk\sphinxhyphen{}time}}\sphinxcode{\sphinxupquote{}}}
type: float; default: 0.5

Adjust the chunk size dynamically so each data\sphinxhyphen{}copy query takes this long to
execute.  The tool tracks the copy rate (rows per second) and adjusts the chunk
size after each data\sphinxhyphen{}copy query, so that the next query takes this amount of
time (in seconds) to execute.  It keeps an exponentially decaying moving average
of queries per second, so that if the server’s performance changes due to
changes in server load, the tool adapts quickly.

If this option is set to zero, the chunk size doesn’t auto\sphinxhyphen{}adjust, so query
times will vary, but query chunk sizes will not. Another way to do the same
thing is to specify a value for {\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-chunk-size}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}chunk\sphinxhyphen{}size}}}}} explicitly, instead of leaving
it at the default.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}config@\spxentry{\sphinxhyphen{}\sphinxhyphen{}config}}\index{\sphinxhyphen{}\sphinxhyphen{}config@\spxentry{\sphinxhyphen{}\sphinxhyphen{}config}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-config}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}config}}\sphinxcode{\sphinxupquote{}}}
type: Array

Read this comma\sphinxhyphen{}separated list of config files; if specified, this must be the
first option on the command line.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}critical\sphinxhyphen{}load@\spxentry{\sphinxhyphen{}\sphinxhyphen{}critical\sphinxhyphen{}load}}\index{\sphinxhyphen{}\sphinxhyphen{}critical\sphinxhyphen{}load@\spxentry{\sphinxhyphen{}\sphinxhyphen{}critical\sphinxhyphen{}load}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-critical-load}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}critical\sphinxhyphen{}load}}\sphinxcode{\sphinxupquote{}}}
type: Array; default: Threads\_running=50

Examine SHOW GLOBAL STATUS after every chunk, and abort if the load is too high.
The option accepts a comma\sphinxhyphen{}separated list of MariaDB status variables and
thresholds.  An optional \sphinxcode{\sphinxupquote{=MAX\_VALUE}} (or \sphinxcode{\sphinxupquote{:MAX\_VALUE}}) can follow each
variable.  If not given, the tool determines a threshold by examining the
current value at startup and doubling it.

See {\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-max-load}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}load}}}}} for further details. These options work similarly, except
that this option will abort the tool’s operation instead of pausing it, and the
default value is computed differently if you specify no threshold.  The reason
for this option is as a safety check in case the triggers on the original table
add so much load to the server that it causes downtime.  There is probably no
single value of Threads\_running that is wrong for every server, but a default of
50 seems likely to be unacceptably high for most servers, indicating that the
operation should be canceled immediately.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}database@\spxentry{\sphinxhyphen{}\sphinxhyphen{}database}}\index{\sphinxhyphen{}\sphinxhyphen{}database@\spxentry{\sphinxhyphen{}\sphinxhyphen{}database}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-database}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}database}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}D; type: string

Connect to this database.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}default\sphinxhyphen{}engine@\spxentry{\sphinxhyphen{}\sphinxhyphen{}default\sphinxhyphen{}engine}}\index{\sphinxhyphen{}\sphinxhyphen{}default\sphinxhyphen{}engine@\spxentry{\sphinxhyphen{}\sphinxhyphen{}default\sphinxhyphen{}engine}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-default-engine}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}default\sphinxhyphen{}engine}}\sphinxcode{\sphinxupquote{}}}
Remove \sphinxcode{\sphinxupquote{ENGINE}} from the new table.

By default the new table is created with the same table options as
the original table, so if the original table uses InnoDB, then the new
table will use InnoDB.  In certain cases involving replication, this may
cause unintended changes on replicas which use a different engine for
the same table.  Specifying this option causes the new table to be
created with the system’s default engine.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}data\sphinxhyphen{}dir@\spxentry{\sphinxhyphen{}\sphinxhyphen{}data\sphinxhyphen{}dir}}\index{\sphinxhyphen{}\sphinxhyphen{}data\sphinxhyphen{}dir@\spxentry{\sphinxhyphen{}\sphinxhyphen{}data\sphinxhyphen{}dir}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-data-dir}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}data\sphinxhyphen{}dir}}\sphinxcode{\sphinxupquote{}}}
type: string

Create the new table on a different partition using the DATA DIRECTORY feature.
Only available on 5.6+. This parameter is ignored if it is used at the same time
than remove\sphinxhyphen{}data\sphinxhyphen{}dir.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}remove\sphinxhyphen{}data\sphinxhyphen{}dir@\spxentry{\sphinxhyphen{}\sphinxhyphen{}remove\sphinxhyphen{}data\sphinxhyphen{}dir}}\index{\sphinxhyphen{}\sphinxhyphen{}remove\sphinxhyphen{}data\sphinxhyphen{}dir@\spxentry{\sphinxhyphen{}\sphinxhyphen{}remove\sphinxhyphen{}data\sphinxhyphen{}dir}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-remove-data-dir}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}remove\sphinxhyphen{}data\sphinxhyphen{}dir}}\sphinxcode{\sphinxupquote{}}}
default: no

If the original table was created using the DATA DIRECTORY feature, remove it and create
the new table in MariaDB default directory without creating a new isl file.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}defaults\sphinxhyphen{}file@\spxentry{\sphinxhyphen{}\sphinxhyphen{}defaults\sphinxhyphen{}file}}\index{\sphinxhyphen{}\sphinxhyphen{}defaults\sphinxhyphen{}file@\spxentry{\sphinxhyphen{}\sphinxhyphen{}defaults\sphinxhyphen{}file}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-defaults-file}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}defaults\sphinxhyphen{}file}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}F; type: string

Only read mysql options from the given file.  You must give an absolute
pathname.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}{[}no{]}drop\sphinxhyphen{}new\sphinxhyphen{}table@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}drop\sphinxhyphen{}new\sphinxhyphen{}table}}\index{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}drop\sphinxhyphen{}new\sphinxhyphen{}table@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}drop\sphinxhyphen{}new\sphinxhyphen{}table}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-5}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}}}\sphinxcode{\sphinxupquote{{[}no{]}drop\sphinxhyphen{}new\sphinxhyphen{}table}}}
default: yes

Drop the new table if copying the original table fails.

Specifying \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}drop\sphinxhyphen{}new\sphinxhyphen{}table}} and \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}swap\sphinxhyphen{}tables}} leaves the new,
altered copy of the table without modifying the original table.  See
{\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-new-table-name}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}new\sphinxhyphen{}table\sphinxhyphen{}name}}}}}.

\textendash{}no\sphinxhyphen{}drop\sphinxhyphen{}new\sphinxhyphen{}table does not work with
\sphinxcode{\sphinxupquote{alter\sphinxhyphen{}foreign\sphinxhyphen{}keys\sphinxhyphen{}method drop\_swap}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}{[}no{]}drop\sphinxhyphen{}old\sphinxhyphen{}table@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}drop\sphinxhyphen{}old\sphinxhyphen{}table}}\index{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}drop\sphinxhyphen{}old\sphinxhyphen{}table@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}drop\sphinxhyphen{}old\sphinxhyphen{}table}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-6}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}}}\sphinxcode{\sphinxupquote{{[}no{]}drop\sphinxhyphen{}old\sphinxhyphen{}table}}}
default: yes

Drop the original table after renaming it. After the original table has been
successfully renamed to let the new table take its place, and if there are no
errors, the tool drops the original table by default. If there are any errors,
the tool leaves the original table in place.

If \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}swap\sphinxhyphen{}tables}} is specified, then there is no old table to drop.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}{[}no{]}drop\sphinxhyphen{}triggers@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}drop\sphinxhyphen{}triggers}}\index{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}drop\sphinxhyphen{}triggers@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}drop\sphinxhyphen{}triggers}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-7}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}}}\sphinxcode{\sphinxupquote{{[}no{]}drop\sphinxhyphen{}triggers}}}
default: yes

Drop triggers on the old table.  \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}drop\sphinxhyphen{}triggers}} forces
\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}drop\sphinxhyphen{}old\sphinxhyphen{}table}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}dry\sphinxhyphen{}run@\spxentry{\sphinxhyphen{}\sphinxhyphen{}dry\sphinxhyphen{}run}}\index{\sphinxhyphen{}\sphinxhyphen{}dry\sphinxhyphen{}run@\spxentry{\sphinxhyphen{}\sphinxhyphen{}dry\sphinxhyphen{}run}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-dry-run}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dry\sphinxhyphen{}run}}\sphinxcode{\sphinxupquote{}}}
Create and alter the new table, but do not create triggers, copy data, or
replace the original table.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}execute@\spxentry{\sphinxhyphen{}\sphinxhyphen{}execute}}\index{\sphinxhyphen{}\sphinxhyphen{}execute@\spxentry{\sphinxhyphen{}\sphinxhyphen{}execute}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-execute}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}execute}}\sphinxcode{\sphinxupquote{}}}
Indicate that you have read the documentation and want to alter the table.  You
must specify this option to alter the table. If you do not, then the tool will
only perform some safety checks and exit.  This helps ensure that you have read the
documentation and understand how to use this tool.  If you have not read the
documentation, then do not specify this option.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}{[}no{]}check\sphinxhyphen{}unique\sphinxhyphen{}key\sphinxhyphen{}change@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}check\sphinxhyphen{}unique\sphinxhyphen{}key\sphinxhyphen{}change}}\index{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}check\sphinxhyphen{}unique\sphinxhyphen{}key\sphinxhyphen{}change@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}check\sphinxhyphen{}unique\sphinxhyphen{}key\sphinxhyphen{}change}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-8}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}}}\sphinxcode{\sphinxupquote{{[}no{]}check\sphinxhyphen{}unique\sphinxhyphen{}key\sphinxhyphen{}change}}}
default: yes

Avoid \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change}} to run if the specified statement for {\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-alter}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}alter}}}}} is
trying to add an unique index.
Since \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change}} uses \sphinxcode{\sphinxupquote{INSERT IGNORE}} to copy rows to the new table, if
the row being written produces a duplicate key, it will fail silently and data will
be lost.

Example:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{CREATE} \PYG{k}{DATABASE} \PYG{n}{test}\PYG{p}{;}
\PYG{n}{USE} \PYG{n}{test}\PYG{p}{;}
\PYG{k}{CREATE} \PYG{k}{TABLE} \PYG{o}{`}\PYG{n}{a}\PYG{o}{`} \PYG{p}{(}
  \PYG{o}{`}\PYG{n}{id}\PYG{o}{`} \PYG{n+nb}{int}\PYG{p}{(}\PYG{l+m+mi}{11}\PYG{p}{)} \PYG{k}{NOT} \PYG{k}{NULL}\PYG{p}{,}
  \PYG{o}{`}\PYG{n}{unique\PYGZus{}id}\PYG{o}{`} \PYG{n+nb}{varchar}\PYG{p}{(}\PYG{l+m+mi}{32}\PYG{p}{)} \PYG{k}{DEFAULT} \PYG{k}{NULL}\PYG{p}{,}
  \PYG{k}{PRIMARY} \PYG{k}{KEY} \PYG{p}{(}\PYG{o}{`}\PYG{n}{id}\PYG{o}{`}\PYG{p}{)}
\PYG{p}{)} \PYG{n}{ENGINE}\PYG{o}{=}\PYG{n}{InnoDB} \PYG{k}{DEFAULT} \PYG{n}{CHARSET}\PYG{o}{=}\PYG{n}{latin1}\PYG{p}{;}

\PYG{k}{insert} \PYG{k}{into} \PYG{n}{a} \PYG{k}{values} \PYG{p}{(}\PYG{l+m+mi}{1}\PYG{p}{,} \PYG{l+s+ss}{\PYGZdq{}a\PYGZdq{}}\PYG{p}{)}\PYG{p}{;}
\PYG{k}{insert} \PYG{k}{into} \PYG{n}{a} \PYG{k}{values} \PYG{p}{(}\PYG{l+m+mi}{2}\PYG{p}{,} \PYG{l+s+ss}{\PYGZdq{}b\PYGZdq{}}\PYG{p}{)}\PYG{p}{;}
\PYG{k}{insert} \PYG{k}{into} \PYG{n}{a} \PYG{k}{values} \PYG{p}{(}\PYG{l+m+mi}{3}\PYG{p}{,} \PYG{l+s+ss}{\PYGZdq{}\PYGZdq{}}\PYG{p}{)}\PYG{p}{;}
\PYG{k}{insert} \PYG{k}{into} \PYG{n}{a} \PYG{k}{values} \PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{,} \PYG{l+s+ss}{\PYGZdq{}\PYGZdq{}}\PYG{p}{)}\PYG{p}{;}
\PYG{k}{insert} \PYG{k}{into} \PYG{n}{a} \PYG{k}{values} \PYG{p}{(}\PYG{l+m+mi}{5}\PYG{p}{,} \PYG{k}{NULL}\PYG{p}{)}\PYG{p}{;}
\PYG{k}{insert} \PYG{k}{into} \PYG{n}{a} \PYG{k}{values} \PYG{p}{(}\PYG{l+m+mi}{6}\PYG{p}{,} \PYG{k}{NULL}\PYG{p}{)}\PYG{p}{;}
\end{sphinxVerbatim}

Using \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change}} to add an unique index on the \sphinxcode{\sphinxupquote{unique\_id}} field, will cause some rows to
be lost due to the use of \sphinxcode{\sphinxupquote{INSERT IGNORE}} to copy rows from the source table.
For this reason, \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change}} will fail if it detects that the {\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-alter}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}alter}}}}} parameter is trying
to add an unique key and it will show an example query to run to detect if there are
rows that will produce duplicated indexes.

Even if you run the query and there are no rows that will produce duplicated indexes,
take into consideration that after running this query, changes can be made to the table that can produce
duplicate rows and this data will be lost.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}force@\spxentry{\sphinxhyphen{}\sphinxhyphen{}force}}\index{\sphinxhyphen{}\sphinxhyphen{}force@\spxentry{\sphinxhyphen{}\sphinxhyphen{}force}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-force}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}force}}\sphinxcode{\sphinxupquote{}}}
This options bypasses confirmation in case of using alter\sphinxhyphen{}foreign\sphinxhyphen{}keys\sphinxhyphen{}method = none , which might break foreign key constraints.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}force\sphinxhyphen{}concat\sphinxhyphen{}enums@\spxentry{\sphinxhyphen{}\sphinxhyphen{}force\sphinxhyphen{}concat\sphinxhyphen{}enums}}\index{\sphinxhyphen{}\sphinxhyphen{}force\sphinxhyphen{}concat\sphinxhyphen{}enums@\spxentry{\sphinxhyphen{}\sphinxhyphen{}force\sphinxhyphen{}concat\sphinxhyphen{}enums}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-force-concat-enums}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}force\sphinxhyphen{}concat\sphinxhyphen{}enums}}\sphinxcode{\sphinxupquote{}}}
The NibbleIterator in \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change}} can detect indexes having ENUM fields and
if the items it has are sorted or not. According to documentation at
\sphinxurl{https://dev.mysql.com/doc/refman/5.7/en/enum.html}:

ENUM values are sorted based on their index numbers, which depend on the order in
which the enumeration members were listed in the column specification.
For example, ‘b’ sorts before ‘a’ for ENUM(‘b’, ‘a’).
The empty string sorts before nonempty strings, and NULL values sort before all other
enumeration values.

To prevent unexpected results when using the ORDER BY clause on an ENUM column,
use one of these techniques:
\sphinxhyphen{} Specify the ENUM list in alphabetic order.
\sphinxhyphen{} Make sure that the column is sorted lexically rather than by index number by coding
ORDER BY CAST(col AS CHAR) or ORDER BY CONCAT(col).

The NibbleIterator in \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change}} uses CONCAT(col) but, doing that, adds overhead
since MariaDB cannot use the column directly and has to calculate the result of CONCAT
for every row.
To make this scenario vissible to the user, if there are indexes having ENUM fields
with usorted items, it is necessary to specify the \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}force\sphinxhyphen{}concat\sphinxhyphen{}enums}} parameter.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}help@\spxentry{\sphinxhyphen{}\sphinxhyphen{}help}}\index{\sphinxhyphen{}\sphinxhyphen{}help@\spxentry{\sphinxhyphen{}\sphinxhyphen{}help}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-help}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}help}}\sphinxcode{\sphinxupquote{}}}
Show help and exit.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}host@\spxentry{\sphinxhyphen{}\sphinxhyphen{}host}}\index{\sphinxhyphen{}\sphinxhyphen{}host@\spxentry{\sphinxhyphen{}\sphinxhyphen{}host}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-host}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}host}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}h; type: string

Connect to host.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}flow\sphinxhyphen{}ctl@\spxentry{\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}flow\sphinxhyphen{}ctl}}\index{\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}flow\sphinxhyphen{}ctl@\spxentry{\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}flow\sphinxhyphen{}ctl}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-max-flow-ctl}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}flow\sphinxhyphen{}ctl}}\sphinxcode{\sphinxupquote{}}}
type: float

Somewhat similar to \textendash{}max\sphinxhyphen{}lag but for PXC clusters.
Check average time cluster spent pausing for Flow Control and make tool pause if
it goes over the percentage indicated in the option.
A value of 0 would make the tool pause when \sphinxstyleemphasis{any} Flow Control activity is
detected.
Default is no Flow Control checking.
This option is available for PXC versions 5.6 or higher.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}lag@\spxentry{\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}lag}}\index{\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}lag@\spxentry{\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}lag}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-max-lag}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}lag}}\sphinxcode{\sphinxupquote{}}}
type: time; default: 1s

Pause the data copy until all replicas’ lag is less than this value.  After each
data\sphinxhyphen{}copy query (each chunk), the tool looks at the replication lag of
all replicas to which it connects, using Seconds\_Behind\_Master. If any replica
is lagging more than the value of this option, then the tool will sleep
for {\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-check-interval}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}check\sphinxhyphen{}interval}}}}} seconds, then check all replicas again.  If you
specify {\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-check-slave-lag}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}check\sphinxhyphen{}slave\sphinxhyphen{}lag}}}}}, then the tool only examines that server for
lag, not all servers.  If you want to control exactly which servers the tool
monitors, use the DSN value to {\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-recursion-method}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}recursion\sphinxhyphen{}method}}}}}.

The tool waits forever for replicas to stop lagging.  If any replica is
stopped, the tool waits forever until the replica is started.  The data copy
continues when all replicas are running and not lagging too much.

The tool prints progress reports while waiting.  If a replica is stopped, it
prints a progress report immediately, then again at every progress report
interval.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}load@\spxentry{\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}load}}\index{\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}load@\spxentry{\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}load}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-max-load}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}load}}\sphinxcode{\sphinxupquote{}}}
type: Array; default: Threads\_running=25

Examine SHOW GLOBAL STATUS after every chunk, and pause if any status variables
are higher than their thresholds.  The option accepts a comma\sphinxhyphen{}separated list of
MariaDB status variables.  An optional \sphinxcode{\sphinxupquote{=MAX\_VALUE}} (or \sphinxcode{\sphinxupquote{:MAX\_VALUE}}) can follow
each variable.  If not given, the tool determines a threshold by examining the
current value and increasing it by 20\%.

For example, if you want the tool to pause when Threads\_connected gets too high,
you can specify “Threads\_connected”, and the tool will check the current value
when it starts working and add 20\% to that value.  If the current value is 100,
then the tool will pause when Threads\_connected exceeds 120, and resume working
when it is below 120 again.  If you want to specify an explicit threshold, such
as 110, you can use either “Threads\_connected:110” or “Threads\_connected=110”.

The purpose of this option is to prevent the tool from adding too much load to
the server. If the data\sphinxhyphen{}copy queries are intrusive, or if they cause lock waits,
then other queries on the server will tend to block and queue. This will
typically cause Threads\_running to increase, and the tool can detect that by
running SHOW GLOBAL STATUS immediately after each query finishes.  If you
specify a threshold for this variable, then you can instruct the tool to wait
until queries are running normally again.  This will not prevent queueing,
however; it will only give the server a chance to recover from the queueing.  If
you notice queueing, it is best to decrease the chunk time.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}preserve\sphinxhyphen{}triggers@\spxentry{\sphinxhyphen{}\sphinxhyphen{}preserve\sphinxhyphen{}triggers}}\index{\sphinxhyphen{}\sphinxhyphen{}preserve\sphinxhyphen{}triggers@\spxentry{\sphinxhyphen{}\sphinxhyphen{}preserve\sphinxhyphen{}triggers}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-preserve-triggers}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}preserve\sphinxhyphen{}triggers}}\sphinxcode{\sphinxupquote{}}}
Preserves old triggers when specified.
As of MariaDB 10.2.3, it is possible to define multiple triggers for a given
table that have the same trigger event and action time. This allows us to
add the triggers needed for \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change}} even if the table
already has its own triggers.
If this option is enabled, \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change}} will try to copy all the
existing triggers to the new table BEFORE start copying rows from the original
table to ensure the old triggers can be applied after altering the table.

Example.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{CREATE} \PYG{k}{TABLE} \PYG{n}{test}\PYG{p}{.}\PYG{n}{t1} \PYG{p}{(}
     \PYG{n}{id} \PYG{n+nb}{INT} \PYG{k}{NOT} \PYG{k}{NULL} \PYG{n}{AUTO\PYGZus{}INCREMENT}\PYG{p}{,}
     \PYG{n}{f1} \PYG{n+nb}{INT}\PYG{p}{,}
     \PYG{n}{f2} \PYG{n+nb}{VARCHAR}\PYG{p}{(}\PYG{l+m+mi}{32}\PYG{p}{)}\PYG{p}{,}
     \PYG{k}{PRIMARY} \PYG{k}{KEY} \PYG{p}{(}\PYG{n}{id}\PYG{p}{)}
\PYG{p}{)}\PYG{p}{;}

\PYG{k}{CREATE} \PYG{k}{TABLE} \PYG{n}{test}\PYG{p}{.}\PYG{n}{log} \PYG{p}{(}
   \PYG{n}{ts}  \PYG{k}{TIMESTAMP}\PYG{p}{,}
   \PYG{n}{msg} \PYG{n+nb}{VARCHAR}\PYG{p}{(}\PYG{l+m+mi}{255}\PYG{p}{)}
\PYG{p}{)}\PYG{p}{;}

\PYG{k}{CREATE} \PYG{k}{TRIGGER} \PYG{n}{test}\PYG{p}{.}\PYG{n}{after\PYGZus{}update}
 \PYG{k}{AFTER}
   \PYG{k}{UPDATE} \PYG{k}{ON} \PYG{n}{test}\PYG{p}{.}\PYG{n}{t1}
   \PYG{k}{FOR} \PYG{k}{EACH} \PYG{k}{ROW}
     \PYG{k}{INSERT} \PYG{k}{INTO} \PYG{n}{test}\PYG{p}{.}\PYG{n}{log} \PYG{k}{VALUES} \PYG{p}{(}\PYG{n}{NOW}\PYG{p}{(}\PYG{p}{)}\PYG{p}{,} \PYG{n}{CONCAT}\PYG{p}{(}\PYG{l+s+ss}{\PYGZdq{}updated row row with id \PYGZdq{}}\PYG{p}{,} \PYG{k}{OLD}\PYG{p}{.}\PYG{n}{id}\PYG{p}{,} \PYG{l+s+ss}{\PYGZdq{} old f1:\PYGZdq{}}\PYG{p}{,} \PYG{k}{OLD}\PYG{p}{.}\PYG{n}{f1}\PYG{p}{,} \PYG{l+s+ss}{\PYGZdq{} new f1: \PYGZdq{}}\PYG{p}{,} \PYG{k}{NEW}\PYG{p}{.}\PYG{n}{f1} \PYG{p}{)}\PYG{p}{)}\PYG{p}{;}
\end{sphinxVerbatim}

For this table and triggers combination, it is not possible to use \textendash{}preserve\sphinxhyphen{}triggers
with an \textendash{}alter like this: \sphinxcode{\sphinxupquote{"DROP COLUMN f1"}} since the trigger references the column
being dropped and at would make the trigger to fail.

After testing the triggers will work on the new table, the triggers are
dropped from the new table until all rows have been copied and then they are
re\sphinxhyphen{}applied.

\textendash{}preserve\sphinxhyphen{}triggers cannot be used with these other parameters, \textendash{}no\sphinxhyphen{}drop\sphinxhyphen{}triggers,
\textendash{}no\sphinxhyphen{}drop\sphinxhyphen{}old\sphinxhyphen{}table and \textendash{}no\sphinxhyphen{}swap\sphinxhyphen{}tables since \textendash{}preserve\sphinxhyphen{}triggers implies that
the old triggers should be deleted and recreated in the new table.
Since it is not possible to have more than one trigger with the same name, old triggers
must be deleted in order to be able to recreate them into the new table.

Using \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}preserve\sphinxhyphen{}triggers}} with \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}swap\sphinxhyphen{}tables}} will cause triggers to remain
defined for the original table.
Please read the documentation for \textendash{}swap\sphinxhyphen{}tables

If both \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}swap\sphinxhyphen{}tables}} and \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}drop\sphinxhyphen{}new\sphinxhyphen{}table}} is set, the trigger will remain
on the original table and will be duplicated on the new table
(the trigger will have a random suffix as no trigger names are unique).

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}new\sphinxhyphen{}table\sphinxhyphen{}name@\spxentry{\sphinxhyphen{}\sphinxhyphen{}new\sphinxhyphen{}table\sphinxhyphen{}name}}\index{\sphinxhyphen{}\sphinxhyphen{}new\sphinxhyphen{}table\sphinxhyphen{}name@\spxentry{\sphinxhyphen{}\sphinxhyphen{}new\sphinxhyphen{}table\sphinxhyphen{}name}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-new-table-name}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}new\sphinxhyphen{}table\sphinxhyphen{}name}}\sphinxcode{\sphinxupquote{}}}
type: string; default: \%T\_new

New table name before it is swapped.  \sphinxcode{\sphinxupquote{\%T}} is replaced with the original
table name.  When the default is used, the tool prefixes the name with up
to 10 \sphinxcode{\sphinxupquote{\_}} (underscore) to find a unique table name.  If a table name is
specified, the tool does not prefix it with \sphinxcode{\sphinxupquote{\_}}, so the table must not
exist.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}null\sphinxhyphen{}to\sphinxhyphen{}not\sphinxhyphen{}null@\spxentry{\sphinxhyphen{}\sphinxhyphen{}null\sphinxhyphen{}to\sphinxhyphen{}not\sphinxhyphen{}null}}\index{\sphinxhyphen{}\sphinxhyphen{}null\sphinxhyphen{}to\sphinxhyphen{}not\sphinxhyphen{}null@\spxentry{\sphinxhyphen{}\sphinxhyphen{}null\sphinxhyphen{}to\sphinxhyphen{}not\sphinxhyphen{}null}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-null-to-not-null}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}null\sphinxhyphen{}to\sphinxhyphen{}not\sphinxhyphen{}null}}\sphinxcode{\sphinxupquote{}}}
Allows MODIFYing a column that allows NULL values to one that doesn’t allow
them. The rows which contain NULL values will be converted to the defined
default value. If no explicit DEFAULT value is given MariaDB will assign a default
value based on datatype, e.g. 0 for number datatypes, ‘’ for string datatypes.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}only\sphinxhyphen{}same\sphinxhyphen{}schema\sphinxhyphen{}fks@\spxentry{\sphinxhyphen{}\sphinxhyphen{}only\sphinxhyphen{}same\sphinxhyphen{}schema\sphinxhyphen{}fks}}\index{\sphinxhyphen{}\sphinxhyphen{}only\sphinxhyphen{}same\sphinxhyphen{}schema\sphinxhyphen{}fks@\spxentry{\sphinxhyphen{}\sphinxhyphen{}only\sphinxhyphen{}same\sphinxhyphen{}schema\sphinxhyphen{}fks}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-only-same-schema-fks}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}only\sphinxhyphen{}same\sphinxhyphen{}schema\sphinxhyphen{}fks}}\sphinxcode{\sphinxupquote{}}}
Check foreigns keys only on tables on the same schema than the original table.
This option is dangerous since if you have FKs refenrencing tables in other
schemas, they won’t be detected.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}password@\spxentry{\sphinxhyphen{}\sphinxhyphen{}password}}\index{\sphinxhyphen{}\sphinxhyphen{}password@\spxentry{\sphinxhyphen{}\sphinxhyphen{}password}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-password}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}password}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}p; type: string

Password to use when connecting.
If password contains commas they must be escaped with a backslash: “exam,ple”

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}pause\sphinxhyphen{}file@\spxentry{\sphinxhyphen{}\sphinxhyphen{}pause\sphinxhyphen{}file}}\index{\sphinxhyphen{}\sphinxhyphen{}pause\sphinxhyphen{}file@\spxentry{\sphinxhyphen{}\sphinxhyphen{}pause\sphinxhyphen{}file}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-pause-file}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}pause\sphinxhyphen{}file}}\sphinxcode{\sphinxupquote{}}}
type: string

Execution will be paused while the file specified by this param exists.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}pid@\spxentry{\sphinxhyphen{}\sphinxhyphen{}pid}}\index{\sphinxhyphen{}\sphinxhyphen{}pid@\spxentry{\sphinxhyphen{}\sphinxhyphen{}pid}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-pid}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}pid}}\sphinxcode{\sphinxupquote{}}}
type: string

Create the given PID file.  The tool won’t start if the PID file already
exists and the PID it contains is different than the current PID.  However,
if the PID file exists and the PID it contains is no longer running, the
tool will overwrite the PID file with the current PID.  The PID file is
removed automatically when the tool exits.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}plugin@\spxentry{\sphinxhyphen{}\sphinxhyphen{}plugin}}\index{\sphinxhyphen{}\sphinxhyphen{}plugin@\spxentry{\sphinxhyphen{}\sphinxhyphen{}plugin}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-plugin}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}plugin}}\sphinxcode{\sphinxupquote{}}}
type: string

Perl module file that defines a \sphinxcode{\sphinxupquote{pt\_online\_schema\_change\_plugin}} class.
A plugin allows you to write a Perl module that can hook into many parts
of \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change}}.  This requires a good knowledge of Perl and
MariaDB tools conventions, which are beyond this scope of this
documentation.  Please contact MariaDB if you have questions or need help.

See “PLUGIN” for more information.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}port@\spxentry{\sphinxhyphen{}\sphinxhyphen{}port}}\index{\sphinxhyphen{}\sphinxhyphen{}port@\spxentry{\sphinxhyphen{}\sphinxhyphen{}port}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-port}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}port}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}P; type: int

Port number to use for connection.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}print@\spxentry{\sphinxhyphen{}\sphinxhyphen{}print}}\index{\sphinxhyphen{}\sphinxhyphen{}print@\spxentry{\sphinxhyphen{}\sphinxhyphen{}print}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-print}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}print}}\sphinxcode{\sphinxupquote{}}}
Print SQL statements to STDOUT.  Specifying this option allows you to see most
of the statements that the tool executes. You can use this option with
{\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-dry-run}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dry\sphinxhyphen{}run}}}}}, for example.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}progress@\spxentry{\sphinxhyphen{}\sphinxhyphen{}progress}}\index{\sphinxhyphen{}\sphinxhyphen{}progress@\spxentry{\sphinxhyphen{}\sphinxhyphen{}progress}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-progress}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}progress}}\sphinxcode{\sphinxupquote{}}}
type: array; default: time,30

Print progress reports to STDERR while copying rows.  The value is a
comma\sphinxhyphen{}separated list with two parts.  The first part can be percentage, time, or
iterations; the second part specifies how often an update should be printed, in
percentage, seconds, or number of iterations.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}quiet@\spxentry{\sphinxhyphen{}\sphinxhyphen{}quiet}}\index{\sphinxhyphen{}\sphinxhyphen{}quiet@\spxentry{\sphinxhyphen{}\sphinxhyphen{}quiet}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-quiet}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}quiet}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}q

Do not print messages to STDOUT (disables {\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-progress}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}progress}}}}}).
Errors and warnings are still printed to STDERR.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}recurse@\spxentry{\sphinxhyphen{}\sphinxhyphen{}recurse}}\index{\sphinxhyphen{}\sphinxhyphen{}recurse@\spxentry{\sphinxhyphen{}\sphinxhyphen{}recurse}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-recurse}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}recurse}}\sphinxcode{\sphinxupquote{}}}
type: int

Number of levels to recurse in the hierarchy when discovering replicas.
Default is infinite.  See also {\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-recursion-method}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}recursion\sphinxhyphen{}method}}}}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}recursion\sphinxhyphen{}method@\spxentry{\sphinxhyphen{}\sphinxhyphen{}recursion\sphinxhyphen{}method}}\index{\sphinxhyphen{}\sphinxhyphen{}recursion\sphinxhyphen{}method@\spxentry{\sphinxhyphen{}\sphinxhyphen{}recursion\sphinxhyphen{}method}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-recursion-method}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}recursion\sphinxhyphen{}method}}\sphinxcode{\sphinxupquote{}}}
type: array; default: processlist,hosts

Preferred recursion method for discovering replicas.  Possible methods are:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
METHOD       \PYG{n+nv}{USES}
\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}  \PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}
processlist  SHOW PROCESSLIST
hosts        SHOW SLAVE HOSTS
\PYG{n+nv}{dsn}\PYG{o}{=}DSN      DSNs from a table
none         Do not find slaves
\end{sphinxVerbatim}

The processlist method is the default, because SHOW SLAVE HOSTS is not
reliable.  However, the hosts method can work better if the server uses a
non\sphinxhyphen{}standard port (not 3306).  The tool usually does the right thing and
finds all replicas, but you may give a preferred method and it will be used
first.

The hosts method requires replicas to be configured with report\_host,
report\_port, etc.

The dsn method is special: it specifies a table from which other DSN strings
are read.  The specified DSN must specify a D and t, or a database\sphinxhyphen{}qualified
t.  The DSN table should have the following structure:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{CREATE} \PYG{k}{TABLE} \PYG{o}{`}\PYG{n}{dsns}\PYG{o}{`} \PYG{p}{(}
  \PYG{o}{`}\PYG{n}{id}\PYG{o}{`} \PYG{n+nb}{int}\PYG{p}{(}\PYG{l+m+mi}{11}\PYG{p}{)} \PYG{k}{NOT} \PYG{k}{NULL} \PYG{n}{AUTO\PYGZus{}INCREMENT}\PYG{p}{,}
  \PYG{o}{`}\PYG{n}{parent\PYGZus{}id}\PYG{o}{`} \PYG{n+nb}{int}\PYG{p}{(}\PYG{l+m+mi}{11}\PYG{p}{)} \PYG{k}{DEFAULT} \PYG{k}{NULL}\PYG{p}{,}
  \PYG{o}{`}\PYG{n}{dsn}\PYG{o}{`} \PYG{n+nb}{varchar}\PYG{p}{(}\PYG{l+m+mi}{255}\PYG{p}{)} \PYG{k}{NOT} \PYG{k}{NULL}\PYG{p}{,}
  \PYG{k}{PRIMARY} \PYG{k}{KEY} \PYG{p}{(}\PYG{o}{`}\PYG{n}{id}\PYG{o}{`}\PYG{p}{)}
\PYG{p}{)}\PYG{p}{;}
\end{sphinxVerbatim}

To make the tool monitor only the hosts 10.10.1.16 and 10.10.1.17 for
replication lag, insert the values \sphinxcode{\sphinxupquote{h=10.10.1.16}} and \sphinxcode{\sphinxupquote{h=10.10.1.17}} into the
table. Currently, the DSNs are ordered by id, but id and parent\_id are otherwise
ignored.

You can change the list of hosts while OSC is executing:
if you change the contents of the DSN table, OSC will pick it up very soon.

\end{fulllineitems}


\textendash{}reverse\sphinxhyphen{}triggers Copy the triggers added during the copy in reverse order. Commands in the new table will be
reflected in the old table. You can use this as a safety feature, so that the old
table continues to receive updates. This option requires \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}drop\sphinxhyphen{}old\sphinxhyphen{}table}}.
\begin{quote}

Warning! This option creates reverse triggers on the new table before it starts copying.
After new table is renamed to its original name triggers will continue working. But because the
name change metadata version in the table cache will also change you may start receiving
“Prepared statement needs to be re\sphinxhyphen{}prepared” errors. The workaround for this is to re\sphinxhyphen{}prepare statements.
If you do not use server\sphinxhyphen{}side prepared statements your application should not be affected.
\end{quote}
\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}skip\sphinxhyphen{}check\sphinxhyphen{}slave\sphinxhyphen{}lag@\spxentry{\sphinxhyphen{}\sphinxhyphen{}skip\sphinxhyphen{}check\sphinxhyphen{}slave\sphinxhyphen{}lag}}\index{\sphinxhyphen{}\sphinxhyphen{}skip\sphinxhyphen{}check\sphinxhyphen{}slave\sphinxhyphen{}lag@\spxentry{\sphinxhyphen{}\sphinxhyphen{}skip\sphinxhyphen{}check\sphinxhyphen{}slave\sphinxhyphen{}lag}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-skip-check-slave-lag}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}skip\sphinxhyphen{}check\sphinxhyphen{}slave\sphinxhyphen{}lag}}\sphinxcode{\sphinxupquote{}}}
type: DSN; repeatable: yes

DSN to skip when checking slave lag. It can be used multiple times.
Example: \textendash{}skip\sphinxhyphen{}check\sphinxhyphen{}slave\sphinxhyphen{}lag h=127.0.0.1,P=12345 \textendash{}skip\sphinxhyphen{}check\sphinxhyphen{}slave\sphinxhyphen{}lag h=127.0.0.1,P=12346
Plase take into consideration that even when for the MariaDB driver h=127.1 is equal to h=127.0.0.1,
for this parameter you need to specify the full IP address.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}user@\spxentry{\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}user}}\index{\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}user@\spxentry{\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}user}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-slave-user}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}user}}\sphinxcode{\sphinxupquote{}}}
type: string

Sets the user to be used to connect to the slaves.
This parameter allows you to have a different user with less privileges on the
slaves but that user must exist on all slaves.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}password@\spxentry{\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}password}}\index{\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}password@\spxentry{\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}password}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-slave-password}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}slave\sphinxhyphen{}password}}\sphinxcode{\sphinxupquote{}}}
type: string

Sets the password to be used to connect to the slaves.
It can be used with \textendash{}slave\sphinxhyphen{}user and the password for the user must be the same
on all slaves.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}set\sphinxhyphen{}vars@\spxentry{\sphinxhyphen{}\sphinxhyphen{}set\sphinxhyphen{}vars}}\index{\sphinxhyphen{}\sphinxhyphen{}set\sphinxhyphen{}vars@\spxentry{\sphinxhyphen{}\sphinxhyphen{}set\sphinxhyphen{}vars}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-set-vars}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}set\sphinxhyphen{}vars}}\sphinxcode{\sphinxupquote{}}}
type: Array

Set the MariaDB variables in this comma\sphinxhyphen{}separated list of \sphinxcode{\sphinxupquote{variable=value}} pairs.

By default, the tool sets:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nv}{wait\PYGZus{}timeout}\PYG{o}{=}\PYG{l+m}{10000}
\PYG{n+nv}{innodb\PYGZus{}lock\PYGZus{}wait\PYGZus{}timeout}\PYG{o}{=}\PYG{l+m}{1}
\PYG{n+nv}{lock\PYGZus{}wait\PYGZus{}timeout}\PYG{o}{=}\PYG{l+m}{60}
\end{sphinxVerbatim}

Variables specified on the command line override these defaults.  For
example, specifying \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}set\sphinxhyphen{}vars wait\_timeout=500}} overrides the default
value of \sphinxcode{\sphinxupquote{10000}}.

The tool prints a warning and continues if a variable cannot be set.

Note that setting the \sphinxcode{\sphinxupquote{sql\_mode}} variable requires some tricky escapes
to be able to parse the quotes and commas.

Example:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZhy{}\PYGZhy{}set\PYGZhy{}vars \PYG{n+nv}{sql\PYGZus{}mode}\PYG{o}{=}\PYG{l+s+se}{\PYGZbs{}\PYGZsq{}}STRICT\PYGZus{}ALL\PYGZus{}TABLES\PYG{l+s+se}{\PYGZbs{}\PYGZbs{}},ALLOW\PYGZus{}INVALID\PYGZus{}DATES\PYG{l+s+se}{\PYGZbs{}\PYGZsq{}}
\end{sphinxVerbatim}

Note the single backslash for the quotes and double backslash for the comma.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}sleep@\spxentry{\sphinxhyphen{}\sphinxhyphen{}sleep}}\index{\sphinxhyphen{}\sphinxhyphen{}sleep@\spxentry{\sphinxhyphen{}\sphinxhyphen{}sleep}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-sleep}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}sleep}}\sphinxcode{\sphinxupquote{}}}
type: float; default: 0

How long to sleep (in seconds) after copying each chunk. This option is useful
when throttling by {\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-max-lag}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}lag}}}}} and {\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-max-load}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}max\sphinxhyphen{}load}}}}} are not possible.
A small, sub\sphinxhyphen{}second value should be used, like 0.1, else the tool could take
a very long time to copy large tables.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}socket@\spxentry{\sphinxhyphen{}\sphinxhyphen{}socket}}\index{\sphinxhyphen{}\sphinxhyphen{}socket@\spxentry{\sphinxhyphen{}\sphinxhyphen{}socket}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-socket}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}socket}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}S; type: string

Socket file to use for connection.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}statistics@\spxentry{\sphinxhyphen{}\sphinxhyphen{}statistics}}\index{\sphinxhyphen{}\sphinxhyphen{}statistics@\spxentry{\sphinxhyphen{}\sphinxhyphen{}statistics}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-statistics}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}statistics}}\sphinxcode{\sphinxupquote{}}}
Print statistics about internal counters.  This is useful to see how
many warnings were suppressed compared to the number of INSERT.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}{[}no{]}swap\sphinxhyphen{}tables@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}swap\sphinxhyphen{}tables}}\index{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}swap\sphinxhyphen{}tables@\spxentry{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}swap\sphinxhyphen{}tables}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-9}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}}}\sphinxcode{\sphinxupquote{{[}no{]}swap\sphinxhyphen{}tables}}}
default: yes

Swap the original table and the new, altered table.  This step completes the
online schema change process by making the table with the new schema take the
place of the original table.  The original table becomes the “old table,” and
the tool drops it unless you disable \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}{[}no{]}drop\sphinxhyphen{}old\sphinxhyphen{}table}}.

Using \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}swap\sphinxhyphen{}tables}} will run the whole process, it will create the new
table, it will copy all rows but at the end it will drop the new table. It is
intended to run a more realistic \textendash{}dry\sphinxhyphen{}run.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}tries@\spxentry{\sphinxhyphen{}\sphinxhyphen{}tries}}\index{\sphinxhyphen{}\sphinxhyphen{}tries@\spxentry{\sphinxhyphen{}\sphinxhyphen{}tries}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-tries}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}tries}}\sphinxcode{\sphinxupquote{}}}
type: array

How many times to try critical operations.  If certain operations fail due
to non\sphinxhyphen{}fatal, recoverable errors, the tool waits and tries the operation
again.  These are the operations that are retried, with their default number
of tries and wait time between tries (in seconds):

\begin{sphinxVerbatim}[commandchars=\\\{\}]
OPERATION            TRIES   \PYG{n+nv}{WAIT}
\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}  \PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}   \PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}
create\PYGZus{}triggers         \PYG{l+m}{10}      \PYG{l+m}{1}
drop\PYGZus{}triggers           \PYG{l+m}{10}      \PYG{l+m}{1}
copy\PYGZus{}rows               \PYG{l+m}{10}   \PYG{l+m}{0}.25
swap\PYGZus{}tables             \PYG{l+m}{10}      \PYG{l+m}{1}
update\PYGZus{}foreign\PYGZus{}keys     \PYG{l+m}{10}      \PYG{l+m}{1}
analyze\PYGZus{}table           \PYG{l+m}{10}      \PYG{l+m}{1}
\end{sphinxVerbatim}

To change the defaults, specify the new values like:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZhy{}\PYGZhy{}tries create\PYGZus{}triggers:5:0.5,drop\PYGZus{}triggers:5:0.5
\end{sphinxVerbatim}

That makes the tool try \sphinxcode{\sphinxupquote{create\_triggers}} and \sphinxcode{\sphinxupquote{drop\_triggers}} 5 times
with a 0.5 second wait between tries.  So the format is:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
operation:tries:wait\PYG{o}{[},operation:tries:wait\PYG{o}{]}
\end{sphinxVerbatim}

All three values must be specified.

Note that most operations are affected only in MariaDB 5.5 and newer by
\sphinxcode{\sphinxupquote{lock\_wait\_timeout}} (see {\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-set-vars}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}set\sphinxhyphen{}vars}}}}}) because of metadata locks.
The \sphinxcode{\sphinxupquote{copy\_rows}} operation is affected in any version of MariaDB by
\sphinxcode{\sphinxupquote{innodb\_lock\_wait\_timeout}}.

For creating and dropping triggers, the number of tries applies to each
\sphinxcode{\sphinxupquote{CREATE TRIGGER}} and \sphinxcode{\sphinxupquote{DROP TRIGGER}} statement for each trigger.
For copying rows, the number of tries applies to each chunk, not the
entire table.  For swapping tables, the number of tries usually applies
once because there is usually only one \sphinxcode{\sphinxupquote{RENAME TABLE}} statement.
For rebuilding foreign key constraints, the number of tries applies to
each statement (\sphinxcode{\sphinxupquote{ALTER}} statements for the \sphinxcode{\sphinxupquote{rebuild\_constraints}}
{\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-alter-foreign-keys-method}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}alter\sphinxhyphen{}foreign\sphinxhyphen{}keys\sphinxhyphen{}method}}}}}; other statements for the \sphinxcode{\sphinxupquote{drop\_swap}}
method).

The tool retries each operation if these errors occur:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
Lock \PYG{n+nb}{wait} timeout \PYG{o}{(}innodb\PYGZus{}lock\PYGZus{}wait\PYGZus{}timeout and lock\PYGZus{}wait\PYGZus{}timeout\PYG{o}{)}
Deadlock found
Query is killed \PYG{o}{(}KILL QUERY \PYGZlt{}thread\PYGZus{}id\PYGZgt{}\PYG{o}{)}
Connection is killed \PYG{o}{(}KILL CONNECTION \PYGZlt{}thread\PYGZus{}id\PYGZgt{}\PYG{o}{)}
Lost connection to MariaDB
\end{sphinxVerbatim}

In the case of lost and killed connections, the tool will automatically
reconnect.

Failures and retries are recorded in the {\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-statistics}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}statistics}}}}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}user@\spxentry{\sphinxhyphen{}\sphinxhyphen{}user}}\index{\sphinxhyphen{}\sphinxhyphen{}user@\spxentry{\sphinxhyphen{}\sphinxhyphen{}user}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-user}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}user}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}u; type: string

User for login if not current user.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}!\sphinxhyphen{}\sphinxhyphen{}version@\spxentry{\sphinxhyphen{}\sphinxhyphen{}version}}\index{\sphinxhyphen{}\sphinxhyphen{}version@\spxentry{\sphinxhyphen{}\sphinxhyphen{}version}!mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option@\spxentry{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-version}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}version}}\sphinxcode{\sphinxupquote{}}}
Show version and exit.

\end{fulllineitems}



\section{PLUGIN}
\label{\detokenize{mariadb-schema-change:plugin}}
The file specified by {\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-plugin}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}plugin}}}}} must define a class (i.e. a package)
called \sphinxcode{\sphinxupquote{pt\_online\_schema\_change\_plugin}} with a \sphinxcode{\sphinxupquote{new()}} subroutine.
The tool will create an instance of this class and call any hooks that
it defines.  No hooks are required, but a plugin isn’t very useful without
them.

These hooks, in this order, are called if defined:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
init
before\PYGZus{}create\PYGZus{}new\PYGZus{}table
after\PYGZus{}create\PYGZus{}new\PYGZus{}table
before\PYGZus{}alter\PYGZus{}new\PYGZus{}table
after\PYGZus{}alter\PYGZus{}new\PYGZus{}table
before\PYGZus{}create\PYGZus{}triggers
after\PYGZus{}create\PYGZus{}triggers
before\PYGZus{}copy\PYGZus{}rows
after\PYGZus{}copy\PYGZus{}rows
before\PYGZus{}swap\PYGZus{}tables
after\PYGZus{}swap\PYGZus{}tables
before\PYGZus{}update\PYGZus{}foreign\PYGZus{}keys
after\PYGZus{}update\PYGZus{}foreign\PYGZus{}keys
before\PYGZus{}drop\PYGZus{}old\PYGZus{}table
after\PYGZus{}drop\PYGZus{}old\PYGZus{}table
before\PYGZus{}drop\PYGZus{}triggers
before\PYGZus{}exit
get\PYGZus{}slave\PYGZus{}lag
\end{sphinxVerbatim}

Each hook is passed different arguments.  To see which arguments are passed
to a hook, search for the hook’s name in the tool’s source code, like:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} \PYGZhy{}\PYGZhy{}plugin hook}
\PYG{k}{if} \PYG{o}{(} \PYG{n+nv}{\PYGZdl{}plugin} \PYG{o}{\PYGZam{}\PYGZam{}} \PYG{n+nv}{\PYGZdl{}plugin}\PYGZhy{}\PYGZgt{}can\PYG{o}{(}\PYG{l+s+s1}{\PYGZsq{}init\PYGZsq{}}\PYG{o}{)} \PYG{o}{)} \PYG{o}{\PYGZob{}}
   \PYG{n+nv}{\PYGZdl{}plugin}\PYGZhy{}\PYGZgt{}init\PYG{o}{(}
      \PYG{n+nv}{orig\PYGZus{}tbl}       \PYG{o}{=}\PYGZgt{} \PYG{n+nv}{\PYGZdl{}orig\PYGZus{}tbl},
      \PYG{n+nv}{child\PYGZus{}tables}   \PYG{o}{=}\PYGZgt{} \PYG{n+nv}{\PYGZdl{}child\PYGZus{}tables},
      \PYG{n+nv}{renamed\PYGZus{}cols}   \PYG{o}{=}\PYGZgt{} \PYG{n+nv}{\PYGZdl{}renamed\PYGZus{}cols},
      \PYG{n+nv}{slaves}         \PYG{o}{=}\PYGZgt{} \PYG{n+nv}{\PYGZdl{}slaves},
      \PYG{n+nv}{slave\PYGZus{}lag\PYGZus{}cxns} \PYG{o}{=}\PYGZgt{} \PYG{n+nv}{\PYGZdl{}slave\PYGZus{}lag\PYGZus{}cxns},
   \PYG{o}{)}\PYG{p}{;}
\PYG{o}{\PYGZcb{}}
\end{sphinxVerbatim}

The comment \sphinxcode{\sphinxupquote{\# \sphinxhyphen{}\sphinxhyphen{}plugin hook}} precedes every hook call.

Here’s a plugin file template for all hooks:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
 package pt\PYGZus{}online\PYGZus{}schema\PYGZus{}change\PYGZus{}plugin\PYG{p}{;}

 use strict\PYG{p}{;}

 sub new \PYG{o}{\PYGZob{}}
    my \PYG{o}{(}\PYG{n+nv}{\PYGZdl{}class}, \PYGZpc{}args\PYG{o}{)} \PYG{o}{=} @\PYGZus{}\PYG{p}{;}
    my \PYG{n+nv}{\PYGZdl{}self} \PYG{o}{=} \PYG{o}{\PYGZob{}} \PYGZpc{}args \PYG{o}{\PYGZcb{}}\PYG{p}{;}
    \PYG{k}{return} bless \PYG{n+nv}{\PYGZdl{}self}, \PYG{n+nv}{\PYGZdl{}class}\PYG{p}{;}
 \PYG{o}{\PYGZcb{}}

 sub init \PYG{o}{\PYGZob{}}
    my \PYG{o}{(}\PYG{n+nv}{\PYGZdl{}self}, \PYGZpc{}args\PYG{o}{)} \PYG{o}{=} @\PYGZus{}\PYG{p}{;}
    print \PYG{l+s+s2}{\PYGZdq{}PLUGIN init\PYGZbs{}n\PYGZdq{}}\PYG{p}{;}
 \PYG{o}{\PYGZcb{}}

 sub before\PYGZus{}create\PYGZus{}new\PYGZus{}table \PYG{o}{\PYGZob{}}
    my \PYG{o}{(}\PYG{n+nv}{\PYGZdl{}self}, \PYGZpc{}args\PYG{o}{)} \PYG{o}{=} @\PYGZus{}\PYG{p}{;}
    print \PYG{l+s+s2}{\PYGZdq{}PLUGIN before\PYGZus{}create\PYGZus{}new\PYGZus{}table\PYGZbs{}n\PYGZdq{}}\PYG{p}{;}
 \PYG{o}{\PYGZcb{}}

 sub after\PYGZus{}create\PYGZus{}new\PYGZus{}table \PYG{o}{\PYGZob{}}
    my \PYG{o}{(}\PYG{n+nv}{\PYGZdl{}self}, \PYGZpc{}args\PYG{o}{)} \PYG{o}{=} @\PYGZus{}\PYG{p}{;}
    print \PYG{l+s+s2}{\PYGZdq{}PLUGIN after\PYGZus{}create\PYGZus{}new\PYGZus{}table\PYGZbs{}n\PYGZdq{}}\PYG{p}{;}
 \PYG{o}{\PYGZcb{}}

 sub before\PYGZus{}alter\PYGZus{}new\PYGZus{}table \PYG{o}{\PYGZob{}}
    my \PYG{o}{(}\PYG{n+nv}{\PYGZdl{}self}, \PYGZpc{}args\PYG{o}{)} \PYG{o}{=} @\PYGZus{}\PYG{p}{;}
    print \PYG{l+s+s2}{\PYGZdq{}PLUGIN before\PYGZus{}alter\PYGZus{}new\PYGZus{}table\PYGZbs{}n\PYGZdq{}}\PYG{p}{;}
 \PYG{o}{\PYGZcb{}}

 sub after\PYGZus{}alter\PYGZus{}new\PYGZus{}table \PYG{o}{\PYGZob{}}
    my \PYG{o}{(}\PYG{n+nv}{\PYGZdl{}self}, \PYGZpc{}args\PYG{o}{)} \PYG{o}{=} @\PYGZus{}\PYG{p}{;}
    print \PYG{l+s+s2}{\PYGZdq{}PLUGIN after\PYGZus{}alter\PYGZus{}new\PYGZus{}table\PYGZbs{}n\PYGZdq{}}\PYG{p}{;}
 \PYG{o}{\PYGZcb{}}

 sub before\PYGZus{}create\PYGZus{}triggers \PYG{o}{\PYGZob{}}
    my \PYG{o}{(}\PYG{n+nv}{\PYGZdl{}self}, \PYGZpc{}args\PYG{o}{)} \PYG{o}{=} @\PYGZus{}\PYG{p}{;}
    print \PYG{l+s+s2}{\PYGZdq{}PLUGIN before\PYGZus{}create\PYGZus{}triggers\PYGZbs{}n\PYGZdq{}}\PYG{p}{;}
 \PYG{o}{\PYGZcb{}}

sub after\PYGZus{}create\PYGZus{}triggers \PYG{o}{\PYGZob{}}
    my \PYG{o}{(}\PYG{n+nv}{\PYGZdl{}self}, \PYGZpc{}args\PYG{o}{)} \PYG{o}{=} @\PYGZus{}\PYG{p}{;}
    print \PYG{l+s+s2}{\PYGZdq{}PLUGIN after\PYGZus{}create\PYGZus{}triggers\PYGZbs{}n\PYGZdq{}}\PYG{p}{;}
 \PYG{o}{\PYGZcb{}}

 sub before\PYGZus{}copy\PYGZus{}rows \PYG{o}{\PYGZob{}}
    my \PYG{o}{(}\PYG{n+nv}{\PYGZdl{}self}, \PYGZpc{}args\PYG{o}{)} \PYG{o}{=} @\PYGZus{}\PYG{p}{;}
    print \PYG{l+s+s2}{\PYGZdq{}PLUGIN before\PYGZus{}copy\PYGZus{}rows\PYGZbs{}n\PYGZdq{}}\PYG{p}{;}
 \PYG{o}{\PYGZcb{}}

 sub after\PYGZus{}copy\PYGZus{}rows \PYG{o}{\PYGZob{}}
    my \PYG{o}{(}\PYG{n+nv}{\PYGZdl{}self}, \PYGZpc{}args\PYG{o}{)} \PYG{o}{=} @\PYGZus{}\PYG{p}{;}
    print \PYG{l+s+s2}{\PYGZdq{}PLUGIN after\PYGZus{}copy\PYGZus{}rows\PYGZbs{}n\PYGZdq{}}\PYG{p}{;}
 \PYG{o}{\PYGZcb{}}

 sub before\PYGZus{}swap\PYGZus{}tables \PYG{o}{\PYGZob{}}
    my \PYG{o}{(}\PYG{n+nv}{\PYGZdl{}self}, \PYGZpc{}args\PYG{o}{)} \PYG{o}{=} @\PYGZus{}\PYG{p}{;}
    print \PYG{l+s+s2}{\PYGZdq{}PLUGIN before\PYGZus{}swap\PYGZus{}tables\PYGZbs{}n\PYGZdq{}}\PYG{p}{;}
 \PYG{o}{\PYGZcb{}}

 sub after\PYGZus{}swap\PYGZus{}tables \PYG{o}{\PYGZob{}}
    my \PYG{o}{(}\PYG{n+nv}{\PYGZdl{}self}, \PYGZpc{}args\PYG{o}{)} \PYG{o}{=} @\PYGZus{}\PYG{p}{;}
    print \PYG{l+s+s2}{\PYGZdq{}PLUGIN after\PYGZus{}swap\PYGZus{}tables\PYGZbs{}n\PYGZdq{}}\PYG{p}{;}
 \PYG{o}{\PYGZcb{}}

 sub before\PYGZus{}update\PYGZus{}foreign\PYGZus{}keys \PYG{o}{\PYGZob{}}
    my \PYG{o}{(}\PYG{n+nv}{\PYGZdl{}self}, \PYGZpc{}args\PYG{o}{)} \PYG{o}{=} @\PYGZus{}\PYG{p}{;}
    print \PYG{l+s+s2}{\PYGZdq{}PLUGIN before\PYGZus{}update\PYGZus{}foreign\PYGZus{}keys\PYGZbs{}n\PYGZdq{}}\PYG{p}{;}
 \PYG{o}{\PYGZcb{}}

 sub after\PYGZus{}update\PYGZus{}foreign\PYGZus{}keys \PYG{o}{\PYGZob{}}
    my \PYG{o}{(}\PYG{n+nv}{\PYGZdl{}self}, \PYGZpc{}args\PYG{o}{)} \PYG{o}{=} @\PYGZus{}\PYG{p}{;}
    print \PYG{l+s+s2}{\PYGZdq{}PLUGIN after\PYGZus{}update\PYGZus{}foreign\PYGZus{}keys\PYGZbs{}n\PYGZdq{}}\PYG{p}{;}
 \PYG{o}{\PYGZcb{}}

 sub before\PYGZus{}drop\PYGZus{}old\PYGZus{}table \PYG{o}{\PYGZob{}}
    my \PYG{o}{(}\PYG{n+nv}{\PYGZdl{}self}, \PYGZpc{}args\PYG{o}{)} \PYG{o}{=} @\PYGZus{}\PYG{p}{;}
    print \PYG{l+s+s2}{\PYGZdq{}PLUGIN before\PYGZus{}drop\PYGZus{}old\PYGZus{}table\PYGZbs{}n\PYGZdq{}}\PYG{p}{;}
 \PYG{o}{\PYGZcb{}}

 sub after\PYGZus{}drop\PYGZus{}old\PYGZus{}table \PYG{o}{\PYGZob{}}
    my \PYG{o}{(}\PYG{n+nv}{\PYGZdl{}self}, \PYGZpc{}args\PYG{o}{)} \PYG{o}{=} @\PYGZus{}\PYG{p}{;}
    print \PYG{l+s+s2}{\PYGZdq{}PLUGIN after\PYGZus{}drop\PYGZus{}old\PYGZus{}table\PYGZbs{}n\PYGZdq{}}\PYG{p}{;}
 \PYG{o}{\PYGZcb{}}

 sub before\PYGZus{}drop\PYGZus{}triggers \PYG{o}{\PYGZob{}}
    my \PYG{o}{(}\PYG{n+nv}{\PYGZdl{}self}, \PYGZpc{}args\PYG{o}{)} \PYG{o}{=} @\PYGZus{}\PYG{p}{;}
    print \PYG{l+s+s2}{\PYGZdq{}PLUGIN before\PYGZus{}drop\PYGZus{}triggers\PYGZbs{}n\PYGZdq{}}\PYG{p}{;}
 \PYG{o}{\PYGZcb{}}

 sub before\PYGZus{}exit \PYG{o}{\PYGZob{}}
    my \PYG{o}{(}\PYG{n+nv}{\PYGZdl{}self}, \PYGZpc{}args\PYG{o}{)} \PYG{o}{=} @\PYGZus{}\PYG{p}{;}
    print \PYG{l+s+s2}{\PYGZdq{}PLUGIN before\PYGZus{}exit\PYGZbs{}n\PYGZdq{}}\PYG{p}{;}
 \PYG{o}{\PYGZcb{}}

 sub get\PYGZus{}slave\PYGZus{}lag \PYG{o}{\PYGZob{}}
    my \PYG{o}{(}\PYG{n+nv}{\PYGZdl{}self}, \PYGZpc{}args\PYG{o}{)} \PYG{o}{=} @\PYGZus{}\PYG{p}{;}
    print \PYG{l+s+s2}{\PYGZdq{}PLUGIN get\PYGZus{}slave\PYGZus{}lag\PYGZbs{}n\PYGZdq{}}\PYG{p}{;}

    \PYG{k}{return} sub \PYG{o}{\PYGZob{}} \PYG{k}{return} \PYG{l+m}{0}\PYG{p}{;} \PYG{o}{\PYGZcb{}}\PYG{p}{;}
 \PYG{o}{\PYGZcb{}}

 \PYG{l+m}{1}\PYG{p}{;}
\end{sphinxVerbatim}

Notice that \sphinxcode{\sphinxupquote{get\_slave\_lag}} must return a function reference;
ideally one that returns actual slave lag, not simply zero like in the example.

Here’s an example that actually does something:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
package pt\PYGZus{}online\PYGZus{}schema\PYGZus{}change\PYGZus{}plugin\PYG{p}{;}

use strict\PYG{p}{;}

sub new \PYG{o}{\PYGZob{}}
   my \PYG{o}{(}\PYG{n+nv}{\PYGZdl{}class}, \PYGZpc{}args\PYG{o}{)} \PYG{o}{=} @\PYGZus{}\PYG{p}{;}
   my \PYG{n+nv}{\PYGZdl{}self} \PYG{o}{=} \PYG{o}{\PYGZob{}} \PYGZpc{}args \PYG{o}{\PYGZcb{}}\PYG{p}{;}
   \PYG{k}{return} bless \PYG{n+nv}{\PYGZdl{}self}, \PYG{n+nv}{\PYGZdl{}class}\PYG{p}{;}
\PYG{o}{\PYGZcb{}}

sub after\PYGZus{}create\PYGZus{}new\PYGZus{}table \PYG{o}{\PYGZob{}}
   my \PYG{o}{(}\PYG{n+nv}{\PYGZdl{}self}, \PYGZpc{}args\PYG{o}{)} \PYG{o}{=} @\PYGZus{}\PYG{p}{;}
   my \PYG{n+nv}{\PYGZdl{}new\PYGZus{}tbl} \PYG{o}{=} \PYG{n+nv}{\PYGZdl{}args}\PYG{o}{\PYGZob{}}new\PYGZus{}tbl\PYG{o}{\PYGZcb{}}\PYG{p}{;}
   my \PYG{n+nv}{\PYGZdl{}dbh}     \PYG{o}{=} \PYG{n+nv}{\PYGZdl{}self}\PYGZhy{}\PYGZgt{}\PYG{o}{\PYGZob{}}cxn\PYG{o}{\PYGZcb{}}\PYGZhy{}\PYGZgt{}dbh\PYG{p}{;}
   my \PYG{n+nv}{\PYGZdl{}row} \PYG{o}{=} \PYG{n+nv}{\PYGZdl{}dbh}\PYGZhy{}\PYGZgt{}selectrow\PYGZus{}arrayref\PYG{o}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SHOW CREATE TABLE }\PYG{n+nv}{\PYGZdl{}new\PYGZus{}tbl}\PYG{l+s+s2}{\PYGZhy{}\PYGZgt{}\PYGZob{}name\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{)}\PYG{p}{;}
   warn \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{after\PYGZus{}create\PYGZus{}new\PYGZus{}table: }\PYG{n+nv}{\PYGZdl{}row}\PYG{l+s+s2}{\PYGZhy{}\PYGZgt{}[1]\PYGZbs{}n\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{;}
\PYG{o}{\PYGZcb{}}

sub after\PYGZus{}alter\PYGZus{}new\PYGZus{}table \PYG{o}{\PYGZob{}}
   my \PYG{o}{(}\PYG{n+nv}{\PYGZdl{}self}, \PYGZpc{}args\PYG{o}{)} \PYG{o}{=} @\PYGZus{}\PYG{p}{;}
   my \PYG{n+nv}{\PYGZdl{}new\PYGZus{}tbl} \PYG{o}{=} \PYG{n+nv}{\PYGZdl{}args}\PYG{o}{\PYGZob{}}new\PYGZus{}tbl\PYG{o}{\PYGZcb{}}\PYG{p}{;}
   my \PYG{n+nv}{\PYGZdl{}dbh}     \PYG{o}{=} \PYG{n+nv}{\PYGZdl{}self}\PYGZhy{}\PYGZgt{}\PYG{o}{\PYGZob{}}cxn\PYG{o}{\PYGZcb{}}\PYGZhy{}\PYGZgt{}dbh\PYG{p}{;}
   my \PYG{n+nv}{\PYGZdl{}row} \PYG{o}{=} \PYG{n+nv}{\PYGZdl{}dbh}\PYGZhy{}\PYGZgt{}selectrow\PYGZus{}arrayref\PYG{o}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SHOW CREATE TABLE }\PYG{n+nv}{\PYGZdl{}new\PYGZus{}tbl}\PYG{l+s+s2}{\PYGZhy{}\PYGZgt{}\PYGZob{}name\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{)}\PYG{p}{;}
   warn \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{after\PYGZus{}alter\PYGZus{}new\PYGZus{}table: }\PYG{n+nv}{\PYGZdl{}row}\PYG{l+s+s2}{\PYGZhy{}\PYGZgt{}[1]\PYGZbs{}n\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{;}
\PYG{o}{\PYGZcb{}}

\PYG{l+m}{1}\PYG{p}{;}
\end{sphinxVerbatim}

You could use this with {\hyperref[\detokenize{mariadb-schema-change:cmdoption-mariadb-schema-change-dry-run}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dry\sphinxhyphen{}run}}}}} to check how the table will look before and after.

Please contact MariaDB if you have questions or need help.


\section{DSN OPTIONS}
\label{\detokenize{mariadb-schema-change:dsn-options}}
These DSN options are used to create a DSN.  Each option is given like
\sphinxcode{\sphinxupquote{option=value}}.  The options are case\sphinxhyphen{}sensitive, so P and p are not the
same option.  There cannot be whitespace before or after the \sphinxcode{\sphinxupquote{=}} and
if the value contains whitespace it must be quoted.  DSN options are
comma\sphinxhyphen{}separated.  See the mariadb\sphinxhyphen{}tools manpage for full details.
\begin{itemize}
\item {} 
A

\end{itemize}
\begin{quote}

dsn: charset; copy: yes

Default character set.
\end{quote}
\begin{itemize}
\item {} 
D

\end{itemize}
\begin{quote}

dsn: database; copy: no

Database for the old and new table.
\end{quote}
\begin{itemize}
\item {} 
F

\end{itemize}
\begin{quote}

dsn: mysql\_read\_default\_file; copy: yes

Only read default options from the given file
\end{quote}
\begin{itemize}
\item {} 
h

\end{itemize}
\begin{quote}

dsn: host; copy: yes

Connect to host.
\end{quote}
\begin{itemize}
\item {} 
p

\end{itemize}
\begin{quote}

dsn: password; copy: yes

Password to use when connecting.
If password contains commas they must be escaped with a backslash: “exam,ple”
\end{quote}
\begin{itemize}
\item {} 
P

\end{itemize}
\begin{quote}

dsn: port; copy: yes

Port number to use for connection.
\end{quote}
\begin{itemize}
\item {} 
S

\end{itemize}
\begin{quote}

dsn: mysql\_socket; copy: yes

Socket file to use for connection.
\end{quote}
\begin{itemize}
\item {} 
t

\end{itemize}
\begin{quote}

dsn: table; copy: no

Table to alter.
\end{quote}
\begin{itemize}
\item {} 
u

\end{itemize}
\begin{quote}

dsn: user; copy: yes

User for login if not current user.
\end{quote}


\section{ENVIRONMENT}
\label{\detokenize{mariadb-schema-change:environment}}
The environment variable \sphinxcode{\sphinxupquote{PTDEBUG}} enables verbose debugging output to STDERR.
To enable debugging and capture all output to a file, run the tool like:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nv}{PTDEBUG}\PYG{o}{=}\PYG{l+m}{1} mariadb\PYGZhy{}schema\PYGZhy{}change ... \PYGZgt{} FILE \PYG{l+m}{2}\PYGZgt{}\PYG{p}{\PYGZam{}}\PYG{l+m}{1}
\end{sphinxVerbatim}

Be careful: debugging output is voluminous and can generate several megabytes
of output.


\section{EXIT STATUS}
\label{\detokenize{mariadb-schema-change:exit-status}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nv}{INVALID\PYGZus{}PARAMETERS}        \PYG{o}{=} \PYG{l+m}{1}
\PYG{n+nv}{UNSUPORTED\PYGZus{}MYSQL\PYGZus{}VERSION}  \PYG{o}{=} \PYG{l+m}{2}
\PYG{n+nv}{NO\PYGZus{}MINIMUM\PYGZus{}REQUIREMENTS}   \PYG{o}{=} \PYG{l+m}{3}
\PYG{n+nv}{NO\PYGZus{}PRIMARY\PYGZus{}OR\PYGZus{}UNIQUE\PYGZus{}KEY}  \PYG{o}{=} \PYG{l+m}{4}
\PYG{n+nv}{INVALID\PYGZus{}PLUGIN\PYGZus{}FILE}       \PYG{o}{=} \PYG{l+m}{5}
\PYG{n+nv}{INVALID\PYGZus{}ALTER\PYGZus{}FK\PYGZus{}METHOD}   \PYG{o}{=} \PYG{l+m}{6}
\PYG{n+nv}{INVALID\PYGZus{}KEY\PYGZus{}SIZE}          \PYG{o}{=} \PYG{l+m}{7}
\PYG{n+nv}{CANNOT\PYGZus{}DETERMINE\PYGZus{}KEY\PYGZus{}SIZE} \PYG{o}{=} \PYG{l+m}{9}
\PYG{n+nv}{NOT\PYGZus{}SAFE\PYGZus{}TO\PYGZus{}ASCEND}        \PYG{o}{=} \PYG{l+m}{9}
\PYG{n+nv}{ERROR\PYGZus{}CREATING\PYGZus{}NEW\PYGZus{}TABLE}  \PYG{o}{=} \PYG{l+m}{10}
\PYG{n+nv}{ERROR\PYGZus{}ALTERING\PYGZus{}TABLE}      \PYG{o}{=} \PYG{l+m}{11}
\PYG{n+nv}{ERROR\PYGZus{}CREATING\PYGZus{}TRIGGERS}   \PYG{o}{=} \PYG{l+m}{12}
\PYG{n+nv}{ERROR\PYGZus{}RESTORING\PYGZus{}TRIGGERS}  \PYG{o}{=} \PYG{l+m}{13}
\PYG{n+nv}{ERROR\PYGZus{}SWAPPING\PYGZus{}TABLES}     \PYG{o}{=} \PYG{l+m}{14}
\PYG{n+nv}{ERROR\PYGZus{}UPDATING\PYGZus{}FKS}        \PYG{o}{=} \PYG{l+m}{15}
\PYG{n+nv}{ERROR\PYGZus{}DROPPING\PYGZus{}OLD\PYGZus{}TABLE}  \PYG{o}{=} \PYG{l+m}{16}
\PYG{n+nv}{UNSUPORTED\PYGZus{}OPERATION}      \PYG{o}{=} \PYG{l+m}{17}
\PYG{n+nv}{MYSQL\PYGZus{}CONNECTION\PYGZus{}ERROR}    \PYG{o}{=} \PYG{l+m}{18}
\PYG{n+nv}{LOST\PYGZus{}MYSQL\PYGZus{}CONNECTION}     \PYG{o}{=} \PYG{l+m}{19}
\end{sphinxVerbatim}


\section{SYSTEM REQUIREMENTS}
\label{\detokenize{mariadb-schema-change:system-requirements}}
You need Perl, DBI, DBD::mysql, and some core packages that ought to be
installed in any reasonably new version of Perl.

This tool works only on MariaDB 5.0.2 and newer versions, because earlier versions
do not support triggers. Also a number of permissions should be set on MariaDB
to make \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change}} operate as expected. PROCESS, SUPER, REPLICATION SLAVE
global privileges, as well as SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, ALTER,
and TRIGGER table privileges should be granted on server. Slave needs only
REPLICATION SLAVE and REPLICATION CLIENT privileges.


\section{AUTHORS}
\label{\detokenize{mariadb-schema-change:authors}}
Cole Busby, Daniel Nichter and Baron Schwartz


\section{ACKNOWLEDGMENTS}
\label{\detokenize{mariadb-schema-change:acknowledgments}}
The “online schema change” concept was first implemented by Shlomi Noach
in his tool \sphinxcode{\sphinxupquote{oak\sphinxhyphen{}online\sphinxhyphen{}alter\sphinxhyphen{}table}}, part of
\sphinxurl{http://code.google.com/p/openarkkit/}.  Engineers at Facebook then built
another version called \sphinxcode{\sphinxupquote{OnlineSchemaChange.php}} as explained by their blog
post: \sphinxurl{http://tinyurl.com/32zeb86}. This tool is a hybrid of both approaches,
with additional features and functionality not present in either.


\section{ABOUT THIS MARIADB TOOL}
\label{\detokenize{mariadb-schema-change:about-this-mariadb-tool}}
This tool is part of MariaDB client tools. This MariaDB Tool was forked from
Percona Toolkit’s pt\sphinxhyphen{}online\sphinxhyphen{}schema\sphinxhyphen{}change in August, 2019. Percona Toolkit was
forked from two projects in June, 2011: Maatkit and Aspersa.  Those projects
were created by Baron Schwartz and primarily developed by him and Daniel Nichter.


\section{COPYRIGHT, LICENSE, AND WARRANTY}
\label{\detokenize{mariadb-schema-change:copyright-license-and-warranty}}
This program is copyright 2019\sphinxhyphen{}2021 MariaDB Corporation and/or its affiliates,
2011\sphinxhyphen{}2018 Percona LLC and/or its affiliates, 2010\sphinxhyphen{}2011 Baron Schwartz.

THIS PROGRAM IS PROVIDED “AS IS” AND WITHOUT ANY EXPRESS OR IMPLIED
WARRANTIES, INCLUDING, WITHOUT LIMITATION, THE IMPLIED WARRANTIES OF
MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.

This program is free software; you can redistribute it and/or modify it under
the terms of the GNU General Public License as published by the Free Software
Foundation, version 2; OR the Perl Artistic License.  On UNIX and similar
systems, you can issue \textasciigrave{}man perlgpl’ or \textasciigrave{}man perlartistic’ to read these
licenses.

You should have received a copy of the GNU General Public License along with
this program; if not, write to the Free Software Foundation, Inc., 59 Temple
Place, Suite 330, Boston, MA  02111\sphinxhyphen{}1307  USA.


\section{VERSION}
\label{\detokenize{mariadb-schema-change:version}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}schema\sphinxhyphen{}change}} 6.0.0rc


\chapter{\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}stacktrace}}}
\label{\detokenize{mariadb-stacktrace:mariadb-stacktrace}}\label{\detokenize{mariadb-stacktrace::doc}}

\section{NAME}
\label{\detokenize{mariadb-stacktrace:name}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}stacktrace}} \sphinxhyphen{} Aggregate GDB stack traces for a selected program.


\section{SYNOPSIS}
\label{\detokenize{mariadb-stacktrace:synopsis}}

\subsection{Usage}
\label{\detokenize{mariadb-stacktrace:usage}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{mariadb}\PYG{o}{\PYGZhy{}}\PYG{n}{stacktrace} \PYG{p}{[}\PYG{n}{OPTIONS}\PYG{p}{]} \PYG{p}{[}\PYG{n}{FILES}\PYG{p}{]}
\end{sphinxVerbatim}

\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}stacktrace}} is a poor man’s profiler, inspired by \sphinxurl{http://poormansprofiler.org}.
It can create and summarize full stack traces of processes on Linux.
Summaries of stack traces can be an invaluable tool for diagnosing what
a process is waiting for.


\section{RISKS}
\label{\detokenize{mariadb-stacktrace:risks}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}stacktrace}} is mature, proven in the real world, and well tested,
but all database tools can pose a risk to the system and the database
server.  Before using this tool, please:
\begin{itemize}
\item {} 
Read the tool’s documentation

\item {} 
Test the tool on a non\sphinxhyphen{}production server

\item {} 
Backup your production server and verify the backups

\end{itemize}


\section{DESCRIPTION}
\label{\detokenize{mariadb-stacktrace:description}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}stacktrace}} performs two tasks: it gets a stack trace, and it summarizes the stack
trace.  If a file is given on the command line, the tool skips the first step
and just aggregates the file.

To summarize the stack trace, the tool extracts the function name (symbol)
from each level of the stack, and combines them with commas.  It does this
for each thread in the output.  Afterwards, it sorts similar threads together
and counts how many of each one there are, then sorts them most\sphinxhyphen{}frequent first.

\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}stacktrace}} is a read\sphinxhyphen{}only tool.  However, collecting GDB stacktraces is achieved by
attaching GDB to the program and printing stack traces from all threads. This
will freeze the program for some period of time, ranging from a second or so to
much longer on very busy systems with a lot of memory and many threads in the
program.  In the tool’s default usage as a MariaDB profiling tool, this means that
MariaDB will be unresponsive while the tool runs, although if you are using the
tool to diagnose an unresponsive server, there is really no reason not to do
this.  In addition to freezing the server, there is also some risk of the server
crashing or performing badly after GDB detaches from it.


\section{OPTIONS}
\label{\detokenize{mariadb-stacktrace:options}}\index{mariadb\sphinxhyphen{}stacktrace command line option@\spxentry{mariadb\sphinxhyphen{}stacktrace command line option}!\sphinxhyphen{}\sphinxhyphen{}binary@\spxentry{\sphinxhyphen{}\sphinxhyphen{}binary}}\index{\sphinxhyphen{}\sphinxhyphen{}binary@\spxentry{\sphinxhyphen{}\sphinxhyphen{}binary}!mariadb\sphinxhyphen{}stacktrace command line option@\spxentry{mariadb\sphinxhyphen{}stacktrace command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stacktrace:cmdoption-mariadb-stacktrace-binary}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}binary}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}b; type: string; default: mysqld

Which binary to trace.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stacktrace command line option@\spxentry{mariadb\sphinxhyphen{}stacktrace command line option}!\sphinxhyphen{}\sphinxhyphen{}help@\spxentry{\sphinxhyphen{}\sphinxhyphen{}help}}\index{\sphinxhyphen{}\sphinxhyphen{}help@\spxentry{\sphinxhyphen{}\sphinxhyphen{}help}!mariadb\sphinxhyphen{}stacktrace command line option@\spxentry{mariadb\sphinxhyphen{}stacktrace command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stacktrace:cmdoption-mariadb-stacktrace-help}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}help}}\sphinxcode{\sphinxupquote{}}}
Show help and exit.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stacktrace command line option@\spxentry{mariadb\sphinxhyphen{}stacktrace command line option}!\sphinxhyphen{}\sphinxhyphen{}interval@\spxentry{\sphinxhyphen{}\sphinxhyphen{}interval}}\index{\sphinxhyphen{}\sphinxhyphen{}interval@\spxentry{\sphinxhyphen{}\sphinxhyphen{}interval}!mariadb\sphinxhyphen{}stacktrace command line option@\spxentry{mariadb\sphinxhyphen{}stacktrace command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stacktrace:cmdoption-mariadb-stacktrace-interval}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}interval}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}s; type: int; default: 0

Number of seconds to sleep between {\hyperref[\detokenize{mariadb-stacktrace:cmdoption-mariadb-stacktrace-iterations}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}iterations}}}}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stacktrace command line option@\spxentry{mariadb\sphinxhyphen{}stacktrace command line option}!\sphinxhyphen{}\sphinxhyphen{}iterations@\spxentry{\sphinxhyphen{}\sphinxhyphen{}iterations}}\index{\sphinxhyphen{}\sphinxhyphen{}iterations@\spxentry{\sphinxhyphen{}\sphinxhyphen{}iterations}!mariadb\sphinxhyphen{}stacktrace command line option@\spxentry{mariadb\sphinxhyphen{}stacktrace command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stacktrace:cmdoption-mariadb-stacktrace-iterations}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}iterations}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}i; type: int; default: 1

How many traces to gather and aggregate.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stacktrace command line option@\spxentry{mariadb\sphinxhyphen{}stacktrace command line option}!\sphinxhyphen{}\sphinxhyphen{}lines@\spxentry{\sphinxhyphen{}\sphinxhyphen{}lines}}\index{\sphinxhyphen{}\sphinxhyphen{}lines@\spxentry{\sphinxhyphen{}\sphinxhyphen{}lines}!mariadb\sphinxhyphen{}stacktrace command line option@\spxentry{mariadb\sphinxhyphen{}stacktrace command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stacktrace:cmdoption-mariadb-stacktrace-lines}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}lines}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}l; type: int; default: 0

Aggregate only first specified number of many functions; 0=infinity.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stacktrace command line option@\spxentry{mariadb\sphinxhyphen{}stacktrace command line option}!\sphinxhyphen{}\sphinxhyphen{}pid@\spxentry{\sphinxhyphen{}\sphinxhyphen{}pid}}\index{\sphinxhyphen{}\sphinxhyphen{}pid@\spxentry{\sphinxhyphen{}\sphinxhyphen{}pid}!mariadb\sphinxhyphen{}stacktrace command line option@\spxentry{mariadb\sphinxhyphen{}stacktrace command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stacktrace:cmdoption-mariadb-stacktrace-pid}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}pid}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}p; type: int

Process ID of the process to trace; overrides {\hyperref[\detokenize{mariadb-stacktrace:cmdoption-mariadb-stacktrace-binary}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}binary}}}}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stacktrace command line option@\spxentry{mariadb\sphinxhyphen{}stacktrace command line option}!\sphinxhyphen{}\sphinxhyphen{}save\sphinxhyphen{}samples@\spxentry{\sphinxhyphen{}\sphinxhyphen{}save\sphinxhyphen{}samples}}\index{\sphinxhyphen{}\sphinxhyphen{}save\sphinxhyphen{}samples@\spxentry{\sphinxhyphen{}\sphinxhyphen{}save\sphinxhyphen{}samples}!mariadb\sphinxhyphen{}stacktrace command line option@\spxentry{mariadb\sphinxhyphen{}stacktrace command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stacktrace:cmdoption-mariadb-stacktrace-save-samples}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}save\sphinxhyphen{}samples}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}k; type: string

Keep the raw traces in this file after aggregation.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stacktrace command line option@\spxentry{mariadb\sphinxhyphen{}stacktrace command line option}!\sphinxhyphen{}\sphinxhyphen{}version@\spxentry{\sphinxhyphen{}\sphinxhyphen{}version}}\index{\sphinxhyphen{}\sphinxhyphen{}version@\spxentry{\sphinxhyphen{}\sphinxhyphen{}version}!mariadb\sphinxhyphen{}stacktrace command line option@\spxentry{mariadb\sphinxhyphen{}stacktrace command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stacktrace:cmdoption-mariadb-stacktrace-version}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}version}}\sphinxcode{\sphinxupquote{}}}
Show version and exit.

\end{fulllineitems}



\section{ENVIRONMENT}
\label{\detokenize{mariadb-stacktrace:environment}}
This tool does not use any environment variables.


\section{SYSTEM REQUIREMENTS}
\label{\detokenize{mariadb-stacktrace:system-requirements}}
This tool requires Bash v3 or newer.  If no backtrace files are given,
then gdb is also required to create backtraces for the process specified
on the command line.


\section{AUTHORS}
\label{\detokenize{mariadb-stacktrace:authors}}
Cole Busby, Baron Schwartz, based on a script by Domas Mituzas (\sphinxurl{http://poormansprofiler.org/})


\section{ABOUT THIS MARIADB TOOL}
\label{\detokenize{mariadb-stacktrace:about-this-mariadb-tool}}
This tool is part of MariaDB client tools. This MariaDB Tool was forked from
Percona Toolkit’s pt\sphinxhyphen{}pmp in August, 2019. Percona Toolkit was forked from two
projects in June, 2011: Maatkit and Aspersa.  Those projects were created by
Baron Schwartz and primarily developed by him and Daniel Nichter.


\section{COPYRIGHT, LICENSE, AND WARRANTY}
\label{\detokenize{mariadb-stacktrace:copyright-license-and-warranty}}
This program is copyright 2019\sphinxhyphen{}2021 MariaDB Corporation and/or its affiliates,
2011\sphinxhyphen{}2018 Percona LLC and/or its affiliates, 2010\sphinxhyphen{}2011 Baron Schwartz.

THIS PROGRAM IS PROVIDED “AS IS” AND WITHOUT ANY EXPRESS OR IMPLIED
WARRANTIES, INCLUDING, WITHOUT LIMITATION, THE IMPLIED WARRANTIES OF
MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.

This program is free software; you can redistribute it and/or modify it under
the terms of the GNU General Public License as published by the Free Software
Foundation, version 2; OR the Perl Artistic License.  On UNIX and similar
systems, you can issue \textasciigrave{}man perlgpl’ or \textasciigrave{}man perlartistic’ to read these
licenses.

You should have received a copy of the GNU General Public License along with
this program; if not, write to the Free Software Foundation, Inc., 59 Temple
Place, Suite 330, Boston, MA  02111\sphinxhyphen{}1307  USA.


\section{VERSION}
\label{\detokenize{mariadb-stacktrace:version}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}stacktrace}} 6.0.0rc


\chapter{\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}stat}}}
\label{\detokenize{mariadb-stat:mariadb-stat}}\label{\detokenize{mariadb-stat::doc}}

\section{NAME}
\label{\detokenize{mariadb-stat:name}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}stat}} \sphinxhyphen{} Collect forensic data about MariaDB when problems occur.


\section{SYNOPSIS}
\label{\detokenize{mariadb-stat:synopsis}}

\subsection{Usage}
\label{\detokenize{mariadb-stat:usage}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{mariadb}\PYG{o}{\PYGZhy{}}\PYG{n}{stat} \PYG{p}{[}\PYG{n}{OPTIONS}\PYG{p}{]}
\end{sphinxVerbatim}

\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}stat}} waits for a trigger condition to occur, then collects data
to help diagnose problems.  The tool is designed to run as a daemon with root
privileges, so that you can diagnose intermittent problems that you cannot
observe directly.  You can also use it to execute a custom command, or to
collect data on demand without waiting for the trigger to occur.


\section{RISKS}
\label{\detokenize{mariadb-stat:risks}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}stat}} is mature, proven in the real world, and well tested,
but all database tools can pose a risk to the system and the database
server.  Before using this tool, please:
\begin{itemize}
\item {} 
Read the tool’s documentation

\item {} 
Review the tool’s known “BUGS”

\item {} 
Test the tool on a non\sphinxhyphen{}production server

\item {} 
Backup your production server and verify the backups

\end{itemize}


\section{DESCRIPTION}
\label{\detokenize{mariadb-stat:description}}
Sometimes a problem happens infrequently and for a short time, giving you no
chance to see the system when it happens. How do you solve intermittent MariaDB
problems when you can’t observe them? That’s why \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}stat}} exists. In addition to
using it when there’s a known problem on your servers, it is a good idea to run
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}stat}} all the time, even when you think nothing is wrong.  You will
appreciate the data it collects when a problem occurs, because problems such as
MariaDB lockups or spikes in activity typically leave no evidence to use in root
cause analysis.

\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}stat}} does two things: it watches a MariaDB server and waits for a trigger
condition to occur, and it collects diagnostic data when that trigger occurs.
To avoid false\sphinxhyphen{}positives caused by short\sphinxhyphen{}lived problems, the trigger condition
must be true at least {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-cycles}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}cycles}}}}} times before a {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-collect}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}collect}}}}} is triggered.

To use \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}stat}} effectively, you need to define a good trigger.  A good trigger
is sensitive enough to fire reliably when a problem occurs, so that you don’t
miss a chance to solve problems.  On the other hand, a good trigger isn’t
prone to false positives, so you don’t gather information when the server
is functioning normally.

The most reliable triggers for MariaDB tend to be the number of connections to the
server, and the number of queries running concurrently. These are available in
the SHOW GLOBAL STATUS command as Threads\_connected and Threads\_running.
Sometimes Threads\_connected is not a reliable indicator of trouble, but
Threads\_running usually is.  Your job, as the tool’s user, is to define an
appropriate trigger condition for the tool.  Choose carefully, because the
quality of your results will depend on the trigger you choose.

You define the trigger with the {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-function}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}function}}}}}, {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-variable}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}variable}}}}},
{\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-threshold}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}threshold}}}}}, and {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-cycles}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}cycles}}}}} options.  The default values
for these options define a reasonable trigger, but you should adjust
or change them to suite your particular system and needs.

By default, \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}stat}} tool watches MariaDB forever until the trigger occurs,
then it collects diagnostic data for a while, and sleeps afterwards to avoid
repeatedly collecting data if the trigger remains true.  The general order of
operations is:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{while} true\PYG{p}{;} \PYG{k}{do}
   \PYG{k}{if} \PYGZhy{}\PYGZhy{}variable from \PYGZhy{}\PYGZhy{}function \PYGZgt{} \PYGZhy{}\PYGZhy{}threshold\PYG{p}{;} \PYG{k}{then}
      cycles\PYGZus{}true++
      \PYG{k}{if} cycles\PYGZus{}true \PYGZgt{}\PYG{o}{=} \PYGZhy{}\PYGZhy{}cycles\PYG{p}{;} \PYG{k}{then}
         \PYGZhy{}\PYGZhy{}notify\PYGZhy{}by\PYGZhy{}email
         \PYG{k}{if} \PYGZhy{}\PYGZhy{}collect\PYG{p}{;} \PYG{k}{then}
            \PYG{k}{if} \PYGZhy{}\PYGZhy{}disk\PYGZhy{}bytes\PYGZhy{}free and \PYGZhy{}\PYGZhy{}disk\PYGZhy{}pct\PYGZhy{}free ok\PYG{p}{;} \PYG{k}{then}
               \PYG{o}{(}\PYGZhy{}\PYGZhy{}collect \PYG{k}{for} \PYGZhy{}\PYGZhy{}run\PYGZhy{}time seconds\PYG{o}{)} \PYG{p}{\PYGZam{}}
            \PYG{k}{fi}
            rm files in \PYGZhy{}\PYGZhy{}dest older than \PYGZhy{}\PYGZhy{}retention\PYGZhy{}time
         \PYG{k}{fi}
         iter++
         \PYG{n+nv}{cycles\PYGZus{}true}\PYG{o}{=}\PYG{l+m}{0}
      \PYG{k}{fi}
      \PYG{k}{if} iter \PYGZlt{} \PYGZhy{}\PYGZhy{}iterations\PYG{p}{;} \PYG{k}{then}
         sleep \PYGZhy{}\PYGZhy{}sleep seconds
      \PYG{k}{else}
         \PYG{n+nb}{break}
      \PYG{k}{fi}
   \PYG{k}{else}
      \PYG{k}{if} iter \PYGZlt{} \PYGZhy{}\PYGZhy{}iterations\PYG{p}{;} \PYG{k}{then}
         sleep \PYGZhy{}\PYGZhy{}interval seconds
      \PYG{k}{else}
         \PYG{n+nb}{break}
      \PYG{k}{fi}
   \PYG{k}{fi}
\PYG{k}{done}
rm old \PYGZhy{}\PYGZhy{}dest files older than \PYGZhy{}\PYGZhy{}retention\PYGZhy{}time
\PYG{k}{if} \PYGZhy{}\PYGZhy{}collect process are still running\PYG{p}{;} \PYG{k}{then}
   \PYG{n+nb}{wait} up to \PYGZhy{}\PYGZhy{}run\PYGZhy{}time * \PYG{l+m}{3} seconds
   \PYG{n+nb}{kill} any remaining \PYGZhy{}\PYGZhy{}collect processes
\PYG{k}{fi}
\end{sphinxVerbatim}

The diagnostic data is written to files whose names begin with a timestamp, so
you can distinguish samples from each other in case the tool collects data
multiple times.  The pt\sphinxhyphen{}sift tool is designed to help you browse and analyze
the resulting data samples.

Although this sounds simple enough, in practice there are a number of
subtleties, such as detecting when the disk is beginning to fill up so that the
tool doesn’t cause the server to run out of disk space.  This tool handles these
types of potential problems, so it’s a good idea to use this tool instead of
writing something from scratch and possibly experiencing some of the hazards
this tool is designed to avoid.


\section{CONFIGURING}
\label{\detokenize{mariadb-stat:configuring}}
You can use standard MariaDB tool configuration files to set command line
options.

You will probably want to run the tool as a daemon and customize at least the
{\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-threshold}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}threshold}}}}}.  Here’s a sample configuration file for triggering when
there are more than 20 queries running at once:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
daemonize
\PYG{n+nv}{threshold}\PYG{o}{=}\PYG{l+m}{20}
\end{sphinxVerbatim}

If you don’t run the tool as root, then you will need specify several options,
such as {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-pid}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}pid}}}}}, {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-log}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}log}}}}}, and {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-dest}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dest}}}}}, else the tool will probably
fail to start.


\section{OPTIONS}
\label{\detokenize{mariadb-stat:options}}\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass}}\index{\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-ask-pass}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass}}\sphinxcode{\sphinxupquote{}}}
Prompt for a password when connecting to MariaDB.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}collect@\spxentry{\sphinxhyphen{}\sphinxhyphen{}collect}}\index{\sphinxhyphen{}\sphinxhyphen{}collect@\spxentry{\sphinxhyphen{}\sphinxhyphen{}collect}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-collect}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}collect}}\sphinxcode{\sphinxupquote{}}}
default: yes; negatable: yes

Collect diagnostic data when the trigger occurs.  Specify \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}collect}}
to make the tool watch the system but not collect data.

See also {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-stalk}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}stalk}}}}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}collect\sphinxhyphen{}gdb@\spxentry{\sphinxhyphen{}\sphinxhyphen{}collect\sphinxhyphen{}gdb}}\index{\sphinxhyphen{}\sphinxhyphen{}collect\sphinxhyphen{}gdb@\spxentry{\sphinxhyphen{}\sphinxhyphen{}collect\sphinxhyphen{}gdb}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-collect-gdb}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}collect\sphinxhyphen{}gdb}}\sphinxcode{\sphinxupquote{}}}
Collect GDB stacktraces.  This is achieved by attaching to MariaDB and printing
stack traces from all threads. This will freeze the server for some period of
time, ranging from a second or so to much longer on very busy systems with a lot
of memory and many threads in the server.  For this reason, it is disabled by
default. However, if you are trying to diagnose a server stall or lockup,
freezing the server causes no additional harm, and the stack traces can be vital
for diagnosis.

In addition to freezing the server, there is also some risk of the server
crashing or performing badly after GDB detaches from it.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}collect\sphinxhyphen{}oprofile@\spxentry{\sphinxhyphen{}\sphinxhyphen{}collect\sphinxhyphen{}oprofile}}\index{\sphinxhyphen{}\sphinxhyphen{}collect\sphinxhyphen{}oprofile@\spxentry{\sphinxhyphen{}\sphinxhyphen{}collect\sphinxhyphen{}oprofile}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-collect-oprofile}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}collect\sphinxhyphen{}oprofile}}\sphinxcode{\sphinxupquote{}}}
Collect oprofile data.  This is achieved by starting an oprofile session,
letting it run for the collection time, and then stopping and saving the
resulting profile data in the system’s default location.  Please read your
system’s oprofile documentation to learn more about this.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}collect\sphinxhyphen{}strace@\spxentry{\sphinxhyphen{}\sphinxhyphen{}collect\sphinxhyphen{}strace}}\index{\sphinxhyphen{}\sphinxhyphen{}collect\sphinxhyphen{}strace@\spxentry{\sphinxhyphen{}\sphinxhyphen{}collect\sphinxhyphen{}strace}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-collect-strace}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}collect\sphinxhyphen{}strace}}\sphinxcode{\sphinxupquote{}}}
Collect strace data. This is achieved by attaching strace to the server, which
will make it run very slowly until strace detaches.  The same cautions apply as
those listed in \textendash{}collect\sphinxhyphen{}gdb.  You should not enable this option together with
\textendash{}collect\sphinxhyphen{}gdb, because GDB and strace can’t attach to the server process
simultaneously.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}collect\sphinxhyphen{}tcpdump@\spxentry{\sphinxhyphen{}\sphinxhyphen{}collect\sphinxhyphen{}tcpdump}}\index{\sphinxhyphen{}\sphinxhyphen{}collect\sphinxhyphen{}tcpdump@\spxentry{\sphinxhyphen{}\sphinxhyphen{}collect\sphinxhyphen{}tcpdump}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-collect-tcpdump}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}collect\sphinxhyphen{}tcpdump}}\sphinxcode{\sphinxupquote{}}}
Collect tcpdump data. This option causes tcpdump to capture all traffic on all
interfaces for the port on which MariaDB is listening.  You can later use
pt\sphinxhyphen{}query\sphinxhyphen{}digest to decode the MariaDB protocol and extract a log of query traffic
from it.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}config@\spxentry{\sphinxhyphen{}\sphinxhyphen{}config}}\index{\sphinxhyphen{}\sphinxhyphen{}config@\spxentry{\sphinxhyphen{}\sphinxhyphen{}config}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-config}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}config}}\sphinxcode{\sphinxupquote{}}}
type: string

Read this comma\sphinxhyphen{}separated list of config files.  If specified, this must be the
first option on the command line.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}cycles@\spxentry{\sphinxhyphen{}\sphinxhyphen{}cycles}}\index{\sphinxhyphen{}\sphinxhyphen{}cycles@\spxentry{\sphinxhyphen{}\sphinxhyphen{}cycles}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-cycles}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}cycles}}\sphinxcode{\sphinxupquote{}}}
type: int; default: 5

How many times {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-variable}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}variable}}}}} must be greater than {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-threshold}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}threshold}}}}} before triggering {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-collect}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}collect}}}}}.  This helps prevent false positives, and makes
the trigger condition less likely to fire when the problem recovers quickly.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}daemonize@\spxentry{\sphinxhyphen{}\sphinxhyphen{}daemonize}}\index{\sphinxhyphen{}\sphinxhyphen{}daemonize@\spxentry{\sphinxhyphen{}\sphinxhyphen{}daemonize}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-daemonize}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}daemonize}}\sphinxcode{\sphinxupquote{}}}
Daemonize the tool.  This causes the tool to fork into the background and log
its output as specified in \textendash{}log.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}defaults\sphinxhyphen{}file@\spxentry{\sphinxhyphen{}\sphinxhyphen{}defaults\sphinxhyphen{}file}}\index{\sphinxhyphen{}\sphinxhyphen{}defaults\sphinxhyphen{}file@\spxentry{\sphinxhyphen{}\sphinxhyphen{}defaults\sphinxhyphen{}file}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-defaults-file}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}defaults\sphinxhyphen{}file}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}F; type: string

Only read mariadb options from the given file.  You must give an absolute
pathname.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}dest@\spxentry{\sphinxhyphen{}\sphinxhyphen{}dest}}\index{\sphinxhyphen{}\sphinxhyphen{}dest@\spxentry{\sphinxhyphen{}\sphinxhyphen{}dest}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-dest}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dest}}\sphinxcode{\sphinxupquote{}}}
type: string; default: /var/lib/mariadb\sphinxhyphen{}stat

Where to save diagnostic data from {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-collect}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}collect}}}}}.  Each time the tool
collects data, it writes to a new set of files, which are named with the
current system timestamp.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}disk\sphinxhyphen{}bytes\sphinxhyphen{}free@\spxentry{\sphinxhyphen{}\sphinxhyphen{}disk\sphinxhyphen{}bytes\sphinxhyphen{}free}}\index{\sphinxhyphen{}\sphinxhyphen{}disk\sphinxhyphen{}bytes\sphinxhyphen{}free@\spxentry{\sphinxhyphen{}\sphinxhyphen{}disk\sphinxhyphen{}bytes\sphinxhyphen{}free}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-disk-bytes-free}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}disk\sphinxhyphen{}bytes\sphinxhyphen{}free}}\sphinxcode{\sphinxupquote{}}}
type: size; default: 100M

Do not {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-collect}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}collect}}}}} if the disk has less than this much free space.
This prevents the tool from filling up the disk with diagnostic data.

If the {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-dest}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dest}}}}} directory contains a previously captured sample of data,
the tool will measure its size and use that as an estimate of how much data is
likely to be gathered this time, too.  It will then be even more pessimistic,
and will refuse to collect data unless the disk has enough free space to hold
the sample and still have the desired amount of free space.  For example, if
you’d like 100MB of free space and the previous diagnostic sample consumed
100MB, the tool won’t collect any data unless the disk has 200MB free.

Valid size value suffixes are k, M, G, and T.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}disk\sphinxhyphen{}pct\sphinxhyphen{}free@\spxentry{\sphinxhyphen{}\sphinxhyphen{}disk\sphinxhyphen{}pct\sphinxhyphen{}free}}\index{\sphinxhyphen{}\sphinxhyphen{}disk\sphinxhyphen{}pct\sphinxhyphen{}free@\spxentry{\sphinxhyphen{}\sphinxhyphen{}disk\sphinxhyphen{}pct\sphinxhyphen{}free}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-disk-pct-free}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}disk\sphinxhyphen{}pct\sphinxhyphen{}free}}\sphinxcode{\sphinxupquote{}}}
type: int; default: 5

Do not {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-collect}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}collect}}}}} if the disk has less than this percent free space.
This prevents the tool from filling up the disk with diagnostic data.

This option works similarly to {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-disk-bytes-free}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}disk\sphinxhyphen{}bytes\sphinxhyphen{}free}}}}} but specifies a
percentage margin of safety instead of a bytes margin of safety.
The tool honors both options, and will not collect any data unless both
margins are satisfied.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}function@\spxentry{\sphinxhyphen{}\sphinxhyphen{}function}}\index{\sphinxhyphen{}\sphinxhyphen{}function@\spxentry{\sphinxhyphen{}\sphinxhyphen{}function}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-function}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}function}}\sphinxcode{\sphinxupquote{}}}
type: string; default: status

What to watch for the trigger.  The default value watches
\sphinxcode{\sphinxupquote{SHOW GLOBAL STATUS}}, but you can also watch \sphinxcode{\sphinxupquote{SHOW PROCESSLIST}} and specify
a file with your own custom code.  This function supplies the value of
{\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-variable}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}variable}}}}}, which is then compared against {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-threshold}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}threshold}}}}} to see if the
the trigger condition is met.  Additional options may be required as
well; see below. Possible values are:
\begin{itemize}
\item {} 
status

\end{itemize}
\begin{quote}

Watch \sphinxcode{\sphinxupquote{SHOW GLOBAL STATUS}} for the trigger.  The value of
{\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-variable}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}variable}}}}} then defines which status counter is the trigger.
\end{quote}
\begin{itemize}
\item {} 
processlist

\end{itemize}
\begin{quote}

Watch \sphinxcode{\sphinxupquote{SHOW FULL PROCESSLIST}} for the trigger.  The trigger
value is the count of processes whose {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-variable}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}variable}}}}} column matches the
{\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-match}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}match}}}}} option.  For example, to trigger {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-collect}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}collect}}}}} when more than
10 processes are in the “statistics” state, specify:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZhy{}\PYGZhy{}function processlist \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}variable State       \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}match statistics     \PYG{l+s+se}{\PYGZbs{}}
\PYGZhy{}\PYGZhy{}threshold \PYG{l+m}{10}
\end{sphinxVerbatim}
\end{quote}

In addition, you can specify a file that contains your custom trigger
function, written in Unix shell script.  This can be a wrapper that executes
anything you wish.  If the argument to {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-function}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}function}}}}} is a file, then it
takes precedence over built\sphinxhyphen{}in functions, so if there is a file in the working
directory named “status” or “processlist” then the tool will use that file
even though are valid built\sphinxhyphen{}in values.

The file works by providing a function called \sphinxcode{\sphinxupquote{trg\_plugin}}, and the tool
simply sources the file and executes the function.  For example, the file
might contain:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
trg\PYGZus{}plugin\PYG{o}{(}\PYG{o}{)} \PYG{o}{\PYGZob{}}
   mysql \PYG{n+nv}{\PYGZdl{}EXT\PYGZus{}ARGV} \PYGZhy{}e \PYG{l+s+s2}{\PYGZdq{}SHOW ENGINE INNODB STATUS\PYGZdq{}} \PYG{l+s+se}{\PYGZbs{}}
     \PYG{p}{|} grep \PYGZhy{}c \PYG{l+s+s2}{\PYGZdq{}has waited at\PYGZdq{}}
\PYG{o}{\PYGZcb{}}
\end{sphinxVerbatim}

This snippet will count the number of mutex waits inside InnoDB.  It
illustrates the general principle: the function must output a number, which is
then compared to {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-threshold}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}threshold}}}}} as usual.  The \sphinxcode{\sphinxupquote{\$EXT\_ARGV}} variable
contains the MariaDB options mentioned in the “SYNOPSIS” above.

The file should not alter the tool’s existing global variables.  Prefix any
file\sphinxhyphen{}specific global variables with “{\color{red}\bfseries{}PLUGIN\_}” or make them local.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}help@\spxentry{\sphinxhyphen{}\sphinxhyphen{}help}}\index{\sphinxhyphen{}\sphinxhyphen{}help@\spxentry{\sphinxhyphen{}\sphinxhyphen{}help}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-help}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}help}}\sphinxcode{\sphinxupquote{}}}
Print help and exit.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}host@\spxentry{\sphinxhyphen{}\sphinxhyphen{}host}}\index{\sphinxhyphen{}\sphinxhyphen{}host@\spxentry{\sphinxhyphen{}\sphinxhyphen{}host}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-host}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}host}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}h; type: string

Host to connect to.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}interval@\spxentry{\sphinxhyphen{}\sphinxhyphen{}interval}}\index{\sphinxhyphen{}\sphinxhyphen{}interval@\spxentry{\sphinxhyphen{}\sphinxhyphen{}interval}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-interval}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}interval}}\sphinxcode{\sphinxupquote{}}}
type: int; default: 1

How often to check the if trigger is true, in seconds.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}iterations@\spxentry{\sphinxhyphen{}\sphinxhyphen{}iterations}}\index{\sphinxhyphen{}\sphinxhyphen{}iterations@\spxentry{\sphinxhyphen{}\sphinxhyphen{}iterations}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-iterations}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}iterations}}\sphinxcode{\sphinxupquote{}}}
type: int

How many times to {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-collect}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}collect}}}}} diagnostic data.  By default, the tool
runs forever and collects data every time the trigger occurs.
Specify {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-iterations}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}iterations}}}}} to collect data a limited number of times.
This option is also useful with \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}stalk}} to collect data once and
exit, for example.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}log@\spxentry{\sphinxhyphen{}\sphinxhyphen{}log}}\index{\sphinxhyphen{}\sphinxhyphen{}log@\spxentry{\sphinxhyphen{}\sphinxhyphen{}log}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-log}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}log}}\sphinxcode{\sphinxupquote{}}}
type: string; default: /var/log/mariadb\sphinxhyphen{}stat.log

Print all output to this file when daemonized.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}match@\spxentry{\sphinxhyphen{}\sphinxhyphen{}match}}\index{\sphinxhyphen{}\sphinxhyphen{}match@\spxentry{\sphinxhyphen{}\sphinxhyphen{}match}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-match}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}match}}\sphinxcode{\sphinxupquote{}}}
type: string

The pattern to use when watching SHOW PROCESSLIST.  See {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-function}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}function}}}}}
for details.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}notify\sphinxhyphen{}by\sphinxhyphen{}email@\spxentry{\sphinxhyphen{}\sphinxhyphen{}notify\sphinxhyphen{}by\sphinxhyphen{}email}}\index{\sphinxhyphen{}\sphinxhyphen{}notify\sphinxhyphen{}by\sphinxhyphen{}email@\spxentry{\sphinxhyphen{}\sphinxhyphen{}notify\sphinxhyphen{}by\sphinxhyphen{}email}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-notify-by-email}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}notify\sphinxhyphen{}by\sphinxhyphen{}email}}\sphinxcode{\sphinxupquote{}}}
type: string

Send an email to these addresses for every {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-collect}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}collect}}}}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}password@\spxentry{\sphinxhyphen{}\sphinxhyphen{}password}}\index{\sphinxhyphen{}\sphinxhyphen{}password@\spxentry{\sphinxhyphen{}\sphinxhyphen{}password}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-password}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}password}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}p; type: string

Password to use when connecting.
If password contains commas they must be escaped with a backslash: “exam,ple”

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}pid@\spxentry{\sphinxhyphen{}\sphinxhyphen{}pid}}\index{\sphinxhyphen{}\sphinxhyphen{}pid@\spxentry{\sphinxhyphen{}\sphinxhyphen{}pid}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-pid}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}pid}}\sphinxcode{\sphinxupquote{}}}
type: string; default: /var/run/mariadb\sphinxhyphen{}stat.pid

Create the given PID file.  The tool won’t start if the PID file already
exists and the PID it contains is different than the current PID.  However,
if the PID file exists and the PID it contains is no longer running, the
tool will overwrite the PID file with the current PID.  The PID file is
removed automatically when the tool exits.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}plugin@\spxentry{\sphinxhyphen{}\sphinxhyphen{}plugin}}\index{\sphinxhyphen{}\sphinxhyphen{}plugin@\spxentry{\sphinxhyphen{}\sphinxhyphen{}plugin}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-plugin}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}plugin}}\sphinxcode{\sphinxupquote{}}}
type: string

Load a plugin to hook into the tool and extend is functionality.
The specified file does not need to be executable, nor does its first line
need to be shebang line.  It only needs to define one or more of these
Bash functions:

before\_stalk
\begin{quote}

Called before stalking.
\end{quote}

before\_collect
\begin{quote}

Called when the trigger occurs, before running a {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-collect}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}collect}}}}}
subprocesses in the background.
\end{quote}

after\_collect
\begin{quote}

Called after running a collector process.  The PID of the collector process
is passed as the first argument.  This hook is called before
\sphinxcode{\sphinxupquote{after\_collect\_sleep}}.
\end{quote}

after\_collect\_sleep
\begin{quote}

Called after sleeping {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-sleep}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}sleep}}}}} seconds for the collector process to finish.
This hook is called after \sphinxcode{\sphinxupquote{after\_collect}}.
\end{quote}

after\_interval\_sleep
\begin{quote}

Called after sleeping {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-interval}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}interval}}}}} seconds after each trigger check.
\end{quote}

after\_stalk
\begin{quote}

Called after stalking.  Since \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}stat}} stalks forever by default,
this hook is only called if {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-iterations}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}iterations}}}}} is specified.
\end{quote}

For example, a very simple plugin that touches a file when {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-collect}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}collect}}}}}
is triggered:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
before\PYGZus{}collect\PYG{o}{(}\PYG{o}{)} \PYG{o}{\PYGZob{}}
   touch /tmp/foo
\PYG{o}{\PYGZcb{}}
\end{sphinxVerbatim}

Since the plugin is completely sourced (imported) into the tool’s namespace,
be careful not to define other functions or global variables that already
exist in the tool.  You should prefix all plugin\sphinxhyphen{}specific functions and
global variables with \sphinxcode{\sphinxupquote{plugin\_}} or \sphinxcode{\sphinxupquote{PLUGIN\_}}.

Plugins have access to all command line options but they should not modify
them.  Each option is a global variable like \sphinxcode{\sphinxupquote{\$OPT\_DEST}} which corresponds
to {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-dest}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}dest}}}}}.  Therefore, the global variable for each command line option
is \sphinxcode{\sphinxupquote{OPT\_}} plus the option name in all caps with hyphens replaced by
underscores.

Plugins can stop the tool by setting the global variable \sphinxcode{\sphinxupquote{OKTORUN}}
to \sphinxcode{\sphinxupquote{1}}.  In this case, the global variable \sphinxcode{\sphinxupquote{EXIT\_REASON}} should also
be set to indicate why the tool was stopped.

Plugin writers should keep in mind that the file destination prefix currently
in use should be accessed through the \sphinxcode{\sphinxupquote{\$prefix}} variable, rather than
\sphinxcode{\sphinxupquote{\$OPT\_PREFIX}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}mariadb\sphinxhyphen{}only@\spxentry{\sphinxhyphen{}\sphinxhyphen{}mariadb\sphinxhyphen{}only}}\index{\sphinxhyphen{}\sphinxhyphen{}mariadb\sphinxhyphen{}only@\spxentry{\sphinxhyphen{}\sphinxhyphen{}mariadb\sphinxhyphen{}only}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-mariadb-only}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}mariadb\sphinxhyphen{}only}}\sphinxcode{\sphinxupquote{}}}
Trigger only MariaDB related captures, ignoring all others. The only not MariaDB related
value being collected is the disk space, because it is needed to calculate the
available free disk space to write the result files.
This option is useful for RDS instances.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}port@\spxentry{\sphinxhyphen{}\sphinxhyphen{}port}}\index{\sphinxhyphen{}\sphinxhyphen{}port@\spxentry{\sphinxhyphen{}\sphinxhyphen{}port}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-port}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}port}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}P; type: int

Port number to use for connection.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}prefix@\spxentry{\sphinxhyphen{}\sphinxhyphen{}prefix}}\index{\sphinxhyphen{}\sphinxhyphen{}prefix@\spxentry{\sphinxhyphen{}\sphinxhyphen{}prefix}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-prefix}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}prefix}}\sphinxcode{\sphinxupquote{}}}
type: string

The filename prefix for diagnostic samples.  By default, all files created
by the same {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-collect}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}collect}}}}} instance have a timestamp prefix based on the current
local time, like \sphinxcode{\sphinxupquote{2011\_12\_06\_14\_02\_02}}, which is December 6, 2011 at 14:02:02.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}retention\sphinxhyphen{}count@\spxentry{\sphinxhyphen{}\sphinxhyphen{}retention\sphinxhyphen{}count}}\index{\sphinxhyphen{}\sphinxhyphen{}retention\sphinxhyphen{}count@\spxentry{\sphinxhyphen{}\sphinxhyphen{}retention\sphinxhyphen{}count}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-retention-count}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}retention\sphinxhyphen{}count}}\sphinxcode{\sphinxupquote{}}}
type: int; default: 0

Keep the data for the last N runs. If N \textgreater{} 0, the program will keep the data for the last
N runs and will delete the older data.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}retention\sphinxhyphen{}size@\spxentry{\sphinxhyphen{}\sphinxhyphen{}retention\sphinxhyphen{}size}}\index{\sphinxhyphen{}\sphinxhyphen{}retention\sphinxhyphen{}size@\spxentry{\sphinxhyphen{}\sphinxhyphen{}retention\sphinxhyphen{}size}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-retention-size}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}retention\sphinxhyphen{}size}}\sphinxcode{\sphinxupquote{}}}
type: int; default: 0

Keep up to \textendash{}retention\sphinxhyphen{}size MB of data. It will keep at least 1 run even if the size is bigger
than the specified in this parameter

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}retention\sphinxhyphen{}time@\spxentry{\sphinxhyphen{}\sphinxhyphen{}retention\sphinxhyphen{}time}}\index{\sphinxhyphen{}\sphinxhyphen{}retention\sphinxhyphen{}time@\spxentry{\sphinxhyphen{}\sphinxhyphen{}retention\sphinxhyphen{}time}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-retention-time}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}retention\sphinxhyphen{}time}}\sphinxcode{\sphinxupquote{}}}
type: int; default: 30

Number of days to retain collected samples.  Any samples that are older will be
purged.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time@\spxentry{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time}}\index{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time@\spxentry{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-run-time}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time}}\sphinxcode{\sphinxupquote{}}}
type: int; default: 30

How long to {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-collect}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}collect}}}}} diagnostic data when the trigger occurs.
The value is in seconds and should not be longer than {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-sleep}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}sleep}}}}}.  It is
usually not necessary to change this; if the default 30 seconds doesn’t
collect enough data, running longer is not likely to help because the system
or MariaDB server is probably too busy to respond.  In fact, in many cases a
shorter collection period is appropriate.

This value is used two other times.  After collecting, the collect subprocess
will wait another {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-run-time}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time}}}}} seconds for its commands to finish.  Some
commands can take awhile if the system is running very slowly (which can
likely be the case given that a collection was triggered).  Since empty files
are deleted, the extra wait gives commands time to finish and write their
data.  The value is potentially used again just before the tool exits to wait
again for any collect subprocesses to finish.  In most cases this won’t
happen because of the aforementioned extra wait.  If it happens, the tool
will log “Waiting up to N seconds for subprocesses to finish…” where N is
three times {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-run-time}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time}}}}}.  In both cases, after waiting, the tool kills
all of its subprocesses.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}sleep@\spxentry{\sphinxhyphen{}\sphinxhyphen{}sleep}}\index{\sphinxhyphen{}\sphinxhyphen{}sleep@\spxentry{\sphinxhyphen{}\sphinxhyphen{}sleep}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-sleep}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}sleep}}\sphinxcode{\sphinxupquote{}}}
type: int; default: 300

How long to sleep after {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-collect}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}collect}}}}}.  This prevents the tool
from triggering continuously, which might be a problem if the collection process is intrusive.
It also prevents filling up the disk or gathering too much data to analyze
reasonably.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}sleep\sphinxhyphen{}collect@\spxentry{\sphinxhyphen{}\sphinxhyphen{}sleep\sphinxhyphen{}collect}}\index{\sphinxhyphen{}\sphinxhyphen{}sleep\sphinxhyphen{}collect@\spxentry{\sphinxhyphen{}\sphinxhyphen{}sleep\sphinxhyphen{}collect}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-sleep-collect}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}sleep\sphinxhyphen{}collect}}\sphinxcode{\sphinxupquote{}}}
type: int; default: 1

How long to sleep between collection loop cycles.  This is useful with
\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}stalk}} to do long collections.  For example, to collect data every
minute for an hour, specify: \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}stalk \sphinxhyphen{}\sphinxhyphen{}run\sphinxhyphen{}time 3600 \sphinxhyphen{}\sphinxhyphen{}sleep\sphinxhyphen{}collect 60}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}socket@\spxentry{\sphinxhyphen{}\sphinxhyphen{}socket}}\index{\sphinxhyphen{}\sphinxhyphen{}socket@\spxentry{\sphinxhyphen{}\sphinxhyphen{}socket}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-socket}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}socket}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}S; type: string

Socket file to use for connection.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}stalk@\spxentry{\sphinxhyphen{}\sphinxhyphen{}stalk}}\index{\sphinxhyphen{}\sphinxhyphen{}stalk@\spxentry{\sphinxhyphen{}\sphinxhyphen{}stalk}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-stalk}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}stalk}}\sphinxcode{\sphinxupquote{}}}
default: yes; negatable: yes

Watch the server and wait for the trigger to occur.  Specify \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}stalk}}
to collect diagnostic data immediately, that is, without waiting for the
trigger to occur.  You probably also want to specify values for
{\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-interval}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}interval}}}}}, {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-iterations}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}iterations}}}}}, and {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-sleep}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}sleep}}}}}.  For example, to
immediately collect data for 1 minute then exit, specify:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZhy{}\PYGZhy{}no\PYGZhy{}stalk \PYGZhy{}\PYGZhy{}run\PYGZhy{}time \PYG{l+m}{60} \PYGZhy{}\PYGZhy{}iterations \PYG{l+m}{1}
\end{sphinxVerbatim}

{\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-cycles}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}cycles}}}}}, {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-daemonize}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}daemonize}}}}}, {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-log}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}log}}}}} and {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-pid}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}pid}}}}} have no effect
with \sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}no\sphinxhyphen{}stalk}}.  Safeguard options, like {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-disk-bytes-free}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}disk\sphinxhyphen{}bytes\sphinxhyphen{}free}}}}} and
{\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-disk-pct-free}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}disk\sphinxhyphen{}pct\sphinxhyphen{}free}}}}}, are still respected.

See also {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-collect}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}collect}}}}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}threshold@\spxentry{\sphinxhyphen{}\sphinxhyphen{}threshold}}\index{\sphinxhyphen{}\sphinxhyphen{}threshold@\spxentry{\sphinxhyphen{}\sphinxhyphen{}threshold}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-threshold}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}threshold}}\sphinxcode{\sphinxupquote{}}}
type: int; default: 25

The maximum acceptable value for {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-variable}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}variable}}}}}.  {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-collect}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}collect}}}}} is
triggered when the value of {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-variable}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}variable}}}}} is greater than {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-threshold}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}threshold}}}}}
for {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-cycles}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}cycles}}}}} many times.  Currently, there is no way to define a lower
threshold to check for a {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-variable}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}variable}}}}} value that is too low.

See also {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-function}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}function}}}}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}user@\spxentry{\sphinxhyphen{}\sphinxhyphen{}user}}\index{\sphinxhyphen{}\sphinxhyphen{}user@\spxentry{\sphinxhyphen{}\sphinxhyphen{}user}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-user}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}user}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}u; type: string

User for login if not current user.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}variable@\spxentry{\sphinxhyphen{}\sphinxhyphen{}variable}}\index{\sphinxhyphen{}\sphinxhyphen{}variable@\spxentry{\sphinxhyphen{}\sphinxhyphen{}variable}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-variable}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}variable}}\sphinxcode{\sphinxupquote{}}}
type: string; default: Threads\_running

The variable to compare against {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-threshold}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}threshold}}}}}.  See also {\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-function}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}function}}}}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}verbose@\spxentry{\sphinxhyphen{}\sphinxhyphen{}verbose}}\index{\sphinxhyphen{}\sphinxhyphen{}verbose@\spxentry{\sphinxhyphen{}\sphinxhyphen{}verbose}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-verbose}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}verbose}}\sphinxcode{\sphinxupquote{}}}
type: int; default: 2

Print more or less information while running.  Since the tool is designed
to be a long\sphinxhyphen{}running daemon, the default verbosity level only prints the
most important information.  If you run the tool interactively, you may
want to use a higher verbosity level.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
LEVEL \PYG{n+nv}{PRINTS}
\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=} \PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}
\PYG{l+m}{0}     Errors
\PYG{l+m}{1}     Warnings
\PYG{l+m}{2}     Matching triggers and collection info
\PYG{l+m}{3}     Non\PYGZhy{}matching triggers
\end{sphinxVerbatim}

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}!\sphinxhyphen{}\sphinxhyphen{}version@\spxentry{\sphinxhyphen{}\sphinxhyphen{}version}}\index{\sphinxhyphen{}\sphinxhyphen{}version@\spxentry{\sphinxhyphen{}\sphinxhyphen{}version}!mariadb\sphinxhyphen{}stat command line option@\spxentry{mariadb\sphinxhyphen{}stat command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat:cmdoption-mariadb-stat-version}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}version}}\sphinxcode{\sphinxupquote{}}}
Print tool’s version and exit.

\end{fulllineitems}



\section{ENVIRONMENT}
\label{\detokenize{mariadb-stat:environment}}
This tool does not require any environment variables for configuration,
although it can be influenced to work differently by through several
variables.  Keep in mind that these are expert settings, and should not
be used in most cases.

Specifically, the variables that can be set are:

CMD\_GDB

CMD\_IOSTAT

CMD\_MPSTAT

CMD\_MYSQL

CMD\_MYSQLADMIN

CMD\_OPCONTROL

CMD\_OPREPORT

CMD\_PMAP

CMD\_STRACE

CMD\_SYSCTL

CMD\_TCPDUMP

CMD\_VMSTAT

For example, during collection iostat is called with a \sphinxhyphen{}dx argument, but
because you have an NFS partition, you also need the \sphinxhyphen{}n flag there.  Instead
of editing the source, you can call \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}stat}} as

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nv}{CMD\PYGZus{}IOSTAT}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}iostat \PYGZhy{}n\PYGZdq{}} mariadb\PYGZhy{}stat ...
\end{sphinxVerbatim}

which will do exactly what you need.  Combined with the plugin hooks, this
gives you a fine\sphinxhyphen{}grained control of what the tool does.

It is possible to enable \sphinxcode{\sphinxupquote{debug}} mode in mysqladmin specifying:

\sphinxcode{\sphinxupquote{CMD\_MYSQLADMIN=\textquotesingle{}mysqladmin debug\textquotesingle{} :program:\textasciigrave{}mariadb\sphinxhyphen{}stat\textasciigrave{} params ...}}


\section{SYSTEM REQUIREMENTS}
\label{\detokenize{mariadb-stat:system-requirements}}
This tool requires Bash v3 or newer.  Certain options require other programs:

{\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-collect-gdb}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}collect\sphinxhyphen{}gdb}}}}} requires \sphinxcode{\sphinxupquote{gdb}}

{\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-collect-oprofile}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}collect\sphinxhyphen{}oprofile}}}}} requires \sphinxcode{\sphinxupquote{opcontrol}} and \sphinxcode{\sphinxupquote{opreport}}

{\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-collect-strace}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}collect\sphinxhyphen{}strace}}}}} requires \sphinxcode{\sphinxupquote{strace}}

{\hyperref[\detokenize{mariadb-stat:cmdoption-mariadb-stat-collect-tcpdump}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}collect\sphinxhyphen{}tcpdump}}}}} requires \sphinxcode{\sphinxupquote{tcpdump}}


\section{AUTHORS}
\label{\detokenize{mariadb-stat:authors}}
Cole Busby, Baron Schwartz, Justin Swanhart, Fernando Ipar, Daniel Nichter,
and Brian Fraser


\section{ABOUT THIS MARIADB TOOL}
\label{\detokenize{mariadb-stat:about-this-mariadb-tool}}
This tool is part of MariaDB client tools. This MariaDB Tool was forked from
Percona Toolkit’s pt\sphinxhyphen{}stalk in August, 2019. Percona Toolkit was forked from two
projects in June, 2011: Maatkit and Aspersa.  Those projects were created by
Baron Schwartz and primarily developed by him and Daniel Nichter.


\section{COPYRIGHT, LICENSE, AND WARRANTY}
\label{\detokenize{mariadb-stat:copyright-license-and-warranty}}
This program is copyright 2019\sphinxhyphen{}2021 MariaDB Corporation and/or its affiliates,
2011\sphinxhyphen{}2018 Percona LLC and/or its affiliates, 2010\sphinxhyphen{}2011 Baron Schwartz.

THIS PROGRAM IS PROVIDED “AS IS” AND WITHOUT ANY EXPRESS OR IMPLIED
WARRANTIES, INCLUDING, WITHOUT LIMITATION, THE IMPLIED WARRANTIES OF
MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.

This program is free software; you can redistribute it and/or modify it under
the terms of the GNU General Public License as published by the Free Software
Foundation, version 2; OR the Perl Artistic License.  On UNIX and similar
systems, you can issue \textasciigrave{}man perlgpl’ or \textasciigrave{}man perlartistic’ to read these
licenses.

You should have received a copy of the GNU General Public License along with
this program; if not, write to the Free Software Foundation, Inc., 59 Temple
Place, Suite 330, Boston, MA  02111\sphinxhyphen{}1307  USA.


\section{VERSION}
\label{\detokenize{mariadb-stat:version}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}stat}} 6.0.0rc


\chapter{\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}stat\sphinxhyphen{}browser}}}
\label{\detokenize{mariadb-stat-browser:mariadb-stat-browser}}\label{\detokenize{mariadb-stat-browser::doc}}

\section{NAME}
\label{\detokenize{mariadb-stat-browser:name}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}stat\sphinxhyphen{}browser}} \sphinxhyphen{} Browses files created by mariadb\sphinxhyphen{}stat.


\section{SYNOPSIS}
\label{\detokenize{mariadb-stat-browser:synopsis}}

\subsection{Usage}
\label{\detokenize{mariadb-stat-browser:usage}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{mariadb}\PYG{o}{\PYGZhy{}}\PYG{n}{stat}\PYG{o}{\PYGZhy{}}\PYG{n}{browser} \PYG{n}{FILE}\PYG{o}{|}\PYG{n}{PREFIX}\PYG{o}{|}\PYG{n}{DIRECTORY}
\end{sphinxVerbatim}

\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}stat\sphinxhyphen{}browser}} browses files created by mariadb\sphinxhyphen{}stat.  If no options are given,
the tool browses all mariadb\sphinxhyphen{}stat files in \sphinxcode{\sphinxupquote{/var/lib/mariadb\sphinxhyphen{}stat}} if that directory
exists, else the current working directory is used.  If a FILE is given,
the tool browses files with the same prefix in the given file’s directory.
If a PREFIX is given, the tool browses files in \sphinxcode{\sphinxupquote{/var/lib/mariadb\sphinxhyphen{}stat}}
(or the current working directory) with the same prefix.  If a DIRECTORY
is given, the tool browses all mariadb\sphinxhyphen{}stat files in it.


\section{RISKS}
\label{\detokenize{mariadb-stat-browser:risks}}
Percona Toolkit is mature, proven in the real world, and well tested,
but all database tools can pose a risk to the system and the database
server.  Before using this tool, please:
\begin{itemize}
\item {} 
Read the tool’s documentation

\item {} 
Review the tool’s known “BUGS”

\item {} 
Test the tool on a non\sphinxhyphen{}production server

\item {} 
Backup your production server and verify the backups

\end{itemize}


\section{DESCRIPTION}
\label{\detokenize{mariadb-stat-browser:description}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}stat\sphinxhyphen{}browser}} downloads other tools that it might need, such as mariadb\sphinxhyphen{}iostat,
and then makes a list of the unique timestamp prefixes of all the files in
the directory, as written by the mariadb\sphinxhyphen{}stat tool.  If the user specified
a timestamp on the command line, then it begins with that sample of data;
otherwise it begins by showing a list of the timestamps and prompting for
a selection.  Thereafter, it displays a summary of the selected sample, and
the user can navigate and inspect with keystrokes.  The keystroke commands
you can use are as follows:
\begin{itemize}
\item {} 
d

\end{itemize}
\begin{quote}

Sets the action to start the mariadb\sphinxhyphen{}iostat tool on the sample’s disk
performance statistics.
\end{quote}
\begin{itemize}
\item {} 
i

\end{itemize}
\begin{quote}

Sets the action to view the first INNODB STATUS sample in less.
\end{quote}
\begin{itemize}
\item {} 
m

\end{itemize}
\begin{quote}

Displays the first 4 samples of SHOW STATUS counters side by side with the
mariadb\sphinxhyphen{}status\sphinxhyphen{}diff tool.
\end{quote}
\begin{itemize}
\item {} 
n

\end{itemize}
\begin{quote}

Summarizes the first sample of netstat data in two ways: by originating host,
and by connection state.
\end{quote}
\begin{itemize}
\item {} 
j

\end{itemize}
\begin{quote}

Select the next timestamp as the active sample.
\end{quote}
\begin{itemize}
\item {} 
k

\end{itemize}
\begin{quote}

Select the previous timestamp as the active sample.
\end{quote}
\begin{itemize}
\item {} 
q

\end{itemize}
\begin{quote}

Quit the program.
\end{quote}
\begin{itemize}
\item {} 
1

\end{itemize}
\begin{quote}

Sets the action for each sample to the default, which is to view a summary
of the sample.
\end{quote}
\begin{itemize}
\item {} 
0

\end{itemize}
\begin{quote}

Sets the action to just list the files in the sample.
\end{quote}
\begin{itemize}
\item {} \begin{itemize}
\item {} 
\end{itemize}

\end{itemize}
\begin{quote}

Sets the action to view all of the sample’s files in the less program.
\end{quote}


\section{OPTIONS}
\label{\detokenize{mariadb-stat-browser:options}}\index{mariadb\sphinxhyphen{}stat\sphinxhyphen{}browser command line option@\spxentry{mariadb\sphinxhyphen{}stat\sphinxhyphen{}browser command line option}!\sphinxhyphen{}\sphinxhyphen{}help@\spxentry{\sphinxhyphen{}\sphinxhyphen{}help}}\index{\sphinxhyphen{}\sphinxhyphen{}help@\spxentry{\sphinxhyphen{}\sphinxhyphen{}help}!mariadb\sphinxhyphen{}stat\sphinxhyphen{}browser command line option@\spxentry{mariadb\sphinxhyphen{}stat\sphinxhyphen{}browser command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat-browser:cmdoption-mariadb-stat-browser-help}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}help}}\sphinxcode{\sphinxupquote{}}}
Show help and exit.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}stat\sphinxhyphen{}browser command line option@\spxentry{mariadb\sphinxhyphen{}stat\sphinxhyphen{}browser command line option}!\sphinxhyphen{}\sphinxhyphen{}version@\spxentry{\sphinxhyphen{}\sphinxhyphen{}version}}\index{\sphinxhyphen{}\sphinxhyphen{}version@\spxentry{\sphinxhyphen{}\sphinxhyphen{}version}!mariadb\sphinxhyphen{}stat\sphinxhyphen{}browser command line option@\spxentry{mariadb\sphinxhyphen{}stat\sphinxhyphen{}browser command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-stat-browser:cmdoption-mariadb-stat-browser-version}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}version}}\sphinxcode{\sphinxupquote{}}}
Show version and exit.

\end{fulllineitems}



\section{ENVIRONMENT}
\label{\detokenize{mariadb-stat-browser:environment}}
This tool does not use any environment variables.


\section{SYSTEM REQUIREMENTS}
\label{\detokenize{mariadb-stat-browser:system-requirements}}
This tool requires Bash v3 and the following programs: mariadb\sphinxhyphen{}iostat, mariadb\sphinxhyphen{}stacktrace,
mariadb\sphinxhyphen{}status\sphinxhyphen{}diff, and mariadb\sphinxhyphen{}align\sphinxhyphen{}output.  If these programs are not in your PATH,
they will be fetched from the Internet if curl is available.


\section{AUTHORS}
\label{\detokenize{mariadb-stat-browser:authors}}
Cole Busby, Baron Schwartz


\section{ABOUT THIS MARIADB TOOL}
\label{\detokenize{mariadb-stat-browser:about-this-mariadb-tool}}
This tool is part of MariaDB client tools. This MariaDB Tool was forked from
Percona Toolkit’s pt\sphinxhyphen{}stalk in August, 2019. Percona Toolkit was forked from two
projects in June, 2011: Maatkit and Aspersa.  Those projects were created by
Baron Schwartz and primarily developed by him and Daniel Nichter.


\section{COPYRIGHT, LICENSE, AND WARRANTY}
\label{\detokenize{mariadb-stat-browser:copyright-license-and-warranty}}
This program is copyright 2019\sphinxhyphen{}2021 MariaDB Corporation and/or its affiliates,
2011\sphinxhyphen{}2018 Percona LLC and/or its affiliates, 2010\sphinxhyphen{}2011 Baron Schwartz.

THIS PROGRAM IS PROVIDED “AS IS” AND WITHOUT ANY EXPRESS OR IMPLIED
WARRANTIES, INCLUDING, WITHOUT LIMITATION, THE IMPLIED WARRANTIES OF
MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.

This program is free software; you can redistribute it and/or modify it under
the terms of the GNU General Public License as published by the Free Software
Foundation, version 2; OR the Perl Artistic License.  On UNIX and similar
systems, you can issue \textasciigrave{}man perlgpl’ or \textasciigrave{}man perlartistic’ to read these
licenses.

You should have received a copy of the GNU General Public License along with
this program; if not, write to the Free Software Foundation, Inc., 59 Temple
Place, Suite 330, Boston, MA  02111\sphinxhyphen{}1307  USA.


\section{VERSION}
\label{\detokenize{mariadb-stat-browser:version}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}stat\sphinxhyphen{}browser}} 6.0.0rc


\chapter{\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}status\sphinxhyphen{}diff}}}
\label{\detokenize{mariadb-status-diff:mariadb-status-diff}}\label{\detokenize{mariadb-status-diff::doc}}

\section{NAME}
\label{\detokenize{mariadb-status-diff:name}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}status\sphinxhyphen{}diff}} \sphinxhyphen{} Look at many samples of MariaDB \sphinxcode{\sphinxupquote{SHOW GLOBAL STATUS}} side\sphinxhyphen{}by\sphinxhyphen{}side.


\section{SYNOPSIS}
\label{\detokenize{mariadb-status-diff:synopsis}}

\subsection{Usage}
\label{\detokenize{mariadb-status-diff:usage}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{mariadb}\PYG{o}{\PYGZhy{}}\PYG{n}{status}\PYG{o}{\PYGZhy{}}\PYG{n}{diff} \PYG{p}{[}\PYG{n}{OPTIONS}\PYG{p}{]} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{n}{COMMAND}
\end{sphinxVerbatim}

\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}status\sphinxhyphen{}diff}} columnizes repeated output from a program like mariadb\sphinxhyphen{}admin extended.

Get output from \sphinxcode{\sphinxupquote{mariadb\sphinxhyphen{}admin}}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
mariadb\PYGZhy{}status\PYGZhy{}diff \PYGZhy{}r \PYGZhy{}\PYGZhy{} mariadb\PYGZhy{}admin ext \PYGZhy{}i10 \PYGZhy{}c3
\end{sphinxVerbatim}

Get output from a file:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
mariadb\PYGZhy{}status\PYGZhy{}diff \PYGZhy{}r \PYGZhy{}\PYGZhy{} cat mariadb\PYGZhy{}admin\PYGZhy{}output.txt
\end{sphinxVerbatim}


\section{RISKS}
\label{\detokenize{mariadb-status-diff:risks}}
pt\sphinxhyphen{}mext is mature, proven in the real world, and well tested,
but all database tools can pose a risk to the system and the database
server.  Before using this tool, please:
\begin{itemize}
\item {} 
Read the tool’s documentation

\item {} 
Review the tool’s known “BUGS”

\item {} 
Test the tool on a non\sphinxhyphen{}production server

\item {} 
Backup your production server and verify the backups

\end{itemize}


\section{DESCRIPTION}
\label{\detokenize{mariadb-status-diff:description}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}status\sphinxhyphen{}diff}} executes the \sphinxcode{\sphinxupquote{COMMAND}} you specify, and reads through the result one
line at a time.  It places each line into a temporary file.  When it finds a
blank line, it assumes that a new sample of SHOW GLOBAL STATUS is starting,
and it creates a new temporary file.  At the end of this process, it has a
number of temporary files.  It joins the temporary files together side\sphinxhyphen{}by\sphinxhyphen{}side
and prints the result.  If {\hyperref[\detokenize{mariadb-status-diff:cmdoption-mariadb-status-diff-relative}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}relative}}}}} option is given, it first subtracts
each sample from the one after it before printing results.


\section{OPTIONS}
\label{\detokenize{mariadb-status-diff:options}}\index{mariadb\sphinxhyphen{}status\sphinxhyphen{}diff command line option@\spxentry{mariadb\sphinxhyphen{}status\sphinxhyphen{}diff command line option}!\sphinxhyphen{}\sphinxhyphen{}help@\spxentry{\sphinxhyphen{}\sphinxhyphen{}help}}\index{\sphinxhyphen{}\sphinxhyphen{}help@\spxentry{\sphinxhyphen{}\sphinxhyphen{}help}!mariadb\sphinxhyphen{}status\sphinxhyphen{}diff command line option@\spxentry{mariadb\sphinxhyphen{}status\sphinxhyphen{}diff command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-status-diff:cmdoption-mariadb-status-diff-help}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}help}}\sphinxcode{\sphinxupquote{}}}
Show help and exit.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}status\sphinxhyphen{}diff command line option@\spxentry{mariadb\sphinxhyphen{}status\sphinxhyphen{}diff command line option}!\sphinxhyphen{}\sphinxhyphen{}relative@\spxentry{\sphinxhyphen{}\sphinxhyphen{}relative}}\index{\sphinxhyphen{}\sphinxhyphen{}relative@\spxentry{\sphinxhyphen{}\sphinxhyphen{}relative}!mariadb\sphinxhyphen{}status\sphinxhyphen{}diff command line option@\spxentry{mariadb\sphinxhyphen{}status\sphinxhyphen{}diff command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-status-diff:cmdoption-mariadb-status-diff-relative}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}relative}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}r

Subtract each column from the previous column.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}status\sphinxhyphen{}diff command line option@\spxentry{mariadb\sphinxhyphen{}status\sphinxhyphen{}diff command line option}!\sphinxhyphen{}\sphinxhyphen{}version@\spxentry{\sphinxhyphen{}\sphinxhyphen{}version}}\index{\sphinxhyphen{}\sphinxhyphen{}version@\spxentry{\sphinxhyphen{}\sphinxhyphen{}version}!mariadb\sphinxhyphen{}status\sphinxhyphen{}diff command line option@\spxentry{mariadb\sphinxhyphen{}status\sphinxhyphen{}diff command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-status-diff:cmdoption-mariadb-status-diff-version}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}version}}\sphinxcode{\sphinxupquote{}}}
Show version and exit.

\end{fulllineitems}



\section{ENVIRONMENT}
\label{\detokenize{mariadb-status-diff:environment}}
This tool does not use any environment variables.


\section{SYSTEM REQUIREMENTS}
\label{\detokenize{mariadb-status-diff:system-requirements}}
This tool requires the Bourne shell (\sphinxstyleemphasis{/bin/sh}) and the seq program.


\section{AUTHORS}
\label{\detokenize{mariadb-status-diff:authors}}
Cole Busby, Baron Schwartz


\section{ABOUT THIS MARIADB TOOL}
\label{\detokenize{mariadb-status-diff:about-this-mariadb-tool}}
This tool is part of MariaDB client tools. This MariaDB Tool was forked from
Percona Toolkit’s pt\sphinxhyphen{}mext in August, 2019. Percona Toolkit was forked from two
projects in June, 2011: Maatkit and Aspersa.  Those projects were created by
Baron Schwartz and primarily developed by him and Daniel Nichter.


\section{COPYRIGHT, LICENSE, AND WARRANTY}
\label{\detokenize{mariadb-status-diff:copyright-license-and-warranty}}
This program is copyright 2019\sphinxhyphen{}2021 MariaDB Corporation and/or its affiliates,
2011\sphinxhyphen{}2018 Percona LLC and/or its affiliates, 2010\sphinxhyphen{}2011 Baron Schwartz.

THIS PROGRAM IS PROVIDED “AS IS” AND WITHOUT ANY EXPRESS OR IMPLIED
WARRANTIES, INCLUDING, WITHOUT LIMITATION, THE IMPLIED WARRANTIES OF
MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.

This program is free software; you can redistribute it and/or modify it under
the terms of the GNU General Public License as published by the Free Software
Foundation, version 2; OR the Perl Artistic License.  On UNIX and similar
systems, you can issue \textasciigrave{}man perlgpl’ or \textasciigrave{}man perlartistic’ to read these
licenses.

You should have received a copy of the GNU General Public License along with
this program; if not, write to the Free Software Foundation, Inc., 59 Temple
Place, Suite 330, Boston, MA  02111\sphinxhyphen{}1307  USA.


\section{VERSION}
\label{\detokenize{mariadb-status-diff:version}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}status\sphinxhyphen{}diff}} 6.0.0rc


\chapter{\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}summary}}}
\label{\detokenize{mariadb-summary:mariadb-summary}}\label{\detokenize{mariadb-summary::doc}}

\section{NAME}
\label{\detokenize{mariadb-summary:name}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}summary}} \sphinxhyphen{} Summarize system information nicely.


\section{SYNOPSIS}
\label{\detokenize{mariadb-summary:synopsis}}

\subsection{Usage}
\label{\detokenize{mariadb-summary:usage}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{mariadb}\PYG{o}{\PYGZhy{}}\PYG{n}{summary}
\end{sphinxVerbatim}

\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}summary}} conveniently summarizes the status and configuration of
a database and its underlying server. It is not a tuning tool or diagnosis tool.
It produces a report that is easy to diff and can be pasted into emails without
losing the formatting. This tool works well on many types of Unix systems.


\section{RISKS}
\label{\detokenize{mariadb-summary:risks}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}summary}} is mature, proven in the real world, and well tested,
but all database tools can pose a risk to the system and the database
server.  Before using this tool, please:
\begin{itemize}
\item {} 
Read the tool’s documentation

\item {} 
Test the tool on a non\sphinxhyphen{}production server

\item {} 
Backup your production server and verify the backups

\end{itemize}


\section{DESCRIPTION}
\label{\detokenize{mariadb-summary:description}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}summary}} runs mariadb\sphinxhyphen{}system\sphinxhyphen{}summary and mariadb\sphinxhyphen{}database\sphinxhyphen{}summary together.

These tools run a large variety of commands to inspect system and MariaDB
status and configuration.

It works best when executed as a privileged user, but will also work without
privileges, although some output might not be possible to generate without root.


\section{OUTPUT}
\label{\detokenize{mariadb-summary:output}}
See mariadb\sphinxhyphen{}system\sphinxhyphen{}summary and mariadb\sphinxhyphen{}database\sphinxhyphen{}summary documentation for output
details.


\section{OPTIONS}
\label{\detokenize{mariadb-summary:options}}\index{mariadb\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}all\sphinxhyphen{}databases@\spxentry{\sphinxhyphen{}\sphinxhyphen{}all\sphinxhyphen{}databases}}\index{\sphinxhyphen{}\sphinxhyphen{}all\sphinxhyphen{}databases@\spxentry{\sphinxhyphen{}\sphinxhyphen{}all\sphinxhyphen{}databases}!mariadb\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-summary:cmdoption-mariadb-summary-all-databases}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}all\sphinxhyphen{}databases}}\sphinxcode{\sphinxupquote{}}}
mariadb\sphinxhyphen{}dump and summarize all databases.  See {\hyperref[\detokenize{mariadb-summary:cmdoption-mariadb-summary-databases}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}databases}}}}}.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass}}\index{\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass@\spxentry{\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass}!mariadb\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-summary:cmdoption-mariadb-summary-ask-pass}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}ask\sphinxhyphen{}pass}}\sphinxcode{\sphinxupquote{}}}
Prompt for a password when connecting to MariaDB.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}config@\spxentry{\sphinxhyphen{}\sphinxhyphen{}config}}\index{\sphinxhyphen{}\sphinxhyphen{}config@\spxentry{\sphinxhyphen{}\sphinxhyphen{}config}!mariadb\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-summary:cmdoption-mariadb-summary-config}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}config}}\sphinxcode{\sphinxupquote{}}}
type: string

Read this comma\sphinxhyphen{}separated list of config files.  If specified, this must be the
first option on the command line.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}databases@\spxentry{\sphinxhyphen{}\sphinxhyphen{}databases}}\index{\sphinxhyphen{}\sphinxhyphen{}databases@\spxentry{\sphinxhyphen{}\sphinxhyphen{}databases}!mariadb\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-summary:cmdoption-mariadb-summary-databases}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}databases}}\sphinxcode{\sphinxupquote{}}}
type: string

mariadb\sphinxhyphen{}dump and summarize this comma\sphinxhyphen{}separated list of databases.  Specify
{\hyperref[\detokenize{mariadb-summary:cmdoption-mariadb-summary-all-databases}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}all\sphinxhyphen{}databases}}}}} instead if you want to dump and summary all databases.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}defaults\sphinxhyphen{}file@\spxentry{\sphinxhyphen{}\sphinxhyphen{}defaults\sphinxhyphen{}file}}\index{\sphinxhyphen{}\sphinxhyphen{}defaults\sphinxhyphen{}file@\spxentry{\sphinxhyphen{}\sphinxhyphen{}defaults\sphinxhyphen{}file}!mariadb\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-summary:cmdoption-mariadb-summary-defaults-file}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}defaults\sphinxhyphen{}file}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}F; type: string

Only read mariadb options from the given file.  You must give an absolute
pathname.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}help@\spxentry{\sphinxhyphen{}\sphinxhyphen{}help}}\index{\sphinxhyphen{}\sphinxhyphen{}help@\spxentry{\sphinxhyphen{}\sphinxhyphen{}help}!mariadb\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-summary:cmdoption-mariadb-summary-help}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}help}}\sphinxcode{\sphinxupquote{}}}
Print help and exit.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}host@\spxentry{\sphinxhyphen{}\sphinxhyphen{}host}}\index{\sphinxhyphen{}\sphinxhyphen{}host@\spxentry{\sphinxhyphen{}\sphinxhyphen{}host}!mariadb\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-summary:cmdoption-mariadb-summary-host}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}host}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}h; type: string

Host to connect to.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}password@\spxentry{\sphinxhyphen{}\sphinxhyphen{}password}}\index{\sphinxhyphen{}\sphinxhyphen{}password@\spxentry{\sphinxhyphen{}\sphinxhyphen{}password}!mariadb\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-summary:cmdoption-mariadb-summary-password}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}password}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}p; type: string

Password to use when connecting.
If password contains commas they must be escaped with a backslash: “exam,ple”

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}port@\spxentry{\sphinxhyphen{}\sphinxhyphen{}port}}\index{\sphinxhyphen{}\sphinxhyphen{}port@\spxentry{\sphinxhyphen{}\sphinxhyphen{}port}!mariadb\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-summary:cmdoption-mariadb-summary-port}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}port}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}P; type: int

Port number to use for connection.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}read\sphinxhyphen{}samples@\spxentry{\sphinxhyphen{}\sphinxhyphen{}read\sphinxhyphen{}samples}}\index{\sphinxhyphen{}\sphinxhyphen{}read\sphinxhyphen{}samples@\spxentry{\sphinxhyphen{}\sphinxhyphen{}read\sphinxhyphen{}samples}!mariadb\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-summary:cmdoption-mariadb-summary-read-samples}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}read\sphinxhyphen{}samples}}\sphinxcode{\sphinxupquote{}}}
type: string

Create a report from the files in this directory.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}save\sphinxhyphen{}samples@\spxentry{\sphinxhyphen{}\sphinxhyphen{}save\sphinxhyphen{}samples}}\index{\sphinxhyphen{}\sphinxhyphen{}save\sphinxhyphen{}samples@\spxentry{\sphinxhyphen{}\sphinxhyphen{}save\sphinxhyphen{}samples}!mariadb\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-summary:cmdoption-mariadb-summary-save-samples}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}save\sphinxhyphen{}samples}}\sphinxcode{\sphinxupquote{}}}
type: string

Save the collected data in this directory.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}sleep@\spxentry{\sphinxhyphen{}\sphinxhyphen{}sleep}}\index{\sphinxhyphen{}\sphinxhyphen{}sleep@\spxentry{\sphinxhyphen{}\sphinxhyphen{}sleep}!mariadb\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-summary:cmdoption-mariadb-summary-sleep}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}sleep}}\sphinxcode{\sphinxupquote{}}}
type: int; default: 5

How long to sleep when gathering samples from vmstat.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}socket@\spxentry{\sphinxhyphen{}\sphinxhyphen{}socket}}\index{\sphinxhyphen{}\sphinxhyphen{}socket@\spxentry{\sphinxhyphen{}\sphinxhyphen{}socket}!mariadb\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-summary:cmdoption-mariadb-summary-socket}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}socket}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}S; type: string

Socket file to use for connection.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}summarize\sphinxhyphen{}mounts@\spxentry{\sphinxhyphen{}\sphinxhyphen{}summarize\sphinxhyphen{}mounts}}\index{\sphinxhyphen{}\sphinxhyphen{}summarize\sphinxhyphen{}mounts@\spxentry{\sphinxhyphen{}\sphinxhyphen{}summarize\sphinxhyphen{}mounts}!mariadb\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-summary:cmdoption-mariadb-summary-summarize-mounts}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}summarize\sphinxhyphen{}mounts}}\sphinxcode{\sphinxupquote{}}}
default: yes; negatable: yes

Report on mounted filesystems and disk usage.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}summarize\sphinxhyphen{}network@\spxentry{\sphinxhyphen{}\sphinxhyphen{}summarize\sphinxhyphen{}network}}\index{\sphinxhyphen{}\sphinxhyphen{}summarize\sphinxhyphen{}network@\spxentry{\sphinxhyphen{}\sphinxhyphen{}summarize\sphinxhyphen{}network}!mariadb\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-summary:cmdoption-mariadb-summary-summarize-network}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}summarize\sphinxhyphen{}network}}\sphinxcode{\sphinxupquote{}}}
default: yes; negatable: yes

Report on network controllers and configuration.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}summarize\sphinxhyphen{}processes@\spxentry{\sphinxhyphen{}\sphinxhyphen{}summarize\sphinxhyphen{}processes}}\index{\sphinxhyphen{}\sphinxhyphen{}summarize\sphinxhyphen{}processes@\spxentry{\sphinxhyphen{}\sphinxhyphen{}summarize\sphinxhyphen{}processes}!mariadb\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-summary:cmdoption-mariadb-summary-summarize-processes}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}summarize\sphinxhyphen{}processes}}\sphinxcode{\sphinxupquote{}}}
default: yes; negatable: yes

Report on top processes and \sphinxcode{\sphinxupquote{vmstat}} output.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}user@\spxentry{\sphinxhyphen{}\sphinxhyphen{}user}}\index{\sphinxhyphen{}\sphinxhyphen{}user@\spxentry{\sphinxhyphen{}\sphinxhyphen{}user}!mariadb\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-summary:cmdoption-mariadb-summary-user}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}user}}\sphinxcode{\sphinxupquote{}}}
short form: \sphinxhyphen{}u; type: string

User for login if not current user.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}version@\spxentry{\sphinxhyphen{}\sphinxhyphen{}version}}\index{\sphinxhyphen{}\sphinxhyphen{}version@\spxentry{\sphinxhyphen{}\sphinxhyphen{}version}!mariadb\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-summary:cmdoption-mariadb-summary-version}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}version}}\sphinxcode{\sphinxupquote{}}}
Print tool’s version and exit.

\end{fulllineitems}



\section{ENVIRONMENT}
\label{\detokenize{mariadb-summary:environment}}
This tool does not use any environment variables.


\section{SYSTEM REQUIREMENTS}
\label{\detokenize{mariadb-summary:system-requirements}}
This tool requires the Bourne shell (\sphinxstyleemphasis{/bin/sh}).


\section{AUTHORS}
\label{\detokenize{mariadb-summary:authors}}
Cole Busby, Manjot Singh


\section{ABOUT THIS MARIADB TOOL}
\label{\detokenize{mariadb-summary:about-this-mariadb-tool}}
This tool is part of MariaDB client tools. This MariaDB Tool was created in
August, 2019, based on Percona Toolkit which was
forked from two projects in June, 2011: Maatkit and Aspersa.  Those projects
were created by Baron Schwartz and primarily developed by him and Daniel Nichter.


\section{COPYRIGHT, LICENSE, AND WARRANTY}
\label{\detokenize{mariadb-summary:copyright-license-and-warranty}}
This program is copyright 2019\sphinxhyphen{}2021 MariaDB Corporation and/or its affiliates,
2011\sphinxhyphen{}2018 Percona LLC and/or its affiliates, 2010\sphinxhyphen{}2011 Baron Schwartz.

THIS PROGRAM IS PROVIDED “AS IS” AND WITHOUT ANY EXPRESS OR IMPLIED
WARRANTIES, INCLUDING, WITHOUT LIMITATION, THE IMPLIED WARRANTIES OF
MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.

This program is free software; you can redistribute it and/or modify it under
the terms of the GNU General Public License as published by the Free Software
Foundation, version 2; OR the Perl Artistic License.  On UNIX and similar
systems, you can issue \textasciigrave{}man perlgpl’ or \textasciigrave{}man perlartistic’ to read these
licenses.

You should have received a copy of the GNU General Public License along with
this program; if not, write to the Free Software Foundation, Inc., 59 Temple
Place, Suite 330, Boston, MA  02111\sphinxhyphen{}1307  USA.


\section{VERSION}
\label{\detokenize{mariadb-summary:version}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}summary}} 6.0.0rc


\chapter{\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}system\sphinxhyphen{}summary}}}
\label{\detokenize{mariadb-system-summary:mariadb-system-summary}}\label{\detokenize{mariadb-system-summary::doc}}

\section{NAME}
\label{\detokenize{mariadb-system-summary:name}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}system\sphinxhyphen{}summary}} \sphinxhyphen{} Summarize system information nicely.


\section{SYNOPSIS}
\label{\detokenize{mariadb-system-summary:synopsis}}

\subsection{Usage}
\label{\detokenize{mariadb-system-summary:usage}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{mariadb}\PYG{o}{\PYGZhy{}}\PYG{n}{system}\PYG{o}{\PYGZhy{}}\PYG{n}{summary}
\end{sphinxVerbatim}

\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}system\sphinxhyphen{}summary}} conveniently summarizes the status and configuration of
a server. It is not a tuning tool or diagnosis tool.  It produces a report that
is easy to diff and can be pasted into emails without losing the formatting.
This tool works well on many types of Unix systems.


\section{RISKS}
\label{\detokenize{mariadb-system-summary:risks}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}system\sphinxhyphen{}summary}} is mature, proven in the real world, and well tested,
but all database tools can pose a risk to the system and the database
server.  Before using this tool, please:
\begin{itemize}
\item {} 
Read the tool’s documentation

\item {} 
Test the tool on a non\sphinxhyphen{}production server

\item {} 
Backup your production server and verify the backups

\end{itemize}


\section{DESCRIPTION}
\label{\detokenize{mariadb-system-summary:description}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}system\sphinxhyphen{}summary}} runs a large variety of commands to inspect system status and
configuration, saves the output into files in a temporary directory, and
then runs Unix commands on these results to format them nicely.  It works
best when executed as a privileged user, but will also work without privileges,
although some output might not be possible to generate without root.


\section{OUTPUT}
\label{\detokenize{mariadb-system-summary:output}}
Many of the outputs from this tool are deliberately rounded to show their
magnitude but not the exact detail. This is called fuzzy\sphinxhyphen{}rounding. The idea is
that it doesn’t matter whether a particular counter is 918 or 921; such a small
variation is insignificant, and only makes the output hard to compare to other
servers. Fuzzy\sphinxhyphen{}rounding rounds in larger increments as the input grows. It
begins by rounding to the nearest 5, then the nearest 10, nearest 25, and then
repeats by a factor of 10 larger (50, 100, 250), and so on, as the input grows.

The following is a simple report generated from a CentOS virtual machine,
broken into sections with commentary following each section. Some long lines
are reformatted for clarity when reading this documentation as a manual page in
a terminal.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} MariaDB System Summary Report \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
        Date \PYG{p}{|} \PYG{l+m}{2012}\PYGZhy{}03\PYGZhy{}30 \PYG{l+m}{00}:58:07 UTC \PYG{o}{(}\PYG{n+nb}{local} TZ: EDT \PYGZhy{}0400\PYG{o}{)}
    Hostname \PYG{p}{|} localhost.localdomain
      Uptime \PYG{p}{|} \PYG{l+m}{20}:58:06 up \PYG{l+m}{1} day, \PYG{l+m}{20} min, \PYG{l+m}{1} user,
               load average: \PYG{l+m}{0}.14, \PYG{l+m}{0}.18, \PYG{l+m}{0}.18
      System \PYG{p}{|} innotek GmbH\PYG{p}{;} VirtualBox\PYG{p}{;} v1.2 \PYG{o}{(}\PYG{o}{)}
 Service Tag \PYG{p}{|} \PYG{l+m}{0}
    Platform \PYG{p}{|} Linux
     Release \PYG{p}{|} CentOS release \PYG{l+m}{5}.5 \PYG{o}{(}Final\PYG{o}{)}
      Kernel \PYG{p}{|} \PYG{l+m}{2}.6.18\PYGZhy{}194.el5
Architecture \PYG{p}{|} \PYG{n+nv}{CPU} \PYG{o}{=} \PYG{l+m}{32}\PYGZhy{}bit, \PYG{n+nv}{OS} \PYG{o}{=} \PYG{l+m}{32}\PYGZhy{}bit
   Threading \PYG{p}{|} NPTL \PYG{l+m}{2}.5
    Compiler \PYG{p}{|} GNU CC version \PYG{l+m}{4}.1.2 \PYG{l+m}{20080704} \PYG{o}{(}Red Hat \PYG{l+m}{4}.1.2\PYGZhy{}48\PYG{o}{)}.
     SELinux \PYG{p}{|} Enforcing
 Virtualized \PYG{p}{|} VirtualBox
\end{sphinxVerbatim}

This section shows the current date and time, and a synopsis of the server and
operating system.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Processor \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
  Processors \PYG{p}{|} \PYG{n+nv}{physical} \PYG{o}{=} \PYG{l+m}{1}, \PYG{n+nv}{cores} \PYG{o}{=} \PYG{l+m}{0}, \PYG{n+nv}{virtual} \PYG{o}{=} \PYG{l+m}{1}, \PYG{n+nv}{hyperthreading} \PYG{o}{=} no
      Speeds \PYG{p}{|} 1x2510.626
      Models \PYG{p}{|} 1xIntel\PYG{o}{(}R\PYG{o}{)} Core\PYG{o}{(}TM\PYG{o}{)} i5\PYGZhy{}2400S CPU @ \PYG{l+m}{2}.50GHz
      Caches \PYG{p}{|} 1x6144 KB
\end{sphinxVerbatim}

This section is derived from \sphinxstyleemphasis{/proc/cpuinfo}.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Memory \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
       Total \PYG{p}{|} \PYG{l+m}{503}.2M
        Free \PYG{p}{|} \PYG{l+m}{29}.0M
        Used \PYG{p}{|} \PYG{n+nv}{physical} \PYG{o}{=} \PYG{l+m}{474}.2M, swap \PYG{n+nv}{allocated} \PYG{o}{=} \PYG{l+m}{1}.0M,
               swap \PYG{n+nv}{used} \PYG{o}{=} \PYG{l+m}{16}.0k, \PYG{n+nv}{virtual} \PYG{o}{=} \PYG{l+m}{474}.3M
     Buffers \PYG{p}{|} \PYG{l+m}{33}.9M
      Caches \PYG{p}{|} \PYG{l+m}{262}.6M
       Dirty \PYG{p}{|} \PYG{l+m}{396} kB
     UsedRSS \PYG{p}{|} \PYG{l+m}{201}.9M
  Swappiness \PYG{p}{|} \PYG{l+m}{60}
 DirtyPolicy \PYG{p}{|} \PYG{l+m}{40}, \PYG{l+m}{10}
 Locator  Size  Speed    Form Factor  Type    Type \PYG{n+nv}{Detail}
 \PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}  \PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}  \PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}    \PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}  \PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}    \PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}
\end{sphinxVerbatim}

Information about memory is gathered from \sphinxcode{\sphinxupquote{free}}. The Used statistic is the
total of the rss sizes displayed by \sphinxcode{\sphinxupquote{ps}}. The Dirty statistic for the cached
value comes from \sphinxstyleemphasis{/proc/meminfo}. On Linux, the swappiness settings are
gathered from \sphinxcode{\sphinxupquote{sysctl}}. The final portion of this section is a table of the
DIMMs, which comes from \sphinxcode{\sphinxupquote{dmidecode}}. In this example there is no output.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Mounted Filesystems \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
  Filesystem                       Size Used Type  Opts Mountpoint
  /dev/mapper/VolGroup00\PYGZhy{}LogVol00   15G  \PYG{l+m}{17}\PYGZpc{} ext3  rw   /
  /dev/sda1                         99M  \PYG{l+m}{13}\PYGZpc{} ext3  rw   /boot
  tmpfs                            252M   \PYG{l+m}{0}\PYGZpc{} tmpfs rw   /dev/shm
\end{sphinxVerbatim}

The mounted filesystem section is a combination of information from \sphinxcode{\sphinxupquote{mount}} and
\sphinxcode{\sphinxupquote{df}}. This section is skipped if you disable {\hyperref[\detokenize{mariadb-system-summary:cmdoption-mariadb-system-summary-summarize-mounts}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}summarize\sphinxhyphen{}mounts}}}}}.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Disk Schedulers And Queue Size \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
        dm\PYGZhy{}0 \PYG{p}{|} UNREADABLE
        dm\PYGZhy{}1 \PYG{p}{|} UNREADABLE
         hdc \PYG{p}{|} \PYG{o}{[}cfq\PYG{o}{]} \PYG{l+m}{128}
         md0 \PYG{p}{|} UNREADABLE
         sda \PYG{p}{|} \PYG{o}{[}cfq\PYG{o}{]} \PYG{l+m}{128}
\end{sphinxVerbatim}

The disk scheduler information is extracted from the \sphinxstyleemphasis{/sys} filesystem in
Linux.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Disk Partioning \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
Device       Type      Start        End               \PYG{n+nv}{Size}
\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=} \PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=} \PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=} \PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=} \PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}
/dev/sda     Disk                              \PYG{l+m}{17179869184}
/dev/sda1    Part          \PYG{l+m}{1}         \PYG{l+m}{13}           \PYG{l+m}{98703360}
/dev/sda2    Part         \PYG{l+m}{14}       \PYG{l+m}{2088}        \PYG{l+m}{17059230720}
\end{sphinxVerbatim}

Information about disk partitioning comes from \sphinxcode{\sphinxupquote{fdisk \sphinxhyphen{}l}}.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Kernel Inode State \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
dentry\PYGZhy{}state \PYG{p}{|} \PYG{l+m}{10697} \PYG{l+m}{8559}  \PYG{l+m}{45} \PYG{l+m}{0}  \PYG{l+m}{0}  \PYG{l+m}{0}
     file\PYGZhy{}nr \PYG{p}{|} \PYG{l+m}{960}   \PYG{l+m}{0}  \PYG{l+m}{50539}
    inode\PYGZhy{}nr \PYG{p}{|} \PYG{l+m}{14059} \PYG{l+m}{8139}
\end{sphinxVerbatim}

These lines are from the files of the same name in the \sphinxstyleemphasis{/proc/sys/fs}
directory on Linux. Read the \sphinxcode{\sphinxupquote{proc}} man page to learn about the meaning of
these files on your system.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} LVM Volumes \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
LV       VG         Attr   LSize   Origin Snap\PYGZpc{} Move Log Copy\PYGZpc{} Convert
LogVol00 VolGroup00 \PYGZhy{}wi\PYGZhy{}ao \PYG{l+m}{269}.00G
LogVol01 VolGroup00 \PYGZhy{}wi\PYGZhy{}ao   \PYG{l+m}{9}.75G
\end{sphinxVerbatim}

This section shows the output of \sphinxcode{\sphinxupquote{lvs}}.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} RAID Controller \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
  Controller \PYG{p}{|} No RAID controller detected
\end{sphinxVerbatim}

The tool can detect a variety of RAID controllers by examining \sphinxcode{\sphinxupquote{lspci}} and
\sphinxcode{\sphinxupquote{dmesg}} information. If the controller software is installed on the system, in
many cases it is able to execute status commands and show a summary of the RAID
controller’s status and configuration. If your system is not supported, please
file a bug report.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Network Config \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
  Controller \PYG{p}{|} Intel Corporation 82540EM Gigabit Ethernet Controller
 FIN Timeout \PYG{p}{|} \PYG{l+m}{60}
  Port Range \PYG{p}{|} \PYG{l+m}{61000}
\end{sphinxVerbatim}

The network controllers attached to the system are detected from \sphinxcode{\sphinxupquote{lspci}}. The
TCP/IP protocol configuration parameters are extracted from \sphinxcode{\sphinxupquote{sysctl}}. You can skip this section by disabling the {\hyperref[\detokenize{mariadb-system-summary:cmdoption-mariadb-system-summary-summarize-network}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}summarize\sphinxhyphen{}network}}}}} option.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Interface Statistics \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
interface rx\PYGZus{}bytes rx\PYGZus{}packets rx\PYGZus{}errors tx\PYGZus{}bytes tx\PYGZus{}packets \PYG{n+nv}{tx\PYGZus{}errors}
\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=} \PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=} \PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=} \PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=} \PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=} \PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=} \PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}\PYG{o}{=}
lo        \PYG{l+m}{60000000}      \PYG{l+m}{12500}         \PYG{l+m}{0} \PYG{l+m}{60000000}      \PYG{l+m}{12500}         \PYG{l+m}{0}
eth0      \PYG{l+m}{15000000}      \PYG{l+m}{80000}         \PYG{l+m}{0}  \PYG{l+m}{1500000}      \PYG{l+m}{10000}         \PYG{l+m}{0}
sit0             \PYG{l+m}{0}          \PYG{l+m}{0}         \PYG{l+m}{0}        \PYG{l+m}{0}          \PYG{l+m}{0}         \PYG{l+m}{0}
\end{sphinxVerbatim}

Interface statistics are gathered from \sphinxcode{\sphinxupquote{ip \sphinxhyphen{}s link}} and are fuzzy\sphinxhyphen{}rounded. The
columns are received and transmitted bytes, packets, and errors.  You can skip
this section by disabling the {\hyperref[\detokenize{mariadb-system-summary:cmdoption-mariadb-system-summary-summarize-network}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}summarize\sphinxhyphen{}network}}}}} option.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Network Connections \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
  Connections from remote IP addresses
    \PYG{l+m}{127}.0.0.1           \PYG{l+m}{2}
  Connections to \PYG{n+nb}{local} IP addresses
    \PYG{l+m}{127}.0.0.1           \PYG{l+m}{2}
  Connections to top \PYG{l+m}{10} \PYG{n+nb}{local} ports
    \PYG{l+m}{38346}               \PYG{l+m}{1}
    \PYG{l+m}{60875}               \PYG{l+m}{1}
  States of connections
    ESTABLISHED         \PYG{l+m}{5}
    LISTEN              \PYG{l+m}{8}
\end{sphinxVerbatim}

This section shows a summary of network connections, retrieved from \sphinxcode{\sphinxupquote{netstat}}
and “fuzzy\sphinxhyphen{}rounded” to make them easier to compare when the numbers grow large.
There are two sub\sphinxhyphen{}sections showing how many connections there are per origin
and destination IP address, and a sub\sphinxhyphen{}section showing the count of ports in
use.  The section ends with the count of the network connections’ states.  You
can skip this section by disabling the {\hyperref[\detokenize{mariadb-system-summary:cmdoption-mariadb-system-summary-summarize-network}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}summarize\sphinxhyphen{}network}}}}} option.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Top Processes \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
  PID USER  PR  NI  VIRT  RES  SHR S \PYGZpc{}CPU \PYGZpc{}MEM    TIME+  COMMAND
    \PYG{l+m}{1} root  \PYG{l+m}{15}   \PYG{l+m}{0}  \PYG{l+m}{2072}  \PYG{l+m}{628}  \PYG{l+m}{540} S  \PYG{l+m}{0}.0  \PYG{l+m}{0}.1   \PYG{l+m}{0}:02.55 init
    \PYG{l+m}{2} root  RT  \PYGZhy{}5     \PYG{l+m}{0}    \PYG{l+m}{0}    \PYG{l+m}{0} S  \PYG{l+m}{0}.0  \PYG{l+m}{0}.0   \PYG{l+m}{0}:00.00 migration/0
    \PYG{l+m}{3} root  \PYG{l+m}{34}  \PYG{l+m}{19}     \PYG{l+m}{0}    \PYG{l+m}{0}    \PYG{l+m}{0} S  \PYG{l+m}{0}.0  \PYG{l+m}{0}.0   \PYG{l+m}{0}:00.03 ksoftirqd/0
    \PYG{l+m}{4} root  RT  \PYGZhy{}5     \PYG{l+m}{0}    \PYG{l+m}{0}    \PYG{l+m}{0} S  \PYG{l+m}{0}.0  \PYG{l+m}{0}.0   \PYG{l+m}{0}:00.00 watchdog/0
    \PYG{l+m}{5} root  \PYG{l+m}{10}  \PYGZhy{}5     \PYG{l+m}{0}    \PYG{l+m}{0}    \PYG{l+m}{0} S  \PYG{l+m}{0}.0  \PYG{l+m}{0}.0   \PYG{l+m}{0}:00.97 events/0
    \PYG{l+m}{6} root  \PYG{l+m}{10}  \PYGZhy{}5     \PYG{l+m}{0}    \PYG{l+m}{0}    \PYG{l+m}{0} S  \PYG{l+m}{0}.0  \PYG{l+m}{0}.0   \PYG{l+m}{0}:00.00 khelper
    \PYG{l+m}{7} root  \PYG{l+m}{10}  \PYGZhy{}5     \PYG{l+m}{0}    \PYG{l+m}{0}    \PYG{l+m}{0} S  \PYG{l+m}{0}.0  \PYG{l+m}{0}.0   \PYG{l+m}{0}:00.00 kthread
   \PYG{l+m}{10} root  \PYG{l+m}{10}  \PYGZhy{}5     \PYG{l+m}{0}    \PYG{l+m}{0}    \PYG{l+m}{0} S  \PYG{l+m}{0}.0  \PYG{l+m}{0}.0   \PYG{l+m}{0}:00.13 kblockd/0
   \PYG{l+m}{11} root  \PYG{l+m}{20}  \PYGZhy{}5     \PYG{l+m}{0}    \PYG{l+m}{0}    \PYG{l+m}{0} S  \PYG{l+m}{0}.0  \PYG{l+m}{0}.0   \PYG{l+m}{0}:00.00 kacpid
\PYG{c+c1}{\PYGZsh{} Notable Processes \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
  PID    OOM    COMMAND
 \PYG{l+m}{2028}    +0    sshd
\end{sphinxVerbatim}

This section shows the first few lines of \sphinxcode{\sphinxupquote{top}} so that you can see what
processes are actively using CPU time.  The notable processes include the SSH
daemon and any process whose out\sphinxhyphen{}of\sphinxhyphen{}memory\sphinxhyphen{}killer priority is set to 17. You
can skip this section by disabling the {\hyperref[\detokenize{mariadb-system-summary:cmdoption-mariadb-system-summary-summarize-processes}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}summarize\sphinxhyphen{}processes}}}}} option.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Simplified and fuzzy rounded vmstat (wait please) \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
  procs  \PYGZhy{}\PYGZhy{}\PYGZhy{}swap\PYGZhy{}\PYGZhy{} \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}io\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} \PYGZhy{}\PYGZhy{}\PYGZhy{}system\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}cpu\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}
   r  b    si   so    bi    bo     ir     cs  us  sy  il  wa  st
   \PYG{l+m}{2}  \PYG{l+m}{0}     \PYG{l+m}{0}    \PYG{l+m}{0}     \PYG{l+m}{3}    \PYG{l+m}{15}     \PYG{l+m}{30}    \PYG{l+m}{125}   \PYG{l+m}{0}   \PYG{l+m}{0}  \PYG{l+m}{99}   \PYG{l+m}{0}   \PYG{l+m}{0}
   \PYG{l+m}{0}  \PYG{l+m}{0}     \PYG{l+m}{0}    \PYG{l+m}{0}     \PYG{l+m}{0}     \PYG{l+m}{0}   \PYG{l+m}{1250}    \PYG{l+m}{800}   \PYG{l+m}{6}  \PYG{l+m}{10}  \PYG{l+m}{84}   \PYG{l+m}{0}   \PYG{l+m}{0}
   \PYG{l+m}{0}  \PYG{l+m}{0}     \PYG{l+m}{0}    \PYG{l+m}{0}     \PYG{l+m}{0}     \PYG{l+m}{0}   \PYG{l+m}{1000}    \PYG{l+m}{125}   \PYG{l+m}{0}   \PYG{l+m}{0} \PYG{l+m}{100}   \PYG{l+m}{0}   \PYG{l+m}{0}
   \PYG{l+m}{0}  \PYG{l+m}{0}     \PYG{l+m}{0}    \PYG{l+m}{0}     \PYG{l+m}{0}     \PYG{l+m}{0}   \PYG{l+m}{1000}    \PYG{l+m}{125}   \PYG{l+m}{0}   \PYG{l+m}{0} \PYG{l+m}{100}   \PYG{l+m}{0}   \PYG{l+m}{0}
   \PYG{l+m}{0}  \PYG{l+m}{0}     \PYG{l+m}{0}    \PYG{l+m}{0}     \PYG{l+m}{0}   \PYG{l+m}{450}   \PYG{l+m}{1000}    \PYG{l+m}{125}   \PYG{l+m}{0}   \PYG{l+m}{1}  \PYG{l+m}{88}  \PYG{l+m}{11}   \PYG{l+m}{0}
\PYG{c+c1}{\PYGZsh{} The End \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}}
\end{sphinxVerbatim}

This section is a trimmed\sphinxhyphen{}down sample of \sphinxcode{\sphinxupquote{vmstat 1 5}}, so you can see the
general status of the system at present. The values in the table are
fuzzy\sphinxhyphen{}rounded, except for the CPU columns.  You can skip this section by
disabling the {\hyperref[\detokenize{mariadb-system-summary:cmdoption-mariadb-system-summary-summarize-processes}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}summarize\sphinxhyphen{}processes}}}}} option.


\section{OPTIONS}
\label{\detokenize{mariadb-system-summary:options}}\index{mariadb\sphinxhyphen{}system\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}system\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}config@\spxentry{\sphinxhyphen{}\sphinxhyphen{}config}}\index{\sphinxhyphen{}\sphinxhyphen{}config@\spxentry{\sphinxhyphen{}\sphinxhyphen{}config}!mariadb\sphinxhyphen{}system\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}system\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-system-summary:cmdoption-mariadb-system-summary-config}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}config}}\sphinxcode{\sphinxupquote{}}}
type: string

Read this comma\sphinxhyphen{}separated list of config files.  If specified, this must be the
first option on the command line.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}system\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}system\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}help@\spxentry{\sphinxhyphen{}\sphinxhyphen{}help}}\index{\sphinxhyphen{}\sphinxhyphen{}help@\spxentry{\sphinxhyphen{}\sphinxhyphen{}help}!mariadb\sphinxhyphen{}system\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}system\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-system-summary:cmdoption-mariadb-system-summary-help}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}help}}\sphinxcode{\sphinxupquote{}}}
Print help and exit.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}system\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}system\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}read\sphinxhyphen{}samples@\spxentry{\sphinxhyphen{}\sphinxhyphen{}read\sphinxhyphen{}samples}}\index{\sphinxhyphen{}\sphinxhyphen{}read\sphinxhyphen{}samples@\spxentry{\sphinxhyphen{}\sphinxhyphen{}read\sphinxhyphen{}samples}!mariadb\sphinxhyphen{}system\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}system\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-system-summary:cmdoption-mariadb-system-summary-read-samples}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}read\sphinxhyphen{}samples}}\sphinxcode{\sphinxupquote{}}}
type: string

Create a report from the files in this directory.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}system\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}system\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}save\sphinxhyphen{}samples@\spxentry{\sphinxhyphen{}\sphinxhyphen{}save\sphinxhyphen{}samples}}\index{\sphinxhyphen{}\sphinxhyphen{}save\sphinxhyphen{}samples@\spxentry{\sphinxhyphen{}\sphinxhyphen{}save\sphinxhyphen{}samples}!mariadb\sphinxhyphen{}system\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}system\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-system-summary:cmdoption-mariadb-system-summary-save-samples}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}save\sphinxhyphen{}samples}}\sphinxcode{\sphinxupquote{}}}
type: string

Save the collected data in this directory.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}system\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}system\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}sleep@\spxentry{\sphinxhyphen{}\sphinxhyphen{}sleep}}\index{\sphinxhyphen{}\sphinxhyphen{}sleep@\spxentry{\sphinxhyphen{}\sphinxhyphen{}sleep}!mariadb\sphinxhyphen{}system\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}system\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-system-summary:cmdoption-mariadb-system-summary-sleep}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}sleep}}\sphinxcode{\sphinxupquote{}}}
type: int; default: 5

How long to sleep when gathering samples from vmstat.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}system\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}system\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}summarize\sphinxhyphen{}mounts@\spxentry{\sphinxhyphen{}\sphinxhyphen{}summarize\sphinxhyphen{}mounts}}\index{\sphinxhyphen{}\sphinxhyphen{}summarize\sphinxhyphen{}mounts@\spxentry{\sphinxhyphen{}\sphinxhyphen{}summarize\sphinxhyphen{}mounts}!mariadb\sphinxhyphen{}system\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}system\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-system-summary:cmdoption-mariadb-system-summary-summarize-mounts}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}summarize\sphinxhyphen{}mounts}}\sphinxcode{\sphinxupquote{}}}
default: yes; negatable: yes

Report on mounted filesystems and disk usage.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}system\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}system\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}summarize\sphinxhyphen{}network@\spxentry{\sphinxhyphen{}\sphinxhyphen{}summarize\sphinxhyphen{}network}}\index{\sphinxhyphen{}\sphinxhyphen{}summarize\sphinxhyphen{}network@\spxentry{\sphinxhyphen{}\sphinxhyphen{}summarize\sphinxhyphen{}network}!mariadb\sphinxhyphen{}system\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}system\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-system-summary:cmdoption-mariadb-system-summary-summarize-network}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}summarize\sphinxhyphen{}network}}\sphinxcode{\sphinxupquote{}}}
default: yes; negatable: yes

Report on network controllers and configuration.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}system\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}system\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}summarize\sphinxhyphen{}processes@\spxentry{\sphinxhyphen{}\sphinxhyphen{}summarize\sphinxhyphen{}processes}}\index{\sphinxhyphen{}\sphinxhyphen{}summarize\sphinxhyphen{}processes@\spxentry{\sphinxhyphen{}\sphinxhyphen{}summarize\sphinxhyphen{}processes}!mariadb\sphinxhyphen{}system\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}system\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-system-summary:cmdoption-mariadb-system-summary-summarize-processes}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}summarize\sphinxhyphen{}processes}}\sphinxcode{\sphinxupquote{}}}
default: yes; negatable: yes

Report on top processes and \sphinxcode{\sphinxupquote{vmstat}} output.

\end{fulllineitems}

\index{mariadb\sphinxhyphen{}system\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}system\sphinxhyphen{}summary command line option}!\sphinxhyphen{}\sphinxhyphen{}version@\spxentry{\sphinxhyphen{}\sphinxhyphen{}version}}\index{\sphinxhyphen{}\sphinxhyphen{}version@\spxentry{\sphinxhyphen{}\sphinxhyphen{}version}!mariadb\sphinxhyphen{}system\sphinxhyphen{}summary command line option@\spxentry{mariadb\sphinxhyphen{}system\sphinxhyphen{}summary command line option}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mariadb-system-summary:cmdoption-mariadb-system-summary-version}}\pysigline{\sphinxbfcode{\sphinxupquote{\sphinxhyphen{}\sphinxhyphen{}version}}\sphinxcode{\sphinxupquote{}}}
Print tool’s version and exit.

\end{fulllineitems}



\section{ENVIRONMENT}
\label{\detokenize{mariadb-system-summary:environment}}
This tool does not use any environment variables.


\section{SYSTEM REQUIREMENTS}
\label{\detokenize{mariadb-system-summary:system-requirements}}
This tool requires the Bourne shell (\sphinxstyleemphasis{/bin/sh}).


\section{AUTHORS}
\label{\detokenize{mariadb-system-summary:authors}}
Cole Busby, Baron Schwartz, Kevin van Zonneveld, and Brian Fraser


\section{ABOUT THIS MARIADB TOOL}
\label{\detokenize{mariadb-system-summary:about-this-mariadb-tool}}
This tool is part of MariaDB client tools. This MariaDB Tool was forked from
Percona Toolkit’s \sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}system\sphinxhyphen{}summary}} in August, 2019. Percona Toolkit was
forked from two projects in June, 2011: Maatkit and Aspersa.  Those projects
were created by Baron Schwartz and primarily developed by him and Daniel Nichter.


\section{COPYRIGHT, LICENSE, AND WARRANTY}
\label{\detokenize{mariadb-system-summary:copyright-license-and-warranty}}
This program is copyright 2019\sphinxhyphen{}2021 MariaDB Corporation and/or its affiliates,
2011\sphinxhyphen{}2018 Percona LLC and/or its affiliates, 2010\sphinxhyphen{}2011 Baron Schwartz.

THIS PROGRAM IS PROVIDED “AS IS” AND WITHOUT ANY EXPRESS OR IMPLIED
WARRANTIES, INCLUDING, WITHOUT LIMITATION, THE IMPLIED WARRANTIES OF
MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.

This program is free software; you can redistribute it and/or modify it under
the terms of the GNU General Public License as published by the Free Software
Foundation, version 2; OR the Perl Artistic License.  On UNIX and similar
systems, you can issue \textasciigrave{}man perlgpl’ or \textasciigrave{}man perlartistic’ to read these
licenses.

You should have received a copy of the GNU General Public License along with
this program; if not, write to the Free Software Foundation, Inc., 59 Temple
Place, Suite 330, Boston, MA  02111\sphinxhyphen{}1307  USA.


\section{VERSION}
\label{\detokenize{mariadb-system-summary:version}}
\sphinxstyleliteralstrong{\sphinxupquote{mariadb\sphinxhyphen{}system\sphinxhyphen{}summary}} 6.0.0rc


\part{Configuration}
\label{\detokenize{index:configuration}}

\part{Miscellaneous}
\label{\detokenize{index:miscellaneous}}


\renewcommand{\indexname}{Index}
\printindex
\end{document}